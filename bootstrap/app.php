
═══════════════════════════════════════════════════
File Contents:
═══════════════════════════════════════════════════

File: resources/css/app.css
---
@tailwind base; @tailwind components; @tailwind utilities;

File: resources/js/app.js
---
import './bootstrap'; import Alpine from 'alpinejs'; window.Alpine = Alpine; Alpine.start();

File: resources/js/bootstrap.js
---
import axios from 'axios'; window.axios = axios; window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

File: resources/views/components/application-logo.blade.php
---
<svg viewBox="0 0 316 316" xmlns="http://www.w3.org/2000/svg" {{ $attributes }}> <path d="M305.8 81.125C305.77 80.995 305.69 80.885 305.65 80.755C305.56 80.525 305.49 80.285 305.37 80.075C305.29 79.935 305.17 79.815 305.07 79.685C304.94 79.515 304.83 79.325 304.68 79.175C304.55 79.045 304.39 78.955 304.25 78.845C304.09 78.715 303.95 78.575 303.77 78.475L251.32 48.275C249.97 47.495 248.31 47.495 246.96 48.275L194.51 78.475C194.33 78.575 194.19 78.725 194.03 78.845C193.89 78.955 193.73 79.045 193.6 79.175C193.45 79.325 193.34 79.515 193.21 79.685C193.11 79.815 192.99 79.935 192.91 80.075C192.79 80.285 192.71 80.525 192.63 80.755C192.58 80.875 192.51 80.995 192.48 81.125C192.38 81.495 192.33 81.875 192.33 82.265V139.625L148.62 164.795V52.575C148.62 52.185 148.57 51.805 148.47 51.435C148.44 51.305 148.36 51.195 148.32 51.065C148.23 50.835 148.16 50.595 148.04 50.385C147.96 50.245 147.84 50.125 147.74 49.995C147.61 49.825 147.5 49.635 147.35 49.485C147.22 49.355 147.06 49.265 146.92 49.155C146.76 49.025 146.62 48.885 146.44 48.785L93.99 18.585C92.64 17.805 90.98 17.805 89.63 18.585L37.18 48.785C37 48.885 36.86 49.035 36.7 49.155C36.56 49.265 36.4 49.355 36.27 49.485C36.12 49.635 36.01 49.825 35.88 49.995C35.78 50.125 35.66 50.245 35.58 50.385C35.46 50.595 35.38 50.835 35.3 51.065C35.25 51.185 35.18 51.305 35.15 51.435C35.05 51.805 35 52.185 35 52.575V232.235C35 233.795 35.84 235.245 37.19 236.025L142.1 296.425C142.33 296.555 142.58 296.635 142.82 296.725C142.93 296.765 143.04 296.835 143.16 296.865C143.53 296.965 143.9 297.015 144.28 297.015C144.66 297.015 145.03 296.965 145.4 296.865C145.5 296.835 145.59 296.775 145.69 296.745C145.95 296.655 146.21 296.565 146.45 296.435L251.36 236.035C252.72 235.255 253.55 233.815 253.55 232.245V174.885L303.81 145.945C305.17 145.165 306 143.725 306 142.155V82.265C305.95 81.875 305.89 81.495 305.8 81.125ZM144.2 227.205L100.57 202.515L146.39 176.135L196.66 147.195L240.33 172.335L208.29 190.625L144.2 227.205ZM244.75 114.995V164.795L226.39 154.225L201.03 139.625V89.825L219.39 100.395L244.75 114.995ZM249.12 57.105L292.81 82.265L249.12 107.425L205.43 82.265L249.12 57.105ZM114.49 184.425L96.13 194.995V85.305L121.49 70.705L139.85 60.135V169.815L114.49 184.425ZM91.76 27.425L135.45 52.585L91.76 77.745L48.07 52.585L91.76 27.425ZM43.67 60.135L62.03 70.705L87.39 85.305V202.545V202.555V202.565C87.39 202.735 87.44 202.895 87.46 203.055C87.49 203.265 87.49 203.485 87.55 203.695V203.705C87.6 203.875 87.69 204.035 87.76 204.195C87.84 204.375 87.89 204.575 87.99 204.745C87.99 204.745 87.99 204.755 88 204.755C88.09 204.905 88.22 205.035 88.33 205.175C88.45 205.335 88.55 205.495 88.69 205.635L88.7 205.645C88.82 205.765 88.98 205.855 89.12 205.965C89.28 206.085 89.42 206.225 89.59 206.325C89.6 206.325 89.6 206.325 89.61 206.335C89.62 206.335 89.62 206.345 89.63 206.345L139.87 234.775V285.065L43.67 229.705V60.135ZM244.75 229.705L148.58 285.075V234.775L219.8 194.115L244.75 179.875V229.705ZM297.2 139.625L253.49 164.795V114.995L278.85 100.395L297.21 89.825V139.625H297.2Z"/> </svg>

File: resources/views/components/auth-session-status.blade.php
---
@props(['status']) @if ($status) <div {{ $attributes->merge(['class' => 'font-medium text-sm text-green-600']) }}> {{ $status }} </div> @endif

File: resources/views/components/danger-button.blade.php
---
<button {{ $attributes->merge(['type' => 'submit', 'class' => 'inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 active:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150']) }}> {{ $slot }} </button>

File: resources/views/components/dropdown.blade.php
---
@props(['align' => 'right', 'width' => '48', 'contentClasses' => 'py-1 bg-white']) @php $alignmentClasses = match ($align) { 'left' => 'ltr:origin-top-left rtl:origin-top-right start-0', 'top' => 'origin-top', default => 'ltr:origin-top-right rtl:origin-top-left end-0', }; $width = match ($width) { '48' => 'w-48', default => $width, }; @endphp <div class="relative" x-data="{ open: false }" @click.outside="open = false" @close.stop="open = false"> <div @click="open = ! open"> {{ $trigger }} </div> <div x-show="open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95" class="absolute z-50 mt-2 {{ $width }} rounded-md shadow-lg {{ $alignmentClasses }}" style="display: none;" @click="open = false"> <div class="rounded-md ring-1 ring-black ring-opacity-5 {{ $contentClasses }}"> {{ $content }} </div> </div> </div>

File: resources/views/components/dropdown-link.blade.php
---
<a {{ $attributes->merge(['class' => 'block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out']) }}>{{ $slot }}</a>

File: resources/views/components/input-error.blade.php
---
@props(['messages']) @if ($messages) <ul {{ $attributes->merge(['class' => 'text-sm text-red-600 space-y-1']) }}> @foreach ((array) $messages as $message) <li>{{ $message }}</li> @endforeach </ul> @endif

File: resources/views/components/input-label.blade.php
---
@props(['value']) <label {{ $attributes->merge(['class' => 'block font-medium text-sm text-gray-700']) }}> {{ $value ?? $slot }} </label>

File: resources/views/components/modal.blade.php
---
@props([ 'name', 'show' => false, 'maxWidth' => '2xl' ]) @php $maxWidth = [ 'sm' => 'sm:max-w-sm', 'md' => 'sm:max-w-md', 'lg' => 'sm:max-w-lg', 'xl' => 'sm:max-w-xl', '2xl' => 'sm:max-w-2xl', ][$maxWidth]; @endphp <div x-data="{ show: @js($show), focusables() { // All focusable element types... let selector = 'a, button, input:not([type=\'hidden\']), textarea, select, details, [tabindex]:not([tabindex=\'-1\'])' return [...$el.querySelectorAll(selector)] // All non-disabled elements... .filter(el => ! el.hasAttribute('disabled')) }, firstFocusable() { return this.focusables()[0] }, lastFocusable() { return this.focusables().slice(-1)[0] }, nextFocusable() { return this.focusables()[this.nextFocusableIndex()] || this.firstFocusable() }, prevFocusable() { return this.focusables()[this.prevFocusableIndex()] || this.lastFocusable() }, nextFocusableIndex() { return (this.focusables().indexOf(document.activeElement) + 1) % (this.focusables().length + 1) }, prevFocusableIndex() { return Math.max(0, this.focusables().indexOf(document.activeElement)) -1 }, }" x-init="$watch('show', value => { if (value) { document.body.classList.add('overflow-y-hidden'); {{ $attributes->has('focusable') ? 'setTimeout(() => firstFocusable().focus(), 100)' : '' }} } else { document.body.classList.remove('overflow-y-hidden'); } })" x-on:open-modal.window="$event.detail == '{{ $name }}' ? show = true : null" x-on:close-modal.window="$event.detail == '{{ $name }}' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50" style="display: {{ $show ? 'block' : 'none' }};" > <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" > <div class="absolute inset-0 bg-gray-500 opacity-75"></div> </div> <div x-show="show" class="mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full {{ $maxWidth }} sm:mx-auto" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" > {{ $slot }} </div> </div>

File: resources/views/components/modal-system.blade.php
---
@props([ 'type' => 'alert', // alert, confirm, verification 'title' => '', 'message' => '', 'email' => '', 'show' => false ]) <!-- Modal Overlay --> <div class="modal-overlay {{ $show ? 'active' : '' }}" id="modalOverlay" style="{{ $show ? '' : 'display: none;' }}"> <div class="modal-container"> <div class="modal-header"> <h3 class="modal-title" id="modalTitle"> <i class="bi bi-info-circle" style="color: var(--primary);"></i> <span>{{ $title }}</span> </h3> <button class="modal-close" onclick="closeModal()"> <i class="bi bi-x-lg"></i> </button> </div> <div class="modal-body" id="modalBody"> <!-- Dynamic content will be injected here --> <p id="modalMessage" style="color: var(--gray-700);">{{ $message }}</p> </div> <div class="modal-footer" id="modalFooter"> <button class="modal-btn secondary" onclick="closeModal()">Annuler</button> <button class="modal-btn primary" id="modalConfirmBtn">Confirmer</button> </div> </div> </div> <!-- Verification Modal (Special) --> <div class="modal-overlay" id="verificationModal"> <div class="modal-container"> <div class="modal-header"> <h3 class="modal-title"> <i class="bi bi-shield-check" style="color: var(--primary);"></i> Vérification Email </h3> <button class="modal-close" onclick="closeVerificationModal()"> <i class="bi bi-x-lg"></i> </button> </div> <div class="modal-body"> <p style="text-align: center; color: var(--gray-600); margin-bottom: 16px;"> Un code de vérification a été envoyé à<br> <strong id="verificationEmail" style="color: var(--primary);"></strong> </p> <form id="verificationForm" method="POST" action="{{ route('verification.code.verify') }}"> @csrf <input type="hidden" name="email" id="verificationEmailInput"> <div class="verification-code-inputs"> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="0"> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="1"> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="2"> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="3"> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="4"> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="5"> </div> <input type="hidden" name="code" id="verificationCodeInput"> <button type="submit" class="btn-submit" style="width: 100%;"> <span>Vérifier</span> <i class="bi bi-check-circle"></i> </button> </form> <div class="verification-info"> <p>Vous n'avez pas reçu le code ? <a href="#" id="resendCode" onclick="resendVerificationCode(event)">Renvoyer</a></p> </div> <div class="resend-timer disabled" id="resendTimer"> Renvoyer dans <span id="timerCount">60</span>s </div> </div> </div> </div> <style> /* Modal Styles */ .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s ease; } .modal-overlay.active { opacity: 1; visibility: visible; } .modal-container { background: var(--surface); border-radius: var(--radius-xl); box-shadow: var(--shadow-lg); max-width: 450px; width: 90%; transform: scale(0.9) translateY(20px); transition: all 0.3s ease; overflow: hidden; } .modal-overlay.active .modal-container { transform: scale(1) translateY(0); } .modal-header { padding: 24px; border-bottom: 1px solid var(--gray-200); display: flex; align-items: center; justify-content: space-between; } .modal-title { font-size: 18px; font-weight: 700; color: var(--gray-800); display: flex; align-items: center; gap: 10px; } .modal-close { width: 32px; height: 32px; border: none; background: var(--gray-100); border-radius: var(--radius); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; color: var(--gray-600); } .modal-close:hover { background: var(--gray-200); color: var(--gray-800); } .modal-body { padding: 24px; } .modal-footer { padding: 16px 24px; border-top: 1px solid var(--gray-200); display: flex; gap: 12px; justify-content: flex-end; } .modal-btn { padding: 10px 20px; font-size: 14px; font-weight: 600; border-radius: var(--radius); border: none; cursor: pointer; transition: all 0.2s ease; } .modal-btn.primary { background: var(--primary); color: var(--white); } .modal-btn.primary:hover { background: var(--primary-dark); } .modal-btn.secondary { background: var(--white); color: var(--gray-700); border: 1px solid var(--gray-300); } .modal-btn.secondary:hover { background: var(--gray-50); } /* Verification Code Inputs */ .verification-code-inputs { display: flex; gap: 12px; justify-content: center; margin: 24px 0; } .verification-code-input { width: 50px; height: 60px; font-size: 24px; font-weight: 700; text-align: center; border: 2px solid var(--gray-300); border-radius: var(--radius-md); transition: all 0.2s ease; } .verification-code-input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px var(--primary-subtle); } .verification-code-input.filled { border-color: var(--primary); background: var(--primary-subtle); } .verification-info { text-align: center; color: var(--gray-600); font-size: 13px; margin-top: 16px; } .verification-info a { color: var(--primary); text-decoration: none; font-weight: 600; } .verification-info a:hover { text-decoration: underline; } .resend-timer { text-align: center; color: var(--gray-500); font-size: 12px; margin-top: 12px; } .resend-timer.disabled { color: var(--gray-400); } .btn-submit { width: 100%; padding: 14px 24px; font-size: 14px; font-weight: 600; color: var(--white); background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); border: none; border-radius: var(--radius); cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px; } .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 10px 20px -5px rgba(37, 99, 235, 0.4); } </style> <script> // Global Modal Functions let modalCallback = null; let resendTimerInterval; function showModal(type, title, message, callback = null) { const overlay = document.getElementById('modalOverlay'); const modalTitle = document.getElementById('modalTitle'); const modalMessage = document.getElementById('modalMessage'); const modalFooter = document.getElementById('modalFooter'); const confirmBtn = document.getElementById('modalConfirmBtn'); modalCallback = callback; // Set content modalTitle.querySelector('span').textContent = title; modalMessage.textContent = message; // Show/hide buttons based on type if (type === 'alert') { modalFooter.innerHTML = '<button class="modal-btn primary" onclick="closeModal()">OK</button>'; } else if (type === 'confirm') { modalFooter.innerHTML = ` <button class="modal-btn secondary" onclick="closeModal()">Annuler</button> <button class="modal-btn primary" onclick="confirmAction()">Confirmer</button> `; } overlay.classList.add('active'); overlay.style.display = 'flex'; } function closeModal() { const overlay = document.getElementById('modalOverlay'); overlay.classList.remove('active'); setTimeout(() => { overlay.style.display = 'none'; }, 300); modalCallback = null; } function confirmAction() { if (modalCallback) { modalCallback(); } closeModal(); } // Verification Modal Functions function openVerificationModal(email) { document.getElementById('verificationEmail').textContent = email; document.getElementById('verificationEmailInput').value = email; document.getElementById('verificationModal').classList.add('active'); setTimeout(() => { document.querySelector('.verification-code-input').focus(); }, 300); startResendTimer(); } function closeVerificationModal() { document.getElementById('verificationModal').classList.remove('active'); } // Verification Code Inputs document.querySelectorAll('.verification-code-input').forEach((input, index, inputs) => { input.addEventListener('input', function() { if (this.value.length === 1) { this.classList.add('filled'); if (index < inputs.length - 1) { inputs[index + 1].focus(); } } updateVerificationCode(); }); input.addEventListener('keydown', function(e) { if (e.key === 'Backspace' && this.value === '' && index > 0) { inputs[index - 1].focus(); inputs[index - 1].value = ''; inputs[index - 1].classList.remove('filled'); updateVerificationCode(); } }); }); function updateVerificationCode() { let code = ''; document.querySelectorAll('.verification-code-input').forEach(input => { code += input.value; }); document.getElementById('verificationCodeInput').value = code; } function startResendTimer() { const timerElement = document.getElementById('resendTimer'); const timerCount = document.getElementById('timerCount'); const resendLink = document.getElementById('resendCode'); let seconds = 60; timerElement.classList.remove('disabled'); resendLink.style.pointerEvents = 'none'; resendLink.style.opacity = '0.5'; clearInterval(resendTimerInterval); resendTimerInterval = setInterval(() => { seconds--; timerCount.textContent = seconds; if (seconds <= 0) { clearInterval(resendTimerInterval); timerElement.classList.add('disabled'); resendLink.style.pointerEvents = 'auto'; resendLink.style.opacity = '1'; } }, 1000); } function resendVerificationCode(e) { e.preventDefault(); const email = document.getElementById('verificationEmailDisplay').textContent; fetch('{{ route("verification.code.resend") }}', { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-CSRF-TOKEN': '{{ csrf_token() }}' }, body: JSON.stringify({ email: email }) }) .then(response => response.json()) .then(data => { if (data.success) { alert('Un nouveau code a été envoyé à votre adresse email.'); startResendTimer(); } else { alert('Une erreur est survenue. Veuillez réessayer.'); } }) .catch(error => { alert('Une erreur est survenue. Veuillez réessayer.'); }); } // Close modals on overlay click document.querySelectorAll('.modal-overlay').forEach(overlay => { overlay.addEventListener('click', function(e) { if (e.target === this) { this.classList.remove('active'); } }); }); // Close modals on Escape key document.addEventListener('keydown', function(e) { if (e.key === 'Escape') { closeModal(); closeVerificationModal(); } }); // Make functions globally available window.showModal = showModal; window.closeModal = closeModal; window.openVerificationModal = openVerificationModal; window.closeVerificationModal = closeVerificationModal; window.resendVerificationCode = resendVerificationCode; </script>

File: resources/views/components/nav-link.blade.php
---
@props(['active']) @php $classes = ($active ?? false) ? 'inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out' : 'inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out'; @endphp <a {{ $attributes->merge(['class' => $classes]) }}> {{ $slot }} </a>

File: resources/views/components/new-entry-button.blade.php
---
<?php namespace App\View\Components; use Illuminate\View\Component; use Illuminate\Support\Str; class NewEntryButton extends Component { public $route; public $label; /** * Create a new component instance. * * @param string $route La route vers le formulaire de création * @param string|null $label Le texte du bouton (optionnel) */ public function __construct($route, $label = null) { $this->route = $route; // Si aucun label n’est fourni, on le génère automatiquement if ($label) { $this->label = $label; } else { // On récupère le nom de l’entité à partir de la route $parts = explode('.', $route); // ex: males.create → ['males','create'] $entity = Str::ucfirst(Str::singular($parts[0])); // 'Males' → 'Male' $this->label = "Nouvelle $entity"; } } public function render() { return view('components.new-entry-button'); } }

File: resources/views/components/primary-button.blade.php
---
<button {{ $attributes->merge(['type' => 'submit', 'class' => 'inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150']) }}> {{ $slot }} </button>

File: resources/views/components/responsive-nav-link.blade.php
---
@props(['active']) @php $classes = ($active ?? false) ? 'block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out' : 'block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out'; @endphp <a {{ $attributes->merge(['class' => $classes]) }}> {{ $slot }} </a>

File: resources/views/components/secondary-button.blade.php
---
<button {{ $attributes->merge(['type' => 'button', 'class' => 'inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150']) }}> {{ $slot }} </button>

File: resources/views/components/text-input.blade.php
---
@props(['disabled' => false]) <input @disabled($disabled) {{ $attributes->merge(['class' => 'border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm']) }}>

File: resources/views/dashboard.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Tableau de Bord - CuniApp Élevage') @section('content') <style> /* Dashboard Specific Styles */ .dash-header { background: var(--surface); border-radius: var(--radius-xl); border: 1px solid var(--surface-border); box-shadow: var(--shadow); margin-bottom: 24px; overflow: hidden; } .header-wrapper-dash { display: flex; justify-content: space-between; align-items: center; padding: 24px; border-bottom: 1px solid var(--surface-border); flex-wrap: wrap; gap: 16px; background: linear-gradient(135deg, var(--primary-subtle) 0%, var(--surface) 100%); } .brand-identity-dash { display: flex; align-items: center; gap: 16px; } .cuniapp-logo-dash { width: 52px; height: 52px; background: linear-gradient(135deg, var(--primary) 0%, var(--accent-cyan) 100%); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-md); } .cuniapp-logo-dash svg { width: 32px; height: 32px; } .brand-text-dash h1 { font-size: 22px; font-weight: 700; color: var(--gray-800); letter-spacing: -0.02em; } .brand-text-dash .subtitle-accent { font-weight: 500; color: var(--text-secondary); } .brand-tagline-dash { font-size: 13px; color: var(--text-secondary); margin-top: 4px; } .header-controls { display: flex; gap: 10px; flex-wrap: wrap; } .ctrl-btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 18px; font-size: 14px; font-weight: 500; border-radius: var(--radius); cursor: pointer; text-decoration: none; transition: all 0.2s ease; font-family: inherit; } .ctrl-btn.primary { background: var(--primary); color: var(--white); box-shadow: var(--shadow-sm); } .ctrl-btn.primary:hover { background: var(--primary-dark); transform: translateY(-1px); box-shadow: var(--shadow); } .ctrl-btn.secondary { background: var(--white); color: var(--text-primary); border: 1px solid var(--surface-border); } .ctrl-btn.secondary:hover { background: var(--gray-50); border-color: var(--gray-300); } .ctrl-btn svg { width: 18px; height: 18px; } /* Metrics Grid */ .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; padding: 24px; } .metric-card { background: var(--surface); border-radius: var(--radius-lg); padding: 20px; display: flex; align-items: flex-start; gap: 16px; border: 1px solid var(--surface-border); transition: all 0.2s ease; position: relative; } .metric-card:hover { border-color: var(--primary); box-shadow: var(--shadow-md); transform: translateY(-2px); } .metric-icon { width: 48px; height: 48px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; flex-shrink: 0; } .metric-card.primary .metric-icon { background: var(--primary-subtle); color: var(--primary); } .metric-card.blue .metric-icon { background: rgba(59, 130, 246, 0.1); color: #3B82F6; } .metric-card.pink .metric-icon { background: rgba(236, 72, 153, 0.1); color: var(--accent-pink); } .metric-card.purple .metric-icon { background: rgba(139, 92, 246, 0.1); color: var(--accent-purple); } .metric-card.green .metric-icon { background: rgba(16, 185, 129, 0.1); color: var(--accent-green); } .metric-card.orange .metric-icon { background: rgba(245, 158, 11, 0.1); color: var(--accent-orange); } .metric-icon svg { width: 24px; height: 24px; } .metric-value { font-size: 28px; font-weight: 700; line-height: 1.2; color: var(--gray-800); letter-spacing: -0.02em; } .metric-label { font-size: 13px; color: var(--text-secondary); font-weight: 500; margin-bottom: 4px; } .metric-trend { font-size: 12px; display: flex; align-items: center; gap: 4px; font-weight: 600; } .metric-trend.up { color: var(--accent-green); } .metric-trend.down { color: var(--accent-red); } .metric-trend.neutral { color: var(--text-tertiary); } /* Main Grid */ .main-grid { display: grid; grid-template-columns: 1fr 380px; gap: 24px; } /* Section Blocks */ .section-block { background: var(--surface); border-radius: var(--radius-lg); padding: 24px; margin-bottom: 24px; border: 1px solid var(--surface-border); box-shadow: var(--shadow); } .section-title { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--surface-border); } .section-title h2 { font-size: 18px; font-weight: 600; color: var(--gray-800); letter-spacing: -0.01em; } /* Performance Grid */ .performance-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; } .perf-card { background: var(--surface-alt); border-radius: var(--radius-lg); padding: 20px; border: 1px solid var(--surface-border); transition: all 0.2s ease; } .perf-card:hover { border-color: var(--primary); box-shadow: var(--shadow-md); } .card-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .card-label { font-size: 13px; color: var(--text-secondary); font-weight: 500; } .card-badge { width: 36px; height: 36px; border-radius: var(--radius); display: flex; align-items: center; justify-content: center; } .card-badge.blue { background: rgba(59, 130, 246, 0.1); color: #3B82F6; } .card-badge.pink { background: rgba(236, 72, 153, 0.1); color: var(--accent-pink); } .card-badge.purple { background: rgba(139, 92, 246, 0.1); color: var(--accent-purple); } .card-badge.green { background: rgba(16, 185, 129, 0.1); color: var(--accent-green); } .card-badge svg { width: 18px; height: 18px; } .card-number { font-size: 32px; font-weight: 700; margin-bottom: 12px; color: var(--gray-800); letter-spacing: -0.02em; } .progress-track { height: 6px; background: var(--gray-200); border-radius: 3px; overflow: hidden; margin-bottom: 12px; } .progress-bar { height: 100%; border-radius: 3px; transition: width 1s ease; } .progress-bar.blue { background: #3B82F6; } .progress-bar.pink { background: var(--accent-pink); } .progress-bar.purple { background: var(--accent-purple); } .progress-bar.green { background: var(--accent-green); } .card-footer { display: flex; justify-content: space-between; align-items: center; } .progress-label { font-size: 12px; color: var(--text-tertiary); } .trend-badge { font-size: 12px; font-weight: 600; color: var(--accent-green); } /* Actions Grid */ .actions-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 14px; } .action-tile { background: var(--surface-alt); border-radius: var(--radius-lg); padding: 20px; text-decoration: none; color: var(--text-primary); border: 1px solid var(--surface-border); transition: all 0.2s ease; display: flex; flex-direction: column; } .action-tile:hover { border-color: var(--primary); box-shadow: var(--shadow-md); transform: translateY(-2px); } .tile-icon { width: 44px; height: 44px; border-radius: var(--radius); display: flex; align-items: center; justify-content: center; margin-bottom: 14px; } .action-tile.blue .tile-icon { background: rgba(59, 130, 246, 0.1); color: #3B82F6; } .action-tile.pink .tile-icon { background: rgba(236, 72, 153, 0.1); color: var(--accent-pink); } .action-tile.purple .tile-icon { background: rgba(139, 92, 246, 0.1); color: var(--accent-purple); } .action-tile.green .tile-icon { background: rgba(16, 185, 129, 0.1); color: var(--accent-green); } .tile-icon svg { width: 22px; height: 22px; } .action-tile h3 { font-size: 15px; font-weight: 600; margin-bottom: 4px; color: var(--gray-800); } .action-tile p { font-size: 12px; color: var(--text-secondary); margin-bottom: 12px; } .tile-arrow { margin-top: auto; font-size: 18px; color: var(--primary); transition: transform 0.2s; } .action-tile:hover .tile-arrow { transform: translateX(4px); } /* Widgets */ .widget { background: var(--surface); border-radius: var(--radius-lg); padding: 20px; margin-bottom: 20px; border: 1px solid var(--surface-border); box-shadow: var(--shadow); } .widget-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--surface-border); } .widget-head h3 { font-size: 15px; font-weight: 600; color: var(--gray-800); } .text-link { background: none; border: none; color: var(--primary); font-size: 12px; cursor: pointer; font-weight: 500; transition: color 0.2s; } .text-link:hover { color: var(--primary-dark); } /* Calendar */ .calendar-controls { display: flex; align-items: center; gap: 8px; } .cal-btn { width: 30px; height: 30px; border: 1px solid var(--surface-border); background: var(--white); color: var(--text-primary); border-radius: var(--radius); font-size: 16px; cursor: pointer; transition: all 0.2s; } .cal-btn:hover { background: var(--gray-50); border-color: var(--gray-300); } .cal-month { font-size: 13px; font-weight: 600; min-width: 110px; text-align: center; color: var(--gray-800); } .calendar-body { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; margin-bottom: 16px; } .cal-day { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-size: 12px; border-radius: var(--radius); cursor: pointer; transition: all 0.2s; position: relative; font-weight: 500; color: var(--text-primary); } .cal-day.header { color: var(--text-tertiary); font-size: 11px; cursor: default; font-weight: 600; } .cal-day:not(.header):hover { background: var(--gray-100); } .cal-day.today { background: var(--primary); color: var(--white); } .cal-day.event::after { content: ''; position: absolute; bottom: 4px; width: 4px; height: 4px; border-radius: 50%; } .cal-day.event.purple::after { background: var(--accent-purple); } .cal-day.event.green::after { background: var(--accent-green); } .calendar-legend { display: flex; flex-direction: column; gap: 8px; } .legend-row { display: flex; align-items: center; gap: 8px; font-size: 11px; color: var(--text-secondary); } .legend-dot { width: 8px; height: 8px; border-radius: 50%; } .legend-dot.purple { background: var(--accent-purple); } .legend-dot.green { background: var(--accent-green); } /* Timeline */ .timeline { display: flex; flex-direction: column; gap: 16px; } .timeline-item { display: flex; gap: 12px; position: relative; } .timeline-item:not(:last-child)::before { content: ''; position: absolute; left: 5px; top: 20px; width: 1px; height: calc(100% + 4px); background: var(--gray-200); } .timeline-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; margin-top: 5px; } .timeline-dot.green { background: var(--accent-green); } .timeline-dot.purple { background: var(--accent-purple); } .timeline-dot.orange { background: var(--accent-orange); } .timeline-dot.blue { background: #3B82F6; } .timeline-title { font-size: 13px; font-weight: 600; margin-bottom: 3px; color: var(--gray-800); } .timeline-desc { font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; } .timeline-time { font-size: 11px; color: var(--text-tertiary); } /* Alerts - FIXED: Real notifications from database */ .alert-badge { background: var(--accent-orange); color: var(--white); font-size: 11px; font-weight: 600; padding: 3px 8px; border-radius: 10px; } .alerts-list { display: flex; flex-direction: column; gap: 10px; } .alert-row { display: flex; align-items: center; gap: 10px; padding: 12px; background: var(--surface-alt); border-radius: var(--radius); border-left: 3px solid; transition: all 0.2s; cursor: pointer; } .alert-row:hover { background: var(--gray-100); transform: translateX(4px); } .alert-row.high { border-left-color: var(--accent-orange); } .alert-row.medium { border-left-color: var(--accent-cyan); } .alert-row.low { border-left-color: #3B82F6; } .alert-indicator { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; } .alert-row.high .alert-indicator { background: var(--accent-orange); } .alert-row.medium .alert-indicator { background: var(--accent-cyan); } .alert-row.low .alert-indicator { background: #3B82F6; } .alert-title { font-size: 13px; font-weight: 600; margin-bottom: 2px; color: var(--gray-800); display: flex; align-items: center; gap: 6px; } .alert-time { font-size: 11px; color: var(--text-tertiary); } /* Responsive */ @media (max-width: 1200px) { .main-grid { grid-template-columns: 1fr; } } @media (max-width: 768px) { .header-wrapper-dash { flex-direction: column; align-items: flex-start; } .metrics-grid { grid-template-columns: repeat(2, 1fr); } .performance-grid, .actions-grid { grid-template-columns: 1fr; } } @media (max-width: 480px) { .metric-value { font-size: 24px; } .card-number { font-size: 28px; } .metrics-grid { grid-template-columns: 1fr; } } /* Dashboard - Fixed button styling */ .theme-dark .nav-link { color: var(--text-secondary); border-color: transparent; background: transparent !important; } .theme-dark .nav-link.active { background: var(--primary-subtle) !important; color: var(--primary) !important; border-color: var(--primary) !important; } /* Calendar - Fixed navigation buttons */ .theme-dark .cal-btn { background: var(--surface-elevated); color: var(--text-primary); border-color: var(--surface-border); } .theme-dark .cal-btn:hover { background: var(--hover-subtle); border-color: var(--gray-400); color: var(--primary); } </style> <div class="cuniapp-dashboard"> <!-- Header Section --> <header class="dash-header"> <div class="header-wrapper-dash"> <div class="brand-identity-dash"> <div class="cuniapp-logo-dash"> <svg viewBox="0 0 40 40" fill="none"> <path d="M20 5L35 15V25L20 35L5 25V15L20 5Z" fill="white" /> <path d="M20 12L28 17V23L20 28L12 23V17L20 12Z" fill="rgba(255,255,255,0.8)" /> </svg> </div> <div class="brand-text-dash"> <h1>CuniApp <span class="subtitle-accent">Élevage</span></h1> <p class="brand-tagline-dash">Gestion intelligente de votre cheptel</p> </div> </div> <div class="header-controls"> <a href="{{ route('settings.index') }}" class="ctrl-btn secondary"> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <circle cx="12" cy="12" r="3" /> <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" /> </svg> Paramètres </a> <a href="{{ route('lapins.create') }}" class="ctrl-btn primary"> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <path d="M12 5v14M5 12h14" /> </svg> Nouvelle entrée </a> </div> </div> <div class="metrics-grid"> @php $metricsData = [ [ 'icon' => 'total', 'value' => $nbMales + $nbFemelles, 'label' => 'Total Lapins', 'type' => 'primary', 'change' => '+8.2%', 'trend' => 'up', 'route' => 'lapins.index', ], [ 'icon' => 'male', 'value' => $nbMales, 'label' => 'Mâles', 'type' => 'blue', 'change' => '+5.1%', 'trend' => 'up', 'route' => 'males.index', ], [ 'icon' => 'female', 'value' => $nbFemelles, 'label' => 'Femelles', 'type' => 'pink', 'change' => '+12%', 'trend' => 'up', 'route' => 'femelles.index', ], [ 'icon' => 'breed', 'value' => $nbSaillies, 'label' => 'Saillies', 'type' => 'purple', 'change' => '-3.1%', 'trend' => 'down', 'route' => 'saillies.index', ], [ 'icon' => 'birth', 'value' => $nbMisesBas, 'label' => 'Portées', 'type' => 'green', 'change' => '+15%', 'trend' => 'up', 'route' => 'mises-bas.index', ], [ 'icon' => 'alert', 'value' => 3, 'label' => 'Alertes', 'type' => 'orange', 'change' => '0%', 'trend' => 'neutral', 'route' => '', ], [ 'icon' => 'sales', 'value' => number_format($totalRevenue, 0, ',', ' '), 'label' => 'CA Total', 'type' => 'purple', 'change' => '+12%', 'trend' => 'up', 'route' => 'sales.index', ], ]; @endphp @foreach ($metricsData as $metric) <a href="{{ Route::has($metric['route']) ? route($metric['route']) : '#' }}"> <div class="metric-card {{ $metric['type'] }}" data-trend="{{ $metric['trend'] }}"> <div class="metric-icon"> @if ($metric['icon'] === 'total') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <circle cx="9" cy="7" r="4" /> <path d="M3 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" /> <circle cx="17" cy="7" r="2" /> <path d="M23 21v-2a4 4 0 0 0-3-3.87" /> </svg> @elseif($metric['icon'] === 'male') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <circle cx="10" cy="14" r="6" /> <path d="M16 8h6V2M22 2l-8.5 8.5" /> </svg> @elseif($metric['icon'] === 'female') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <circle cx="12" cy="8" r="6" /> <path d="M12 14v8M9 19h6" /> </svg> @elseif($metric['icon'] === 'breed') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" /> </svg> @elseif($metric['icon'] === 'birth') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /> </svg> @else <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" /> <line x1="12" y1="9" x2="12" y2="13" /> <line x1="12" y1="17" x2="12.01" y2="17" /> </svg> @endif </div> <div class="metric-data"> <div class="metric-value">{{ $metric['value'] }}</div> <div class="metric-label">{{ $metric['label'] }}</div> <div class="metric-trend {{ $metric['trend'] }}"> <span class="trend-arrow">{{ $metric['trend'] === 'up' ? '↗' : ($metric['trend'] === 'down' ? '↘' : '→') }}</span> {{ $metric['change'] }} </div> </div> </div> </a> @endforeach </div> </header> <!-- Main Grid --> <div class="main-grid"> <!-- Left Column --> <div class="primary-col"> <!-- Performance Overview --> <div class="section-block"> <div class="section-title"> <h2>Performance</h2> </div> <div class="performance-grid"> @php $perfCards = [ [ 'type' => 'blue', 'icon' => 'male', 'value' => $nbMales, 'title' => 'Mâles Reproducteurs', 'progress' => 75, 'trend' => '+12%', ], [ 'type' => 'pink', 'icon' => 'female', 'value' => $nbFemelles, 'title' => 'Femelles Reproductrices', 'progress' => 85, 'trend' => '+8%', ], [ 'type' => 'purple', 'icon' => 'breed', 'value' => $nbSaillies, 'title' => 'Saillies en Cours', 'progress' => 60, 'trend' => '-3%', ], [ 'type' => 'green', 'icon' => 'birth', 'value' => $nbMisesBas, 'title' => 'Mises Bas Récentes', 'progress' => 90, 'trend' => '+15%', ], ]; @endphp @foreach ($perfCards as $card) <div class="perf-card {{ $card['type'] }}"> <div class="card-top"> <span class="card-label">{{ $card['title'] }}</span> <div class="card-badge {{ $card['type'] }}"> @if ($card['icon'] === 'male') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <circle cx="10" cy="14" r="6" /> <path d="M16 8h6V2M22 2l-8.5 8.5" /> </svg> @elseif($card['icon'] === 'female') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <circle cx="12" cy="8" r="6" /> <path d="M12 14v8M9 19h6" /> </svg> @elseif($card['icon'] === 'breed') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" /> </svg> @else <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /> </svg> @endif </div> </div> <div class="card-number">{{ $card['value'] }}</div> <div class="progress-track"> <div class="progress-bar {{ $card['type'] }}" style="width: {{ $card['progress'] }}%"> </div> </div> <div class="card-footer"> <span class="progress-label">{{ $card['progress'] }}% objectif</span> <span class="trend-badge">{{ $card['trend'] }}</span> </div> </div> @endforeach </div> </div> <!-- Quick Actions --> <div class="section-block"> <div class="section-title"> <h2>Actions Rapides</h2> </div> <div class="actions-grid"> @foreach ([['url' => route('males.index'), 'icon' => 'male', 'title' => 'Gérer Mâles', 'desc' => 'Consulter et modifier', 'color' => 'blue'], ['url' => route('femelles.index'), 'icon' => 'female', 'title' => 'Gérer Femelles', 'desc' => 'Suivi reproduction', 'color' => 'pink'], ['url' => route('saillies.index'), 'icon' => 'breed', 'title' => 'Planifier Saillie', 'desc' => 'Nouveau croisement', 'color' => 'purple']] as $action) <a href="{{ $action['url'] }}" class="action-tile {{ $action['color'] }}"> <div class="tile-icon"> @if ($action['icon'] === 'male') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <circle cx="10" cy="14" r="6" /> <path d="M16 8h6V2M22 2l-8.5 8.5" /> </svg> @elseif($action['icon'] === 'female') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <circle cx="12" cy="8" r="6" /> <path d="M12 14v8M9 19h6" /> </svg> @elseif($action['icon'] === 'breed') <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" /> </svg> @else <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /> </svg> @endif </div> <h3>{{ $action['title'] }}</h3> <p>{{ $action['desc'] }}</p> <div class="tile-arrow">→</div> </a> @endforeach </div> </div> </div> <!-- Right Column --> <div class="sidebar-col"> <!-- Calendar --> <div class="widget calendar-widget"> <div class="widget-head"> <h3>Calendrier</h3> <div class="calendar-controls"> <button class="cal-btn" id="prevMonth">‹</button> <span class="cal-month" id="currentMonth">Février 2026</span> <button class="cal-btn" id="nextMonth">›</button> </div> </div> <div class="calendar-body" id="calendarGrid"></div> <div class="calendar-legend"> <div class="legend-row"> <span class="legend-dot purple"></span> <span>Saillies</span> </div> <div class="legend-row"> <span class="legend-dot green"></span> <span>Naissances</span> </div> </div> </div> <!-- Activity Timeline --> <div class="widget activity-widget"> <div class="widget-head"> <h3>Activité</h3> <button class="text-link">Tout voir</button> </div> <div class="timeline"> @foreach ([['type' => 'green', 'title' => 'Mise bas enregistrée', 'desc' => 'Femelle #245 - 6 lapereaux', 'time' => 'Il y a 2h'], ['type' => 'purple', 'title' => 'Saillie programmée', 'desc' => 'F#245 × M#112', 'time' => 'Hier 15:30'], ['type' => 'orange', 'title' => 'Vaccination requise', 'desc' => '3 lapins concernés', 'time' => '23 août'], ['type' => 'blue', 'title' => 'Rapport généré', 'desc' => 'Stats mensuelles', 'time' => '20 août']] as $item) <div class="timeline-item"> <div class="timeline-dot {{ $item['type'] }}"></div> <div class="timeline-content"> <div class="timeline-title">{{ $item['title'] }}</div> <div class="timeline-desc">{{ $item['desc'] }}</div> <div class="timeline-time">{{ $item['time'] }}</div> </div> </div> @endforeach </div> </div> <!-- Notifications Widget - FIXED: Real notifications from database --> <!-- Replace the entire alerts-widget section with this --> <div class="widget alerts-widget"> <div class="widget-head"> <h3>Notifications</h3> <a href="{{ route('notifications.index') }}" class="text-link flex items-center gap-1"> Voir tout <i class="bi bi-arrow-right"></i> </a> </div> <div class="alerts-list"> @php $recentNotifs = \App\Models\Notification::where('user_id', auth()->id()) ->where('is_read', false) ->orderBy('created_at', 'desc') ->limit(5) ->get(); @endphp @forelse($recentNotifs as $notif) <!-- FIXED: Clicking notification marks as read AND redirects --> <a href="{{ route('notifications.read', $notif->id) }}" class="alert-row {{ $notif->type }}"> <div class="alert-indicator"></div> <div class="alert-text"> <div class="alert-title flex items-center gap-2"> <i class="bi {{ $notif->icon }} text-sm"></i> {{ $notif->title }} </div> <div class="alert-time">{{ $notif->created_at->diffForHumans() }}</div> </div> @if (!$notif->is_read) <span class="badge" style="background: rgba(239, 68, 68, 0.1); color: #EF4444; font-size: 11px; padding: 2px 8px;"> Nouveau </span> @endif </a> @empty <div class="text-center py-4 text-gray-500"> <i class="bi bi-bell-slash text-2xl mb-2 opacity-50"></i> <p>Aucune notification non lue</p> </div> @endforelse </div> </div> </div> </div> </div> <script> document.addEventListener('DOMContentLoaded', function() { const calendarGrid = document.getElementById('calendarGrid'); const currentMonthSpan = document.getElementById('currentMonth'); const prevMonthBtn = document.getElementById('prevMonth'); const nextMonthBtn = document.getElementById('nextMonth'); let currentDate = new Date(); const months = [ 'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre' ]; const weekdays = ['L', 'M', 'M', 'J', 'V', 'S', 'D']; function renderCalendar(date) { calendarGrid.innerHTML = ''; // Weekday headers weekdays.forEach(day => { const dayEl = document.createElement('div'); dayEl.className = 'cal-day header'; dayEl.textContent = day; calendarGrid.appendChild(dayEl); }); const year = date.getFullYear(); const month = date.getMonth(); const firstDay = new Date(year, month, 1).getDay(); const daysInMonth = new Date(year, month + 1, 0).getDate(); const today = new Date(); const startDay = firstDay === 0 ? 6 : firstDay - 1; currentMonthSpan.textContent = `${months[month]} ${year}`; // Empty cells before first day for (let i = 0; i < startDay; i++) { calendarGrid.appendChild(document.createElement('div')); } // Days of month for (let day = 1; day <= daysInMonth; day++) { const dayEl = document.createElement('div'); dayEl.className = 'cal-day'; dayEl.textContent = day; // Today highlight if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) { dayEl.classList.add('today'); } // Event markers (demo data) if ([5, 12, 18].includes(day)) { dayEl.classList.add('event', 'purple'); } if ([8, 15, 22].includes(day)) { dayEl.classList.add('event', 'green'); } calendarGrid.appendChild(dayEl); } } prevMonthBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() - 1); renderCalendar(currentDate); }); nextMonthBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() + 1); renderCalendar(currentDate); }); renderCalendar(currentDate); // Animate progress bars setTimeout(() => { document.querySelectorAll('.progress-bar').forEach(bar => { const width = bar.style.width; bar.style.width = '0%'; setTimeout(() => { bar.style.width = width; }, 100); }); }, 500); // Add staggered fade-in animation const elements = document.querySelectorAll('.metric-card, .perf-card, .action-tile, .widget'); elements.forEach((el, index) => { el.style.opacity = '0'; el.style.transform = 'translateY(10px)'; setTimeout(() => { el.style.transition = 'all 0.4s ease'; el.style.opacity = '1'; el.style.transform = 'translateY(0)'; }, index * 50); }); }); </script> @endsection

File: resources/views/emails/notification.blade.php
---
<!DOCTYPE html> <html lang="fr"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Nouvelle Notification - CuniApp Élevage</title> <style> /* Same professional email styling as verification email */ /* Add notification-specific styles with colored header based on type */ .notification-header { border-left: 4px solid {{ $color }}; padding-left: 16px; } .notification-icon { font-size: 28px; color: {{ $color }}; } </style> </head> <body> <div class="email-container"> <div class="email-header"> <div class="logo">...</div> <h1>CuniApp Élevage</h1> <p>Gestion intelligente de votre cheptel</p> </div> <div class="email-body"> <p class="greeting">Bonjour,</p> <div class="notification-card"> <div class="notification-header"> <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;"> <i class="bi {{ $notification->icon }} notification-icon"></i> <h2 style="color: #1f2937; margin: 0; font-size: 20px;">{{ $notification->title }}</h2> </div> <p style="color: #4b5563; line-height: 1.6; margin-bottom: 24px;">{{ $notification->message }}</p> @if($notification->action_url) <div class="button-container"> <a href="{{ $notification->action_url }}" class="cta-button"> Voir les détails </a> </div> @endif <div style="background: #f9fafb; border-radius: 8px; padding: 16px; margin-top: 24px; font-size: 13px; color: #6b7280;"> <p style="margin: 0; display: flex; align-items: center; gap: 8px;"> <i class="bi bi-clock-history"></i> <span>Cette notification a été générée le {{ $notification->created_at->format('d/m/Y à H:i') }}</span> </p> </div> </div> </div> <p class="message">Vous recevez cet email car vous avez activé les notifications par email dans vos paramètres CuniApp.</p> </div> <div class="footer">...</div> </div> </body> </html>

File: resources/views/emails/verification-code.blade.php
---
<!DOCTYPE html> <html lang="fr"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Vérification Email - CuniApp Élevage</title> <style> * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: #f3f4f6; line-height: 1.6; } .email-container { max-width: 600px; margin: 40px auto; background: #ffffff; border-radius: 16px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.1); } .email-header { background: linear-gradient(135deg, #2563EB 0%, #06B6D4 100%); padding: 40px 30px; text-align: center; } .logo { width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 12px; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 16px; } .logo svg { width: 36px; height: 36px; } .email-header h1 { color: #ffffff; font-size: 24px; font-weight: 700; margin-bottom: 8px; } .email-header p { color: rgba(255,255,255,0.9); font-size: 14px; } .email-body { padding: 40px 30px; } .greeting { font-size: 18px; color: #1f2937; margin-bottom: 16px; font-weight: 600; } .message { color: #4b5563; font-size: 15px; margin-bottom: 24px; line-height: 1.7; } .code-container { background: #eff6ff; border: 2px dashed #2563eb; border-radius: 12px; padding: 24px; text-align: center; margin: 32px 0; } .code-label { color: #6b7280; font-size: 13px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; font-weight: 600; } .verification-code { font-size: 36px; font-weight: 700; color: #2563eb; letter-spacing: 8px; font-family: 'JetBrains Mono', monospace; } .expiry-info { color: #f59e0b; font-size: 13px; margin-top: 12px; font-weight: 500; } .info-box { background: #f9fafb; border-left: 4px solid #2563eb; padding: 16px; border-radius: 8px; margin: 24px 0; } .info-box p { color: #6b7280; font-size: 13px; line-height: 1.6; } .info-box strong { color: #1f2937; } .button-container { text-align: center; margin: 32px 0; } .cta-button { display: inline-block; background: linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%); color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-weight: 600; font-size: 14px; transition: all 0.3s ease; } .footer { background: #f9fafb; padding: 24px 30px; text-align: center; border-top: 1px solid #e5e7eb; } .footer p { color: #9ca3af; font-size: 12px; margin-bottom: 8px; } .footer a { color: #2563eb; text-decoration: none; } .social-links { margin-top: 16px; } .social-links a { display: inline-block; margin: 0 8px; color: #6b7280; text-decoration: none; font-size: 18px; } </style> </head> <body> <div class="email-container"> <!-- Header --> <div class="email-header"> <div class="logo"> <svg viewBox="0 0 40 40" fill="none"> <path d="M20 5L35 15V25L20 35L5 25V15L20 5Z" fill="white"/> <path d="M20 12L28 17V23L20 28L12 23V17L20 12Z" fill="rgba(255,255,255,0.8)"/> </svg> </div> <h1>CuniApp Élevage</h1> <p>Gestion intelligente de votre cheptel</p> </div> <!-- Body --> <div class="email-body"> <p class="greeting">Bonjour,</p> <p class="message"> Merci de vous être inscrit sur <strong>CuniApp Élevage</strong> ! Pour finaliser votre inscription et activer votre compte, veuillez utiliser le code de vérification ci-dessous. </p> <!-- Verification Code --> <div class="code-container"> <div class="code-label">Votre code de vérification</div> <div class="verification-code">{{ $code }}</div> <div class="expiry-info">⏱️ Ce code expire dans 10 minutes</div> </div> <!-- Info Box --> <div class="info-box"> <p> <strong>💡 Conseil :</strong> Pour des raisons de sécurité, ne partagez jamais ce code avec qui que ce soit. Notre équipe ne vous demandera jamais votre code de vérification. </p> </div> <!-- Alternative Action - ✅ FIXED: Simple link to welcome page --> <div class="button-container"> <p style="color: #6b7280; font-size: 13px; margin-bottom: 16px;"> Ou retournez sur la page d'accueil pour saisir votre code </p> <a href="{{ route('welcome') }}" class="cta-button"> Retour à la vérification </a> </div> <p class="message"> Si vous n'avez pas demandé ce code, vous pouvez ignorer cet email en toute sécurité. </p> </div> <!-- Footer --> <div class="footer"> <p>&copy; {{ date('Y') }} CuniApp Élevage - Tous droits réservés</p> <p> <a href="{{ config('app.url') }}">Visiter notre site</a> • <a href="{{ route('welcome') }}">Se connecter</a> • <a href="mailto:{{ config('mail.from.address') }}">Contact</a> </p> <div class="social-links"> <a href="#">📘</a> <a href="#">🐦</a> <a href="#">📸</a> <a href="#">💼</a> </div> </div> </div> </body> </html>

File: resources/views/femelles/create.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Nouvelle Femelle - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-plus-circle"></i> Nouvelle Femelle </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('femelles.index') }}">Femelles</a> <span>/</span> <span>Nouveau</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-info-circle"></i> Informations de la Femelle </h3> </div> <div class="card-body"> <form action="{{ route('femelles.store') }}" method="POST" id="femelleForm"> @csrf <div class="settings-grid"> <div class="form-group"> <label class="form-label">Code *</label> <div class="code-generator"> <input type="text" name="code" id="codeInput" class="form-control @error('code') is-invalid @enderror" value="{{ old('code', $suggestedCode) }}" required aria-describedby="codeHelp" data-check-url="{{ route('femelles.check-code') }}" > <small id="codeHelp" class="form-text"> ✨ Code généré automatiquement (<span id="nextCode">{{ $suggestedCode }}</span>). Modifiable si unique. </small> <div id="codeValidation" class="invalid-feedback mt-1" style="display: none;"></div> @error('code') <div class="invalid-feedback d-block mt-1"> <i class="bi bi-exclamation-triangle-fill"></i> {{ $message }} </div> @enderror </div> </div> <div class="form-group"> <label class="form-label">Nom *</label> <input type="text" name="nom" class="form-control @error('nom') is-invalid @enderror" value="{{ old('nom') }}" required placeholder="Ex: Lily"> @error('nom') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> <div class="form-group"> <label class="form-label">Race</label> <input type="text" name="race" class="form-control @error('race') is-invalid @enderror" value="{{ old('race') }}" placeholder="Ex: Géant des Flandres, Rex"> @error('race') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> <div class="form-group"> <label class="form-label">Origine *</label> <select name="origine" class="form-select @error('origine') is-invalid @enderror" required> <option value="">-- Sélectionner --</option> <option value="Interne" {{ old('origine') == 'Interne' ? 'selected' : '' }}>Interne</option> <option value="Achat" {{ old('origine') == 'Achat' ? 'selected' : '' }}>Achat</option> </select> @error('origine') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> <div class="form-group"> <label class="form-label">Date de naissance</label> <input type="date" name="date_naissance" class="form-control @error('date_naissance') is-invalid @enderror" value="{{ old('date_naissance') }}"> @error('date_naissance') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> <div class="form-group"> <label class="form-label">État *</label> <select name="etat" class="form-select @error('etat') is-invalid @enderror" required> <option value="Active" {{ old('etat') == 'Active' ? 'selected' : '' }}>Active</option> <option value="Gestante" {{ old('etat') == 'Gestante' ? 'selected' : '' }}>Gestante</option> <option value="Allaitante" {{ old('etat') == 'Allaitante' ? 'selected' : '' }}>Allaitante</option> <option value="Vide" {{ old('etat') == 'Vide' ? 'selected' : '' }}>Vide</option> </select> @error('etat') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> </div> <div style="margin-top: 24px; display: flex; gap: 12px;"> <button type="submit" class="btn-cuni primary" id="submitBtn"> <i class="bi bi-check-circle"></i> Enregistrer </button> <a href="{{ route('femelles.index') }}" class="btn-cuni secondary"> <i class="bi bi-x-circle"></i> Annuler </a> </div> </form> </div> </div> @endsection @push('styles') <style> .code-generator { position: relative; } .code-generator .form-control { padding-right: 40px; font-family: 'JetBrains Mono', monospace; font-weight: 600; letter-spacing: 1px; font-size: 1.05rem; } .code-generator .form-control:focus { border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-subtle); } .code-generator .form-text { font-size: 0.85rem; color: var(--accent-cyan); margin-top: 4px; display: flex; align-items: center; gap: 4px; font-weight: 500; } .code-generator .form-text #nextCode { background: var(--primary-subtle); color: var(--primary); padding: 1px 6px; border-radius: 4px; font-weight: 700; letter-spacing: 0.5px; } .invalid-feedback { color: var(--accent-red); font-size: 0.875rem; margin-top: 0.25rem; display: flex; align-items: center; gap: 4px; } .form-control.is-invalid, .form-select.is-invalid { border-color: var(--accent-red); padding-right: 32px; } .form-control.is-valid { border-color: var(--accent-green); background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 16px 12px; padding-right: 32px; } </style> @endpush @push('scripts') <script> document.addEventListener('DOMContentLoaded', function() { const codeInput = document.getElementById('codeInput'); const codeValidation = document.getElementById('codeValidation'); const submitBtn = document.getElementById('submitBtn'); const checkUrl = codeInput.dataset.checkUrl; let validationTimeout; // Real-time uniqueness check codeInput.addEventListener('input', function() { clearTimeout(validationTimeout); codeValidation.style.display = 'none'; codeInput.classList.remove('is-valid', 'is-invalid'); if (this.value.length < 3) return; validationTimeout = setTimeout(() => { fetch(`${checkUrl}?code=${encodeURIComponent(this.value)}`) .then(response => response.json()) .then(data => { if (!data.available) { codeValidation.innerHTML = `<i class="bi bi-x-circle-fill"></i> Ce code existe déjà !`; codeValidation.style.display = 'block'; codeInput.classList.add('is-invalid'); codeInput.classList.remove('is-valid'); submitBtn.disabled = true; } else { codeValidation.innerHTML = `<i class="bi bi-check-circle-fill"></i> Code disponible`; codeValidation.style.display = 'block'; codeValidation.style.color = 'var(--accent-green)'; codeInput.classList.add('is-valid'); codeInput.classList.remove('is-invalid'); submitBtn.disabled = false; } }) .catch(error => { console.error('Validation error:', error); codeInput.classList.remove('is-valid', 'is-invalid'); submitBtn.disabled = false; }); }, 500); }); // Re-enable button on page load if valid if (!codeInput.classList.contains('is-invalid')) { submitBtn.disabled = false; } // Form submission safety check document.getElementById('femelleForm').addEventListener('submit', function(e) { if (codeInput.classList.contains('is-invalid')) { e.preventDefault(); codeValidation.scrollIntoView({ behavior: 'smooth', block: 'center' }); } }); }); </script> @endpush

File: resources/views/femelles/edit.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Modifier Femelle - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-pencil-square"></i> Modifier la Femelle </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('femelles.index') }}">Femelles</a> <span>/</span> <span>Modification</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-info-circle"></i> Informations de la Femelle </h3> <a href="{{ route('femelles.index') }}" class="btn-cuni sm secondary"> <i class="bi bi-arrow-left"></i> Retour </a> </div> <div class="card-body"> <form action="{{ route('femelles.update', $femelle->id) }}" method="POST"> @csrf @method('PUT') <div class="settings-grid"> <div class="form-group"> <label class="form-label">Code *</label> <input type="text" name="code" class="form-control" value="{{ old('code', $femelle->code) }}" required> </div> <div class="form-group"> <label class="form-label">Nom *</label> <input type="text" name="nom" class="form-control" value="{{ old('nom', $femelle->nom) }}" required> </div> <div class="form-group"> <label class="form-label">Race</label> <input type="text" name="race" class="form-control" value="{{ old('race', $femelle->race) }}"> </div> <div class="form-group"> <label class="form-label">Origine *</label> <select name="origine" class="form-select" required> <option value="Interne" {{ old('origine', $femelle->origine) == 'Interne' ? 'selected' : '' }}>Interne</option> <option value="Achat" {{ old('origine', $femelle->origine) == 'Achat' ? 'selected' : '' }}>Achat</option> </select> </div> <div class="form-group"> <label class="form-label">Date de naissance</label> <input type="date" name="date_naissance" class="form-control" value="{{ old('date_naissance', $femelle->date_naissance) }}"> </div> <div class="form-group"> <label class="form-label">État *</label> <select name="etat" class="form-select" required> <option value="Active" {{ old('etat', $femelle->etat) == 'Active' ? 'selected' : '' }}>Active</option> <option value="Gestante" {{ old('etat', $femelle->etat) == 'Gestante' ? 'selected' : '' }}>Gestante</option> <option value="Allaitante" {{ old('etat', $femelle->etat) == 'Allaitante' ? 'selected' : '' }}>Allaitante</option> <option value="Vide" {{ old('etat', $femelle->etat) == 'Vide' ? 'selected' : '' }}>Vide</option> </select> </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Enregistrer les modifications </button> </div> </form> </div> </div> @endsection

File: resources/views/femelles/index.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Femelles - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-arrow-down-right-square"></i> Gestion des Femelles </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Femelles</span> </div> </div> <a href="{{ route('femelles.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter une femelle </a> </div> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-list-ul"></i> Liste des Femelles </h3> </div> <div class="card-body"> <div class="table-responsive"> <table class="table table-hover align-middle mb-0"> <thead class="bg-light"> <tr> <th class="ps-4 text-uppercase text-muted fw-semibold small">Code</th> <th class="text-uppercase text-muted fw-semibold small">Nom</th> <th class="text-uppercase text-muted fw-semibold small">Race</th> <th class="text-uppercase text-muted fw-semibold small">Origine</th> <th class="text-uppercase text-muted fw-semibold small">Naissance</th> <th class="text-uppercase text-muted fw-semibold small">État</th> <th class="pe-4 text-end text-uppercase text-muted fw-semibold small">Actions</th> </tr> </thead> <tbody> @forelse($femelles as $femelle) <tr class="border-bottom border-light"> <td class="ps-4 fw-semibold text-dark">{{ $femelle->code }}</td> <td>{{ $femelle->nom }}</td> <td> <span class="badge" style="background: rgba(59, 130, 246, 0.1); color: #3B82F6;"> {{ $femelle->race ?? '-' }} </span> </td> <td class="text-muted">{{ $femelle->origine }}</td> <td class="text-muted">{{ date('d/m/Y', strtotime($femelle->date_naissance)) }}</td> <td> <form action="{{ route('femelles.toggleEtat', $femelle->id) }}" method="POST"> @csrf @method('PATCH') <button type="submit" class="badge border-0 status-{{ strtolower($femelle->etat) }}"> {{ $femelle->etat }} </button> </form> </td> <td class="pe-4"> <div class="action-buttons"> <a href="{{ route('femelles.edit', $femelle->id) }}" class="btn-cuni sm secondary" title="Modifier"> <i class="bi bi-pencil"></i> </a> <form action="{{ route('femelles.destroy', $femelle->id) }}" method="POST" style="display:inline;"> @csrf @method('DELETE') <button type="submit" class="btn-cuni sm danger" title="Supprimer" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce mâle ?')"> <i class="bi bi-trash"></i> </button> </form> </div> </td> </tr> @empty <tr> <td colspan="7"> <div class="table-empty-state"> <i class="bi bi-inbox"></i> <p>Aucune femelle enregistré pour le moment</p> <a href="{{ route('femelles.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter une femelle </a> </div> </td> </tr> @endforelse </tbody> </table> </div> @if ($femelles->hasPages()) <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--surface-border);"> <div class="text-muted" style="font-size: 13px;"> Affichage de <strong>{{ $femelles->firstItem() }}</strong> à <strong>{{ $femelles->lastItem() }}</strong> sur <strong>{{ $femelles->total() }}</strong> femelles </div> <nav> {{ $femelles->links('vendor.pagination.bootstrap-5-sm') }} </nav> </div> @endif </div> </div> @endsection

File: resources/views/lapins/create.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Nouveau Lapin - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-plus-circle"></i> Nouveau Lapin </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('lapins.index') }}">Lapins</a> <span>/</span> <span>Nouveau</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-info-circle"></i> Informations du Lapin </h3> </div> <div class="card-body"> <form action="{{ route('lapins.store') }}" method="POST"> @csrf <div class="settings-grid"> <div class="form-group"> <label class="form-label">Type *</label> <select name="type" class="form-select" required> <option value="">-- Sélectionner --</option> <option value="male">Mâle</option> <option value="femelle">Femelle</option> </select> </div> <div class="form-group"> <label class="form-label">Nom *</label> <input type="text" name="nom" class="form-control" required placeholder="Nom du lapin"> </div> <div class="form-group"> <label class="form-label">Race *</label> <input type="text" name="race" class="form-control" required placeholder="Ex: Californien"> </div> <div class="form-group"> <label class="form-label">Origine *</label> <select name="origine" class="form-select" required> <option value="Interne">Interne</option> <option value="Achat">Achat</option> </select> </div> <div class="form-group"> <label class="form-label">Date de naissance *</label> <input type="date" name="date_naissance" class="form-control" required> </div> <div class="form-group"> <label class="form-label">État *</label> <select name="etat" class="form-select" required> <option value="active">Actif</option> <option value="inactive">Inactif</option> </select> </div> </div> <div style="margin-top: 24px; display: flex; gap: 12px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Enregistrer </button> <a href="{{ route('lapins.index') }}" class="btn-cuni secondary"> <i class="bi bi-x-circle"></i> Annuler </a> </div> </form> </div> </div> @endsection

File: resources/views/lapins/index.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Lapins - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi-plus-lg"></i> Gestion des Lapins </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Femelles et Mâles</span> </div> </div> <a href="{{ route('lapins.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter un lapin </a> </div> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-list-ul"></i> Liste des lapins </h3> </div> <div class="card-body"> <div class="table-responsive"> <table class="table table-hover align-middle mb-0"> <thead class="bg-light"> <tr> <th class="ps-4 text-uppercase text-muted fw-semibold small">Code</th> <th class="text-uppercase text-muted fw-semibold small">Nom</th> <th class="text-uppercase text-muted fw-semibold small">Race</th> <th class="text-uppercase text-muted fw-semibold small">Origine</th> <th class="text-uppercase text-muted fw-semibold small">Naissance</th> <th class="text-uppercase text-muted fw-semibold small">État</th> <th class="pe-4 text-end text-uppercase text-muted fw-semibold small">Actions</th> </tr> </thead> <tbody> @forelse($femelles as $femelle) <tr class="border-bottom border-light"> <td class="ps-4 fw-semibold text-dark">{{ $femelle->code }}</td> <td>{{ $femelle->nom }}</td> <td> <span class="badge" style="background: rgba(59, 130, 246, 0.1); color: #3B82F6;"> {{ $femelle->race ?? '-' }} </span> </td> <td class="text-muted">{{ $femelle->origine }}</td> <td class="text-muted">{{ date('d/m/Y', strtotime($femelle->date_naissance)) }} </td> <td> <form action="{{ route('femelles.toggleEtat', $femelle->id) }}" method="POST"> @csrf @method('PATCH') <button type="submit" class="badge border-0 status-{{ strtolower($femelle->etat) }}"> {{ $femelle->etat }} </button> </form> </td> <td class="pe-4"> <div class="action-buttons"> <a href="{{ route('femelles.edit', $femelle->id) }}" class="btn-cuni sm secondary" title="Modifier"> <i class="bi bi-pencil"></i> </a> <form action="{{ route('femelles.destroy', $femelle->id) }}" method="POST" style="display:inline;"> @csrf @method('DELETE') <button type="submit" class="btn-cuni sm danger" title="Supprimer" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette femelle ?')"> <i class="bi bi-trash"></i> </button> </form> </div> </td> </tr> @empty <tr> <td colspan="7"> <div class="table-empty-state"> <i class="bi bi-inbox"></i> <p>Aucune femelle enregistré pour le moment</p> <a href="{{ route('femelles.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter une femelle </a> </div> </td> </tr> @endforelse @forelse($males as $m) <tr class="border-bottom border-light"> <td class="ps-4 fw-semibold text-dark">{{ $m->code }}</td> <td>{{ $m->nom }}</td> <td> <span class="badge" style="background: rgba(59, 130, 246, 0.1); color: #3B82F6;"> {{ $m->race ?? '-' }} </span> </td> <td class="text-muted">{{ $m->origine }}</td> <td class="text-muted">{{ date('d/m/Y', strtotime($m->date_naissance)) }}</td> <td> <form action="{{ route('males.toggleEtat', $m->id) }}" method="POST"> @csrf @method('PATCH') <button type="submit" class="badge border-0 status-{{ strtolower($m->etat) }}"> {{ $m->etat }} </button> </form> </td> <td class="pe-4"> <div class="action-buttons"> <a href="{{ route('males.edit', $m->id) }}" class="btn-cuni sm secondary" title="Modifier"> <i class="bi bi-pencil"></i> </a> <form action="{{ route('males.destroy', $m->id) }}" method="POST" style="display:inline;"> @csrf @method('DELETE') <button type="submit" class="btn-cuni sm danger" title="Supprimer" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce mâle ?')"> <i class="bi bi-trash"></i> </button> </form> </div> </td> </tr> @empty <tr> <td colspan="7"> <div class="table-empty-state"> <i class="bi bi-inbox"></i> <p>Aucun mâle enregistré pour le moment</p> <a href="{{ route('males.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter un mâle </a> </div> </td> </tr> @endforelse </tbody> </table> </div> @if ($femelles->hasPages()) <div class="pagination-wrapper mb-3"> <div class="text-muted small"> Femelles : <strong>{{ $femelles->firstItem() }}-{{ $femelles->lastItem() }}</strong> sur {{ $femelles->total() }} </div> {{ $femelles->appends(['males_page' => request('males_page')])->links('vendor.pagination.bootstrap-5-sm') }} </div> @endif <hr class="my-3 opacity-25"> {{-- Pagination pour les Mâles --}} @if ($males->hasPages()) <div class="pagination-wrapper"> <div class="text-muted small"> Mâles : <strong>{{ $males->firstItem() }}-{{ $males->lastItem() }}</strong> sur {{ $males->total() }} </div> {{ $males->appends(['femelles_page' => request('femelles_page')])->links('vendor.pagination.bootstrap-5-sm') }} </div> @endif </div> </div> @endsection

File: resources/views/layouts/app.blade.php
---
<!DOCTYPE html> <html lang="{{ str_replace('_', '-', app()->getLocale()) }}"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="csrf-token" content="{{ csrf_token() }}"> <title>@yield('title', config('app.name', 'Laravel'))</title> <!-- Fonts --> <link rel="preconnect" href="https://fonts.bunny.net"> <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" /> <!-- Scripts --> @vite(['resources/css/app.css', 'resources/js/app.js']) </head> <body class="font-sans antialiased"> <div class="min-h-screen bg-gray-100"> @include('layouts.navigation') <!-- Page Heading --> @isset($header) <header class="bg-white shadow"> <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"> {{ $header }} </div> </header> @endisset <!-- Page Content --> <main> @yield('content') </main> </div> </body> </html>

File: resources/views/layouts/cuniapp.blade.php
---
<!DOCTYPE html> <html lang="{{ $currentLocale ?? 'fr' }}"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="csrf-token" content="{{ csrf_token() }}"> <title>@yield('title', 'Tableau de Bord Élevage - CuniApp')</title> <!-- Fonts --> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet"> @vite(['resources/css/app.css', 'resources/js/app.js']) <style> :root { /* Primary Colors */ --primary: #2563EB; --primary-light: #3B82F6; --primary-dark: #1D4ED8; --primary-subtle: #EFF6FF; /* Accent Colors */ --accent-cyan: #06B6D4; --accent-purple: #8B5CF6; --accent-pink: #EC4899; --accent-green: #10B981; --accent-orange: #F59E0B; --accent-red: #EF4444; /* Neutral Colors */ --white: #FFFFFF; --gray-50: #F9FAFB; --gray-100: #F3F4F6; --gray-200: #E5E7EB; --gray-300: #D1D5DB; --gray-400: #9CA3AF; --gray-500: #6B7280; --gray-600: #4B5563; --gray-700: #374151; --gray-800: #1F2937; --gray-900: #111827; /* Semantic Colors */ --surface: #FFFFFF; --surface-alt: #F9FAFB; --surface-border: #E5E7EB; --text-primary: #1F2937; --text-secondary: #6B7280; --text-tertiary: #9CA3AF; /* Effects */ --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05); --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1); --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); --radius-sm: 6px; --radius: 8px; --radius-md: 12px; --radius-lg: 16px; --radius-xl: 20px; } /* ==================== PROFESSIONAL DARK MODE ==================== */ .theme-dark { /* ===== CORE FOUNDATION ===== */ --surface: #0A0F1D; /* Deepest background (not pure black) */ --surface-alt: #0F172A; /* Card surfaces */ --surface-elevated: #151E30; /* Hover states, modals */ --surface-overlay: #1A2335; /* Dropdowns, tooltips */ --surface-border: #25324A; /* Subtle dividers */ /* ===== TYPOGRAPHY ===== */ --text-primary: #E6E9F0; /* Headings, critical text (92% white) */ --text-secondary: #A3B3C6; /* Body text (65% white) */ --text-tertiary: #6B7D95; /* Muted text, placeholders (45% white) */ --text-inverted: #0F172A; /* Text on primary colors */ /* ===== BRAND COLORS (Optimized for dark) ===== */ --primary: #4DA6FF; /* Brighter for visibility */ --primary-light: #6EB5FF; --primary-dark: #2A88F0; --primary-subtle: rgba(77, 166, 255, 0.12); --primary-glow: rgba(77, 166, 255, 0.25); /* ===== ACCENTS (Increased saturation) ===== */ --accent-cyan: #22D3EE; --accent-purple: #A78BFA; --accent-pink: #F472B6; --accent-green: #34D399; --accent-orange: #FB923C; --accent-red: #F87171; /* ===== NEUTRALS (Expanded dark spectrum) ===== */ --gray-50: #080C15; --gray-100: #0F172A; --gray-200: #1A2335; --gray-300: #25324A; --gray-400: #3B4B63; --gray-500: #54657F; --gray-600: #788BA5; --gray-700: #A3B3C6; --gray-800: #CBD5E1; --gray-900: #F1F5F9; /* ===== EFFECTS (Dark-optimized) ===== */ --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.35); --shadow: 0 4px 12px rgba(0, 0, 0, 0.45); --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.55); --shadow-lg: 0 16px 32px rgba(0, 0, 0, 0.65); --shadow-tooltip: 0 4px 16px rgba(0, 0, 0, 0.75); --glow-primary: 0 0 0 3px var(--primary-glow); --glow-success: 0 0 0 3px rgba(52, 211, 153, 0.3); --glow-warning: 0 0 0 3px rgba(251, 146, 60, 0.3); /* ===== FORM CONTROLS ===== */ --input-bg: #151E30; --input-border: #25324A; --input-focus-border: var(--primary); --input-placeholder: var(--text-tertiary); --input-disabled-bg: #1A2335; --input-disabled-text: #54657F; /* ===== INTERACTIVE STATES ===== */ --hover-subtle: rgba(255, 255, 255, 0.04); --hover-primary: rgba(77, 166, 255, 0.15); --active-primary: rgba(77, 166, 255, 0.25); --focus-ring: var(--glow-primary); /* ===== DATA VISUALIZATION ===== */ --chart-grid: #25324A; --chart-axis: #3B4B63; --chart-tooltip-bg: var(--surface-overlay); --chart-tooltip-border: var(--surface-border); /* ===== TOOLTIPS & POPOVERS ===== */ --tooltip-bg: var(--surface-overlay); --tooltip-border: #2D3E58; --tooltip-text: var(--text-primary); --tooltip-shadow: var(--shadow-tooltip); /* ===== BADGES & STATUS ===== */ --badge-active-bg: rgba(52, 211, 153, 0.15); --badge-active-text: #22C55E; --badge-gestante-bg: rgba(251, 146, 60, 0.15); --badge-gestante-text: #F97316; --badge-allaitante-bg: rgba(77, 166, 255, 0.15); --badge-allaitante-text: var(--primary); --badge-vide-bg: rgba(108, 117, 125, 0.15); --badge-vide-text: #6C757D; /* ===== ALERTS (Enhanced contrast) ===== */ --alert-success-bg: rgba(16, 185, 129, 0.12); --alert-success-border: rgba(16, 185, 129, 0.3); --alert-warning-bg: rgba(245, 158, 11, 0.12); --alert-warning-border: rgba(245, 158, 11, 0.3); --alert-error-bg: rgba(239, 68, 68, 0.12); --alert-error-border: rgba(239, 68, 68, 0.3); --alert-info-bg: rgba(59, 130, 246, 0.12); --alert-info-border: rgba(59, 130, 246, 0.3); /* ===== CALENDAR SPECIFIC ===== */ --cal-header-bg: var(--surface-alt); --cal-day-hover: var(--hover-subtle); --cal-day-today-bg: var(--primary); --cal-day-today-text: var(--text-inverted); --cal-event-purple: var(--accent-purple); --cal-event-green: var(--accent-green); /* ===== APPLY BASE STYLES ===== */ background-color: var(--surface); color: var(--text-primary); } /* ==================== DARK MODE COMPONENT OVERRIDES ==================== */ .theme-dark .cuni-header { background: linear-gradient(180deg, var(--surface) 0%, var(--surface-alt) 100%); box-shadow: var(--shadow); border-bottom: 1px solid var(--surface-border); } .theme-dark .brand-tagline { color: var(--text-tertiary); } .theme-dark .nav-link { color: var(--text-secondary); border-color: transparent; } .theme-dark .nav-link:hover { background: var(--hover-subtle); color: var(--text-primary); } .theme-dark .nav-link.active { background: var(--primary-subtle); color: var(--primary); border-color: var(--primary); } .theme-dark .nav-link.danger:hover { background: rgba(248, 113, 113, 0.1); } .theme-dark .cuni-card { background: var(--surface-alt); border: 1px solid var(--surface-border); box-shadow: var(--shadow-md); } .theme-dark .card-header-custom { background: rgba(255, 255, 255, 0.03); border-bottom: 1px solid var(--surface-border); } .theme-dark .card-title { color: var(--text-primary); } /* Form Controls */ .theme-dark .form-control, .theme-dark .form-select { background: var(--input-bg); border-color: var(--input-border); color: var(--text-primary); transition: border-color 0.2s, box-shadow 0.2s; } .theme-dark .form-control::placeholder, .theme-dark .form-select option { color: var(--input-placeholder); } .theme-dark .form-control:focus, .theme-dark .form-select:focus { border-color: var(--input-focus-border); box-shadow: var(--focus-ring); } .theme-dark .form-control.is-invalid { border-color: var(--accent-red); box-shadow: 0 0 0 3px rgba(248, 113, 113, 0.2); } .theme-dark .form-control.is-valid { border-color: var(--accent-green); box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.2); } /* Buttons */ .theme-dark .btn-cuni.primary { background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%); box-shadow: var(--shadow-sm); } .theme-dark .btn-cuni.primary:hover { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); transform: translateY(-1px); box-shadow: var(--shadow); } .theme-dark .btn-cuni.secondary { background: var(--surface-elevated); border-color: var(--surface-border); color: var(--text-primary); } .theme-dark .btn-cuni.secondary:hover { background: var(--hover-subtle); border-color: var(--gray-400); } .theme-dark .btn-cuni.danger { background: rgba(248, 113, 113, 0.1); border-color: rgba(248, 113, 113, 0.3); color: var(--accent-red); } .theme-dark .btn-cuni.danger:hover { background: rgba(248, 113, 113, 0.15); } /* Tables */ .theme-dark .table thead { background: rgba(0, 0, 0, 0.2); border-bottom: 2px solid var(--surface-border); } .theme-dark .table tbody tr:hover { background: var(--hover-subtle); } .theme-dark .table tbody td { color: var(--text-secondary); border-color: var(--surface-border); } .theme-dark .table-empty-state { background: var(--surface-elevated); } /* Badges */ .theme-dark .badge { border: 1px solid transparent; } .theme-dark .status-active { background: var(--badge-active-bg); color: var(--badge-active-text); border-color: rgba(52, 211, 153, 0.3); } .theme-dark .status-gestante { background: var(--badge-gestante-bg); color: var(--badge-gestante-text); border-color: rgba(251, 146, 60, 0.3); } .theme-dark .status-allaitante { background: var(--badge-allaitante-bg); color: var(--badge-allaitante-text); border-color: rgba(77, 166, 255, 0.3); } .theme-dark .status-vide { background: var(--badge-vide-bg); color: var(--badge-vide-text); border-color: rgba(108, 117, 125, 0.3); } /* Alerts */ .theme-dark .alert-cuni { border-width: 1px; } .theme-dark .alert-cuni.success { background: var(--alert-success-bg); border-color: var(--alert-success-border); color: var(--accent-green); } .theme-dark .alert-cuni.error { background: var(--alert-error-bg); border-color: var(--alert-error-border); color: var(--accent-red); } /* Tooltips & Popovers */ .theme-dark .tooltip-inner { background: var(--tooltip-bg); color: var(--tooltip-text); border: 1px solid var(--tooltip-border); box-shadow: var(--tooltip-shadow); border-radius: var(--radius); } .theme-dark .tooltip-arrow::before { border-color: var(--tooltip-bg); } /* Calendar */ .theme-dark .calendar-body { background: var(--surface-alt); border-radius: var(--radius-lg); padding: 8px; } .theme-dark .cal-day.header { color: var(--text-tertiary); background: transparent; } .theme-dark .cal-day:not(.header):hover { background: var(--cal-day-hover); } .theme-dark .cal-day.today { background: var(--cal-day-today-bg); color: var(--cal-day-today-text); font-weight: 600; } .theme-dark .cal-day.event::after { opacity: 0.85; } /* Dropdowns */ .theme-dark .dropdown-menu-custom { background: var(--surface-overlay); border: 1px solid var(--surface-border); box-shadow: var(--shadow-lg); } .theme-dark .dropdown-item-custom:hover { background: var(--hover-subtle); transform: translateX(0); } .theme-dark .dropdown-header { background: rgba(255, 255, 255, 0.03); border-bottom: 1px solid var(--surface-border); } /* Toast Notifications */ .theme-dark #toast-container .pointer-events-auto { box-shadow: var(--shadow-lg); border-left-width: 3px; } .theme-dark #toast-container .pointer-events-auto.bg-gradient-to-r { background: var(--surface-overlay) !important; } .theme-dark #toast-container .text-gray-800 { color: var(--text-primary) !important; } .theme-dark #toast-container .text-gray-700 { color: var(--text-secondary) !important; } /* Inputs with Icons */ .theme-dark .form-input-wrapper i { color: var(--text-tertiary); } .theme-dark .form-input:focus+i, .theme-dark .form-input-wrapper:focus-within i { color: var(--primary); } /* Pagination */ .theme-dark .pagination .page-item .page-link { background: var(--surface-elevated); border-color: var(--surface-border); color: var(--text-secondary); } .theme-dark .pagination .page-item.active .page-link { background: var(--primary); border-color: var(--primary); color: var(--text-inverted); } .theme-dark .pagination .page-item:hover .page-link { background: var(--hover-subtle); border-color: var(--primary); color: var(--primary); } /* Verification Modal */ .theme-dark .verification-modal { background: var(--surface-alt); box-shadow: var(--shadow-lg); } .theme-dark .verification-header { border-bottom: 1px solid var(--surface-border); background: rgba(255, 255, 255, 0.03); } .theme-dark .verification-code-input { background: var(--input-bg); border-color: var(--input-border); color: var(--text-primary); } .theme-dark .verification-code-input:focus { border-color: var(--primary); box-shadow: var(--glow-primary); } .theme-dark .verification-code-input.filled { background: var(--primary-subtle); border-color: var(--primary); } /* Metrics Cards (Dashboard) */ .theme-dark .metric-card:hover { border-color: var(--primary); box-shadow: var(--shadow-md); transform: translateY(-2px); } .theme-dark .perf-card:hover { border-color: var(--primary); box-shadow: var(--shadow-md); } .theme-dark .action-tile:hover { border-color: var(--primary); box-shadow: var(--shadow-md); transform: translateY(-2px); } /* Critical: Fix White SVG Icons */ .theme-dark svg { fill: currentColor; } .theme-dark .cuniapp-logo svg path { fill: rgba(255, 255, 255, 0.92) !important; } .theme-dark .nav-link i, .theme-dark .btn-cuni i { color: currentColor; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--gray-50); color: var(--text-primary); line-height: 1.6; min-height: 100vh; } /* ==================== HEADER ==================== */ .cuni-header { background: var(--surface); border-bottom: 1px solid var(--surface-border); position: sticky; top: 0; z-index: 100; } .header-wrapper { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; gap: 20px; flex-wrap: wrap; } .brand-identity { display: flex; align-items: center; gap: 16px; } .cuniapp-logo { width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--primary) 0%, var(--accent-cyan) 100%); border-radius: var(--radius-md); transition: transform 0.2s ease; } .cuniapp-logo:hover { transform: scale(1.05); } .cuniapp-logo svg { width: 28px; height: 28px; } .brand-title { font-size: 20px; font-weight: 700; color: var(--gray-800); letter-spacing: -0.02em; } .brand-title span { font-weight: 500; color: var(--text-secondary); } .brand-tagline { font-size: 12px; color: var(--text-tertiary); margin-top: 2px; } /* Navigation */ .header-nav { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; } .nav-link { display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; font-size: 14px; font-weight: 500; border-radius: var(--radius); text-decoration: none; transition: all 0.2s ease; color: var(--text-secondary); background: transparent; border: 1px solid transparent; } .nav-link:hover { background: var(--gray-100); color: var(--text-primary); } .nav-link.active { background: var(--primary-subtle); color: var(--primary); border-color: var(--primary-subtle); } .nav-link i { font-size: 16px; } .nav-link.danger { color: var(--accent-red); } .nav-link.danger:hover { background: rgba(239, 68, 68, 0.1); } /* ==================== MAIN CONTENT ==================== */ .cuni-main { max-width: 1400px; margin: 0 auto; padding: 24px; min-height: calc(100vh - 200px); } /* ==================== PAGE HEADER ==================== */ .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px; } .page-title { font-size: 24px; font-weight: 700; color: var(--gray-800); display: flex; align-items: center; gap: 12px; letter-spacing: -0.02em; } .page-title i { color: var(--primary); font-size: 26px; } .breadcrumb { display: flex; gap: 8px; font-size: 13px; color: var(--text-secondary); margin-top: 8px; } .breadcrumb a { color: var(--primary); text-decoration: none; transition: color 0.2s; } .breadcrumb a:hover { color: var(--primary-dark); text-decoration: underline; } .breadcrumb span { color: var(--text-tertiary); } /* ==================== CARDS ==================== */ .cuni-card { background: var(--surface); border-radius: var(--radius-lg); border: 1px solid var(--surface-border); box-shadow: var(--shadow); margin-bottom: 24px; overflow: hidden; } .card-header-custom { display: flex; justify-content: space-between; align-items: center; padding: 20px 24px; border-bottom: 1px solid var(--surface-border); background: var(--surface-alt); } .card-title { font-size: 16px; font-weight: 600; color: var(--gray-800); display: flex; align-items: center; gap: 10px; } .card-title i { color: var(--primary); } .card-body { padding: 24px; } /* ==================== BUTTONS ==================== */ .btn-cuni { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 10px 20px; font-size: 14px; font-weight: 500; border-radius: var(--radius); border: none; cursor: pointer; text-decoration: none; transition: all 0.2s ease; font-family: inherit; } .btn-cuni.primary { background: var(--primary); color: var(--white); box-shadow: var(--shadow-sm); } .btn-cuni.primary:hover { background: var(--primary-dark); transform: translateY(-1px); box-shadow: var(--shadow); } .btn-cuni.secondary { background: var(--white); color: var(--text-primary); border: 1px solid var(--surface-border); } .btn-cuni.secondary:hover { background: var(--gray-50); border-color: var(--gray-300); } .btn-cuni.danger { background: rgba(239, 68, 68, 0.1); color: var(--accent-red); border: 1px solid rgba(239, 68, 68, 0.2); } .btn-cuni.danger:hover { background: rgba(239, 68, 68, 0.15); } .btn-cuni.sm { padding: 8px 14px; font-size: 13px; } /* ==================== FORMS ==================== */ .form-group { margin-bottom: 20px; } .form-label { display: block; font-size: 13px; font-weight: 500; color: var(--gray-700); margin-bottom: 8px; } .form-control, .form-select { width: 100%; padding: 10px 14px; font-size: 14px; border: 1px solid var(--gray-300); border-radius: var(--radius); background: var(--white); color: var(--text-primary); transition: all 0.2s ease; font-family: inherit; } .form-control:focus, .form-select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-subtle); } .form-control::placeholder { color: var(--text-tertiary); } /* ==================== ALERTS ==================== */ .alert-cuni { padding: 14px 18px; border-radius: var(--radius); margin-bottom: 24px; display: flex; align-items: flex-start; gap: 12px; font-size: 14px; } .alert-cuni i { font-size: 18px; flex-shrink: 0; margin-top: 2px; } .alert-cuni.success { background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); color: var(--accent-green); } .alert-cuni.error { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2); color: var(--accent-red); } /* ==================== TABS ==================== */ .tabs-container { display: flex; gap: 4px; margin-bottom: 24px; border-bottom: 1px solid var(--surface-border); padding-bottom: 0; overflow-x: auto; background: var(--surface); border-radius: var(--radius-md) var(--radius-md) 0 0; padding: 8px 8px 0 8px; } .tab-btn { padding: 12px 20px; font-size: 14px; font-weight: 500; color: var(--text-secondary); background: transparent; border: none; border-bottom: 2px solid transparent; cursor: pointer; transition: all 0.2s ease; white-space: nowrap; border-radius: var(--radius) var(--radius) 0 0; display: flex; align-items: center; gap: 8px; } .tab-btn:hover { color: var(--text-primary); background: var(--gray-50); } .tab-btn.active { color: var(--primary); border-bottom-color: var(--primary); background: var(--primary-subtle); } .tab-btn i { font-size: 16px; } .tab-content { display: none; } .tab-content.active { display: block; } /* ==================== GRID ==================== */ .settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; } /* ==================== FOOTER ==================== */ .cuni-footer { background: var(--surface); border-top: 1px solid var(--surface-border); padding: 24px; margin-top: 40px; } .footer-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; } .footer-content p { font-size: 13px; color: var(--text-secondary); } .footer-links { display: flex; gap: 20px; flex-wrap: wrap; } .footer-links a { font-size: 13px; color: var(--text-secondary); text-decoration: none; transition: color 0.2s; } .footer-links a:hover { color: var(--primary); } .footer-stats { display: flex; gap: 20px; flex-wrap: wrap; margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--gray-100); } .footer-stat { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-tertiary); } .footer-stat i { color: var(--primary); } /* ==================== RESPONSIVE ==================== */ @media (max-width: 768px) { .header-wrapper { flex-direction: column; align-items: flex-start; padding: 16px; } .header-nav { width: 100%; justify-content: flex-start; } .cuni-main { padding: 16px; } .page-header { flex-direction: column; align-items: flex-start; } .footer-content { flex-direction: column; text-align: center; } .tabs-container { padding: 4px 4px 0 4px; } .tab-btn { padding: 10px 14px; font-size: 13px; } } @media (max-width: 480px) { .brand-title { font-size: 18px; } .nav-link { padding: 8px 12px; font-size: 13px; } .footer-links { flex-direction: column; gap: 12px; } .footer-stats { flex-direction: column; gap: 8px; } } /* ==================== ENHANCED TABLES ==================== */ .table-responsive { border-radius: var(--radius-lg); overflow: hidden; border: 1px solid var(--surface-border); } .table { margin-bottom: 0; width: 100%; } .table thead { background: var(--surface-alt); border-bottom: 2px solid var(--surface-border); } .table thead th { padding: 14px 16px; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-secondary); border: none; } .table tbody tr { border-bottom: 1px solid var(--surface-border); transition: all 0.2s ease; } .table tbody tr:hover { background: var(--primary-subtle); } .table tbody tr:last-child { border-bottom: none; } .table tbody td { padding: 14px 16px; vertical-align: middle; font-size: 14px; color: var(--text-primary); } /* Empty State */ .table-empty-state { text-align: center; padding: 60px 20px; background: var(--surface-alt); } .table-empty-state i { font-size: 3rem; color: var(--text-tertiary); margin-bottom: 16px; display: block; } .table-empty-state p { color: var(--text-secondary); font-size: 14px; margin-bottom: 20px; } .table-empty-state .btn-cuni { margin-top: 8px; } /* Badge Improvements */ .badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; font-size: 12px; font-weight: 600; border-radius: 20px; text-transform: uppercase; letter-spacing: 0.3px; } /* Status Colors */ .status-active { background: rgba(16, 185, 129, 0.1); color: #10B981; } .status-gestante { background: rgba(245, 158, 11, 0.1); color: #F59E0B; } .status-allaitante { background: rgba(59, 130, 246, 0.1); color: #3B82F6; } .status-vide { background: rgba(107, 114, 128, 0.1); color: #6B7280; } .status-inactive { background: rgba(107, 114, 128, 0.1); color: #6B7280; } /* Action Buttons */ .action-buttons { display: flex; gap: 8px; justify-content: flex-end; } .action-buttons .btn-cuni { padding: 6px 10px; font-size: 12px; } /* Pagination */ .pagination { display: flex; gap: 4px; justify-content: center; margin-top: 20px; } .pagination .page-item .page-link { padding: 8px 14px; border: 1px solid var(--surface-border); border-radius: var(--radius); color: var(--text-secondary); background: var(--white); transition: all 0.2s ease; } .pagination .page-item.active .page-link { background: var(--primary); border-color: var(--primary); color: var(--white); } .pagination .page-item:hover .page-link { background: var(--primary-subtle); border-color: var(--primary); color: var(--primary); } /* Responsive Table */ @media (max-width: 768px) { .table-responsive { overflow-x: auto; } .table { min-width: 800px; } .action-buttons { flex-direction: column; gap: 4px; } } /* ==================== USER DROPDOWN ==================== */ .user-profile-dropdown { position: relative; display: inline-block; } .user-trigger { display: flex; align-items: center; gap: 10px; padding: 6px 12px; border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; background: var(--gray-50); border: 1px solid var(--surface-border); } .user-trigger:hover { background: var(--gray-100); } .user-avatar { width: 32px; height: 32px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; } .dropdown-menu-custom { position: absolute; top: calc(100% + 8px); right: 0; width: 200px; background: var(--surface); border: 1px solid var(--surface-border); border-radius: var(--radius-md); box-shadow: var(--shadow-lg); display: none; z-index: 1000; overflow: hidden; animation: slideIn 0.2s ease-out; } @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } } .dropdown-menu-custom.show { display: block; } .dropdown-header { padding: 12px 16px; border-bottom: 1px solid var(--surface-border); background: var(--surface-alt); } .dropdown-header span { display: block; font-size: 13px; font-weight: 600; color: var(--gray-800); } .dropdown-header small { color: var(--text-secondary); font-size: 11px; } .dropdown-item-custom { display: flex; align-items: center; gap: 10px; padding: 10px 16px; color: var(--text-primary); text-decoration: none; font-size: 14px; transition: background 0.2s; width: 100%; border: none; background: none; text-align: left; cursor: pointer; border-radius: var(--radius); } .dropdown-item-custom:hover { background: var(--gray-50); color: var(--primary); transform: translateX(4px); } .dropdown-item-custom.active { background: var(--primary-subtle); color: var(--primary); font-weight: 500; } .dropdown-item-custom i { width: 20px; text-align: center; } /* ==================== MOBILE MENU ==================== */ #mobileMenuToggle { display: none; } @media (max-width: 768px) { #mobileMenuToggle { display: block; position: absolute; right: 16px; top: 16px; z-index: 101; } .header-nav, .user-profile-dropdown { display: none; } #mobileMenu { display: block; } } /* Header - Fixed "Plus" dropdown */ .theme-dark .dropdown-menu-custom { background: var(--surface-overlay); border: 1px solid var(--surface-border); box-shadow: var(--shadow-lg); } .theme-dark .dropdown-item-custom { color: var(--text-primary); } .theme-dark .dropdown-item-custom:hover { background: var(--hover-subtle); color: var(--primary); } </style> </head> <body class="theme-{{ auth()->check() ? auth()->user()->theme : 'dark' }}"> <!-- Header --> <header class="cuni-header"> <div class="header-wrapper"> <div class="brand-identity"> <a href="{{ route('dashboard') }}" class="cuniapp-logo"> <svg viewBox="0 0 40 40" fill="none"> <path d="M20 5L35 15V25L20 35L5 25V15L20 5Z" fill="white" /> <path d="M20 12L28 17V23L20 28L12 23V17L20 12Z" fill="rgba(255,255,255,0.8)" /> </svg> </a> <div> <h1 class="brand-title">CuniApp <span>Élevage</span></h1> <p class="brand-tagline">Gestion intelligente de votre cheptel</p> </div> </div> <!-- Mobile Menu Toggle --> <button id="mobileMenuToggle" class="md:hidden p-2 text-gray-600 hover:text-primary focus:outline-none z-20"> <i class="bi bi-list text-2xl"></i> </button> <nav class="header-nav"> <!-- Primary Navigation (Always Visible) --> <a href="{{ route('dashboard') }}" class="nav-link {{ request()->routeIs('dashboard') ? 'active' : '' }}"> <i class="bi bi-speedometer2"></i> <span>Dashboard</span> </a> <a href="{{ route('lapins.index') }}" class="nav-link {{ request()->routeIs('lapins.*') ? 'active' : '' }}"> <i class="bi-plus-lg"></i> <span>Total</span> </a> <a href="{{ route('males.index') }}" class="nav-link {{ request()->routeIs('males.*') ? 'active' : '' }}"> <i class="bi bi-arrow-up-right-square"></i> <span>Mâles</span> </a> <a href="{{ route('femelles.index') }}" class="nav-link {{ request()->routeIs('femelles.*') ? 'active' : '' }}"> <i class="bi bi-arrow-down-right-square"></i> <span>Femelles</span> </a> <!-- "More" Dropdown for Secondary Items --> <div class="relative" x-data="{ open: false }"> <button @click="open = !open" class="nav-link flex items-center gap-1 {{ request()->routeIs('saillies.*', 'mises-bas.*', 'settings.*') ? 'active' : '' }}" aria-label="Plus d'options"> <i class="bi bi-grid-3x3-gap"></i> <span>Plus</span> <i class="bi bi-chevron-down text-xs ml-1"></i> </button> <div x-show="open" @click.outside="open = false" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95" class="absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-1 z-50"> <a href="{{ route('saillies.index') }}" class="dropdown-item-custom {{ request()->routeIs('saillies.*') ? 'active' : '' }}"> <i class="bi bi-heart text-primary"></i> Saillies </a> <a href="{{ route('mises-bas.index') }}" class="dropdown-item-custom {{ request()->routeIs('mises-bas.*') ? 'active' : '' }}"> <i class="bi bi-egg text-primary"></i> Mises Bas </a> <hr class="my-1 border-gray-100"> <a href="{{ route('settings.index') }}" class="dropdown-item-custom {{ request()->routeIs('settings.*') ? 'active' : '' }}"> <i class="bi bi-gear text-primary"></i> Paramètres </a> <a href="{{ route('sales.index') }}" class="dropdown-item-custom {{ request()->routeIs('sales.*') ? 'active' : '' }}"> <i class="bi bi-cart text-primary"></i> Ventes </a> </div> </div> <!-- Notifications Bell --> @php $unreadCount = \App\Models\Notification::where('user_id', auth()->id()) ->where('is_read', false) ->count(); @endphp <a href="{{ route('notifications.index') }}" class="nav-link flex items-center gap-1 relative {{ request()->routeIs('notifications.*') ? 'active' : '' }}" title="Notifications" aria-label="Notifications"> <i class="bi bi-bell" style="font-size: 1.15rem;"></i> @if ($unreadCount > 0) <span class="absolute -top-1 -right-1 flex items-center justify-center w-4 h-4 text-[0.65rem] font-bold text-white bg-red-500 rounded-full border-2 border-white"> {{ $unreadCount > 9 ? '9+' : $unreadCount }} </span> @endif </a> <!-- Profile Dropdown --> <div class="user-profile-dropdown" id="userDropdown"> <div class="user-trigger" onclick="toggleDropdown()"> <div class="user-avatar"> {{ substr(Auth::user()->name ?? 'U', 0, 1) }} </div> <span class="brand-title" style="font-size: 14px;">{{ Auth::user()->name ?? 'Utilisateur' }}</span> <i class="bi bi-chevron-down" style="font-size: 12px; color: var(--text-secondary);"></i> </div> <div class="dropdown-menu-custom" id="dropdownMenu"> <a href="{{ route('profile.edit') }}" class="dropdown-item-custom"> <i class="bi bi-person-circle"></i> Mon Profil </a> <hr style="margin: 4px 0; border: 0; border-top: 1px solid var(--surface-border);"> <form method="POST" action="{{ route('logout') }}" style="display: inline;"> @csrf <button type="submit" class="nav-link danger" style="border: none; cursor: pointer;"> <i class="bi bi-box-arrow-right"></i> <span>Déconnexion</span> </button> </form> </div> </div> </nav> </div> </header> <!-- Mobile Menu Overlay --> <div id="mobileMenu" class="fixed inset-0 bg-gray-900 bg-opacity-90 z-40 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden"> <div class="flex justify-between items-center p-6 border-b border-gray-800"> <div class="flex items-center gap-3"> <div class="cuniapp-logo" style="width:40px;height:40px"> <svg viewBox="0 0 40 40" fill="none"> <path d="M20 5L35 15V25L20 35L5 25V15L20 5Z" fill="white" /> <path d="M20 12L28 17V23L20 28L12 23V17L20 12Z" fill="rgba(255,255,255,0.8)" /> </svg> </div> <span class="text-white font-bold text-xl">CuniApp</span> </div> <button id="closeMobileMenu" class="text-white hover:text-primary transition"> <i class="bi bi-x-lg text-2xl"></i> </button> </div> <div class="mt-8 px-6 space-y-1"> <!-- Mirror desktop nav items with mobile styling --> <a href="{{ route('dashboard') }}" class="block py-4 text-white hover:bg-gray-800 rounded-lg px-4 {{ request()->routeIs('dashboard') ? 'bg-primary text-white' : '' }}"> <i class="bi bi-speedometer2 me-3"></i> Dashboard </a> <a href="{{ route('lapins.index') }}" class="block py-4 text-white hover:bg-gray-800 rounded-lg px-4 {{ request()->routeIs('lapins.*') ? 'bg-primary text-white' : '' }}"> <i class="bi bi-plus-lg me-3"></i> Total Lapins </a> <a href="{{ route('males.index') }}" class="block py-4 text-white hover:bg-gray-800 rounded-lg px-4 {{ request()->routeIs('males.*') ? 'bg-primary text-white' : '' }}"> <i class="bi bi-arrow-up-right-square me-3"></i> Mâles </a> <a href="{{ route('femelles.index') }}" class="block py-4 text-white hover:bg-gray-800 rounded-lg px-4 {{ request()->routeIs('femelles.*') ? 'bg-primary text-white' : '' }}"> <i class="bi bi-arrow-down-right-square me-3"></i> Femelles </a> <a href="{{ route('saillies.index') }}" class="block py-4 text-white hover:bg-gray-800 rounded-lg px-4 {{ request()->routeIs('saillies.*') ? 'bg-primary text-white' : '' }}"> <i class="bi bi-heart me-3"></i> Saillies </a> <a href="{{ route('mises-bas.index') }}" class="block py-4 text-white hover:bg-gray-800 rounded-lg px-4 {{ request()->routeIs('mises-bas.*') ? 'bg-primary text-white' : '' }}"> <i class="bi bi-egg me-3"></i> Mises Bas </a> <a href="{{ route('settings.index') }}" class="block py-4 text-white hover:bg-gray-800 rounded-lg px-4 {{ request()->routeIs('settings.*') ? 'bg-primary text-white' : '' }}"> <i class="bi bi-gear me-3"></i> Paramètres </a> <a href="{{ route('notifications.index') }}" class="block py-4 text-white hover:bg-gray-800 rounded-lg px-4 {{ request()->routeIs('notifications.*') ? 'bg-primary text-white' : '' }}"> <i class="bi bi-bell me-3"></i> Notifications @if ($unreadCount > 0) <span class="bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full ml-2">{{ $unreadCount }}</span> @endif </a> <div class="border-t border-gray-800 mt-4 pt-4"> <div class="flex items-center gap-3 px-4 py-3 bg-gray-800 rounded-lg"> <div class="user-avatar" style="width:36px;height:36px"> {{ substr(Auth::user()->name ?? 'U', 0, 1) }}</div> <div> <div class="font-medium text-white">{{ Auth::user()->name ?? 'Utilisateur' }}</div> <div class="text-xs text-gray-400">{{ Auth::user()->email }}</div> </div> </div> <form method="POST" action="{{ route('logout') }}" class="mt-3"> @csrf <button type="submit" class="w-full flex items-center gap-3 py-3 text-red-400 hover:bg-gray-800 rounded-lg px-4"> <i class="bi bi-box-arrow-right"></i> Déconnexion </button> </form> </div> </div> </div> <!-- Real-Time Toast Notifications --> <div id="toast-container" class="fixed top-4 right-4 z-[9999] flex flex-col gap-3 max-w-md pointer-events-none"> </div> @push('scripts') <script> // Real-time Toast System class ToastSystem { constructor() { this.container = document.getElementById('toast-container'); this.toasts = new Map(); } show(options) { const id = options.id || Date.now().toString(); if (this.toasts.has(id)) return; const toast = document.createElement('div'); toast.className = `pointer-events-auto relative flex items-start gap-3 p-4 rounded-xl shadow-lg transform transition-all duration-300 animate-fade-in-up ${options.type === 'success' ? 'bg-gradient-to-r from-green-50 to-green-100 border-l-4 border-green-500' : options.type === 'warning' ? 'bg-gradient-to-r from-amber-50 to-amber-100 border-l-4 border-amber-500' : options.type === 'error' ? 'bg-gradient-to-r from-red-50 to-red-100 border-l-4 border-red-500' : 'bg-gradient-to-r from-blue-50 to-blue-100 border-l-4 border-blue-600'}`; toast.dataset.id = id; const iconMap = { success: '<i class="bi bi-check-circle-fill text-green-500 text-xl"></i>', warning: '<i class="bi bi-exclamation-triangle-fill text-amber-500 text-xl"></i>', error: '<i class="bi bi-x-circle-fill text-red-500 text-xl"></i>', info: '<i class="bi bi-info-circle-fill text-blue-500 text-xl"></i>' }; toast.innerHTML = ` <div class="flex-shrink-0 mt-0.5">${iconMap[options.type] || iconMap.info}</div> <div class="flex-1 min-w-0"> <p class="text-sm font-bold text-gray-800">${options.title}</p> <p class="text-sm text-gray-700 mt-1">${options.message}</p> ${options.action_url ? ` <button class="mt-2 text-xs font-medium text-blue-600 hover:text-blue-800 transition-colors flex items-center gap-1 group" data-url="${options.action_url}"> Voir les détails <i class="bi bi-arrow-right group-hover:translate-x-1 transition-transform"></i> </button> ` : ''} </div> <div class="flex flex-col items-end"> <button class="text-gray-400 hover:text-gray-600 transition-colors" data-dismiss-toast> <i class="bi bi-x-lg text-sm"></i> </button> <span class="mt-1 text-xs text-gray-500">${this.timeAgo(options.timestamp)}</span> </div> <div class="absolute bottom-0 left-0 right-0 h-1 bg-current opacity-20 rounded-b-xl"> <div class="h-full bg-current opacity-100 rounded-b-xl transition-all duration-${options.duration || 5000} ease-linear" style="width: 100%; background: ${options.type === 'success' ? '#10b981' : options.type === 'warning' ? '#f59e0b' : options.type === 'error' ? '#ef4444' : '#3b82f6'}"></div> </div> `; this.container.appendChild(toast); this.toasts.set(id, toast); // Auto-dismiss const duration = options.duration || 5000; const progressBar = toast.querySelector('div.h-full'); setTimeout(() => { if (progressBar) progressBar.style.width = '0%'; }, 100); const dismissTimer = setTimeout(() => { this.dismiss(id); }, duration); // Manual dismiss toast.querySelector('[data-dismiss-toast]').addEventListener('click', () => { clearTimeout(dismissTimer); this.dismiss(id); }); // Action click const actionBtn = toast.querySelector('[data-url]'); if (actionBtn) { actionBtn.addEventListener('click', (e) => { e.stopPropagation(); window.location.href = actionBtn.dataset.url; this.dismiss(id); }); } // Hover pause toast.addEventListener('mouseenter', () => { if (progressBar) progressBar.style.transition = 'none'; }); toast.addEventListener('mouseleave', () => { if (progressBar) { const currentWidth = parseFloat(progressBar.style.width); progressBar.style.transition = `width ${currentWidth/100 * duration}ms linear`; progressBar.style.width = '0%'; } }); } dismiss(id) { const toast = this.toasts.get(id); if (!toast) return; toast.classList.add('animate-fade-out-down'); setTimeout(() => { toast.remove(); this.toasts.delete(id); }, 300); } timeAgo(timestamp) { const now = new Date(); const diff = Math.floor((now - new Date(timestamp)) / 1000); if (diff < 60) return 'à l\'instant'; if (diff < 3600) return `${Math.floor(diff/60)}m ago`; if (diff < 86400) return `${Math.floor(diff/3600)}h ago`; return `${Math.floor(diff/86400)}j ago`; } } // Initialize const toastSystem = new ToastSystem(); // Handle flash notifications @if (session('toast')) document.addEventListener('DOMContentLoaded', () => { toastSystem.show(@json(session('toast'))); }); @endif // Handle AJAX notifications window.showToast = (options) => toastSystem.show(options); window.dismissToast = (id) => toastSystem.dismiss(id); // Animation classes document.styleSheets[0].insertRule(` @keyframes fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } } @keyframes fade-out-down { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(20px); } } .animate-fade-in-up { animation: fade-in-up 0.3s ease-out; } .animate-fade-out-down { animation: fade-out-down 0.3s ease-in; } `); </script> @endpush <!-- Main Content --> <main class="cuni-main"> @if (session('success')) <div class="alert-cuni success"> <i class="bi bi-check-circle-fill"></i> <div>{{ session('success') }}</div> </div> @endif @if (session('error')) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div>{{ session('error') }}</div> </div> @endif @yield('content') </main> <!-- Footer --> <footer class="cuni-footer"> <div class="footer-content"> <div> <p>&copy; {{ date('Y') }} CuniApp Élevage - Tous droits réservés</p> <div class="footer-stats"> <div class="footer-stat"> <i class="bi bi-clock"></i> <span>Dernière connexion: {{ now()->format('d/m/Y H:i') }}</span> </div> <div class="footer-stat"> <i class="bi bi-server"></i> <span>Version: {{ config('app.version', '1.0.0') }}</span> </div> </div> </div> <div class="footer-links"> <a href="#"><i class="bi bi-book"></i> Documentation</a> <a href="#"><i class="bi bi-headset"></i> Support</a> <a href="#"><i class="bi bi-shield-check"></i> Confidentialité</a> </div> </div> </footer> <script> // Tab functionality document.querySelectorAll('.tab-btn').forEach(btn => { btn.addEventListener('click', function() { const tabId = this.getAttribute('data-tab'); document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active')); document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active')); this.classList.add('active'); document.getElementById(tabId).classList.add('active'); }); }); function toggleDropdown() { const menu = document.getElementById('dropdownMenu'); menu.classList.toggle('show'); } // Fermer le menu si on clique ailleurs sur la page window.onclick = function(event) { if (!event.target.closest('#userDropdown')) { const dropdowns = document.getElementsByClassName("dropdown-menu-custom"); for (let i = 0; i < dropdowns.length; i++) { let openDropdown = dropdowns[i]; if (openDropdown.classList.contains('show')) { openDropdown.classList.remove('show'); } } } } // Mobile menu toggle const mobileMenu = document.getElementById('mobileMenu'); const mobileToggle = document.getElementById('mobileMenuToggle'); const closeMenu = document.getElementById('closeMobileMenu'); if (mobileToggle && closeMenu && mobileMenu) { mobileToggle.addEventListener('click', () => { mobileMenu.classList.remove('-translate-x-full'); document.body.style.overflow = 'hidden'; }); closeMenu.addEventListener('click', () => { mobileMenu.classList.add('-translate-x-full'); document.body.style.overflow = ''; }); // Close when clicking outside menu content mobileMenu.addEventListener('click', (e) => { if (e.target === mobileMenu) { mobileMenu.classList.add('-translate-x-full'); document.body.style.overflow = ''; } }); // Close on ESC key document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && !mobileMenu.classList.contains('-translate-x-full')) { mobileMenu.classList.add('-translate-x-full'); document.body.style.overflow = ''; } }); } </script> <!-- Global Modal System --> @include('components.modal-system') @if (session('verification_pending')) <script> document.addEventListener('DOMContentLoaded', function() { setTimeout(() => { openVerificationModal('{{ session('verification_email') }}'); }, 500); }); </script> @endif </body> </html>

File: resources/views/layouts/guest.blade.php
---
<!DOCTYPE html> <html lang="{{ str_replace('_', '-', app()->getLocale()) }}"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="csrf-token" content="{{ csrf_token() }}"> <title>{{ config('app.name', 'Laravel') }}</title> <!-- Fonts --> <link rel="preconnect" href="https://fonts.bunny.net"> <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" /> <!-- Scripts --> @vite(['resources/css/app.css', 'resources/js/app.js']) </head> <body class="font-sans text-gray-900 antialiased"> <div class="min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-gray-100"> <div> <a href="/"> <x-application-logo class="w-20 h-20 fill-current text-gray-500" /> </a> </div> <div class="w-full sm:max-w-md mt-6 px-6 py-4 bg-white shadow-md overflow-hidden sm:rounded-lg"> {{ $slot }} </div> </div> </body> </html>

File: resources/views/layouts/navigation.blade.php
---
<nav x-data="{ open: false }" class="bg-white border-b border-gray-100"> <!-- Primary Navigation Menu --> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"> <div class="flex justify-between h-16"> <div class="flex"> <!-- Logo --> <div class="shrink-0 flex items-center"> <a href="{{ route('dashboard') }}"> <x-application-logo class="block h-9 w-auto fill-current text-gray-800" /> </a> </div> <!-- Navigation Links --> <div class="hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"> <x-nav-link :href="route('dashboard')" :active="request()->routeIs('dashboard')"> {{ __('Dashboard') }} </x-nav-link> </div> </div> <!-- Settings Dropdown --> <div class="hidden sm:flex sm:items-center sm:ms-6"> <x-dropdown align="right" width="48"> <x-slot name="trigger"> <button class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150"> <div>{{ Auth::user()->name }}</div> <div class="ms-1"> <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /> </svg> </div> </button> </x-slot> <x-slot name="content"> <x-dropdown-link :href="route('profile.edit')"> {{ __('Profile') }} </x-dropdown-link> <!-- Authentication --> <form method="POST" action="{{ route('logout') }}"> @csrf <x-dropdown-link :href="route('logout')" onclick="event.preventDefault(); this.closest('form').submit();"> {{ __('Log Out') }} </x-dropdown-link> </form> </x-slot> </x-dropdown> </div> <!-- Hamburger --> <div class="-me-2 flex items-center sm:hidden"> <button @click="open = ! open" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"> <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24"> <path :class="{'hidden': open, 'inline-flex': ! open }" class="inline-flex" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /> <path :class="{'hidden': ! open, 'inline-flex': open }" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /> </svg> </button> </div> </div> </div> <!-- Responsive Navigation Menu --> <div :class="{'block': open, 'hidden': ! open}" class="hidden sm:hidden"> <div class="pt-2 pb-3 space-y-1"> <x-responsive-nav-link :href="route('dashboard')" :active="request()->routeIs('dashboard')"> {{ __('Dashboard') }} </x-responsive-nav-link> </div> <!-- Responsive Settings Options --> <div class="pt-4 pb-1 border-t border-gray-200"> <div class="px-4"> <div class="font-medium text-base text-gray-800">{{ Auth::user()->name }}</div> <div class="font-medium text-sm text-gray-500">{{ Auth::user()->email }}</div> </div> <div class="mt-3 space-y-1"> <x-responsive-nav-link :href="route('profile.edit')"> {{ __('Profile') }} </x-responsive-nav-link> <!-- Authentication --> <form method="POST" action="{{ route('logout') }}"> @csrf <x-responsive-nav-link :href="route('logout')" onclick="event.preventDefault(); this.closest('form').submit();"> {{ __('Log Out') }} </x-responsive-nav-link> </form> </div> </div> </div> </nav>

File: resources/views/males/create.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Nouveau Mâle - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-plus-circle"></i> Nouveau Mâle </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('males.index') }}">Mâles</a> <span>/</span> <span>Nouveau</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-info-circle"></i> Informations du Mâle </h3> </div> <div class="card-body"> <form action="{{ route('males.store') }}" method="POST" id="maleForm"> @csrf <div class="settings-grid"> <div class="form-group"> <label class="form-label">Code *</label> <div class="code-generator"> <input type="text" name="code" id="codeInput" class="form-control @error('code') is-invalid @enderror" value="{{ old('code', $suggestedCode) }}" required aria-describedby="codeHelp" data-check-url="{{ route('males.check-code') }}" > <small id="codeHelp" class="form-text"> ✨ Code généré automatiquement (<span id="nextCode">{{ $suggestedCode }}</span>). Modifiable si unique. </small> <div id="codeValidation" class="invalid-feedback mt-1" style="display: none;"></div> @error('code') <div class="invalid-feedback d-block mt-1"> <i class="bi bi-exclamation-triangle-fill"></i> {{ $message }} </div> @enderror </div> </div> <div class="form-group"> <label class="form-label">Nom *</label> <input type="text" name="nom" class="form-control @error('nom') is-invalid @enderror" value="{{ old('nom') }}" required placeholder="Ex: Max"> @error('nom') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> <div class="form-group"> <label class="form-label">Race</label> <input type="text" name="race" class="form-control @error('race') is-invalid @enderror" value="{{ old('race') }}" placeholder="Ex: Californien, Blanc de Vienne"> @error('race') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> <div class="form-group"> <label class="form-label">Origine *</label> <select name="origine" class="form-select @error('origine') is-invalid @enderror" required> <option value="">-- Sélectionner --</option> <option value="Interne" {{ old('origine') == 'Interne' ? 'selected' : '' }}>Interne</option> <option value="Achat" {{ old('origine') == 'Achat' ? 'selected' : '' }}>Achat</option> </select> @error('origine') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> <div class="form-group"> <label class="form-label">Date de naissance</label> <input type="date" name="date_naissance" class="form-control @error('date_naissance') is-invalid @enderror" value="{{ old('date_naissance') }}"> @error('date_naissance') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> <div class="form-group"> <label class="form-label">État *</label> <select name="etat" class="form-select @error('etat') is-invalid @enderror" required> <option value="Active" {{ old('etat') == 'Active' ? 'selected' : '' }}>Actif</option> <option value="Inactive" {{ old('etat') == 'Inactive' ? 'selected' : '' }}>Repos</option> <option value="Malade" {{ old('etat') == 'Malade' ? 'selected' : '' }}>Malade</option> </select> @error('etat') <div class="invalid-feedback">{{ $message }}</div> @enderror </div> </div> <div style="margin-top: 24px; display: flex; gap: 12px;"> <button type="submit" class="btn-cuni primary" id="submitBtn"> <i class="bi bi-check-circle"></i> Enregistrer </button> <a href="{{ route('males.index') }}" class="btn-cuni secondary"> <i class="bi bi-x-circle"></i> Annuler </a> </div> </form> </div> </div> @endsection @push('styles') <style> .code-generator { position: relative; } .code-generator .form-control { padding-right: 40px; font-family: 'JetBrains Mono', monospace; font-weight: 600; letter-spacing: 1px; font-size: 1.05rem; } .code-generator .form-control:focus { border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-subtle); } .code-generator .form-text { font-size: 0.85rem; color: var(--accent-cyan); margin-top: 4px; display: flex; align-items: center; gap: 4px; font-weight: 500; } .code-generator .form-text #nextCode { background: var(--primary-subtle); color: var(--primary); padding: 1px 6px; border-radius: 4px; font-weight: 700; letter-spacing: 0.5px; } .invalid-feedback { color: var(--accent-red); font-size: 0.875rem; margin-top: 0.25rem; display: flex; align-items: center; gap: 4px; } .form-control.is-invalid, .form-select.is-invalid { border-color: var(--accent-red); padding-right: 32px; } .form-control.is-valid { border-color: var(--accent-green); background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 16px 12px; padding-right: 32px; } </style> @endpush @push('scripts') <script> document.addEventListener('DOMContentLoaded', function() { const codeInput = document.getElementById('codeInput'); const codeValidation = document.getElementById('codeValidation'); const submitBtn = document.getElementById('submitBtn'); const checkUrl = codeInput.dataset.checkUrl; let validationTimeout; // Real-time uniqueness check codeInput.addEventListener('input', function() { clearTimeout(validationTimeout); codeValidation.style.display = 'none'; codeInput.classList.remove('is-valid', 'is-invalid'); if (this.value.length < 3) return; validationTimeout = setTimeout(() => { fetch(`${checkUrl}?code=${encodeURIComponent(this.value)}`) .then(response => response.json()) .then(data => { if (!data.available) { codeValidation.innerHTML = `<i class="bi bi-x-circle-fill"></i> Ce code existe déjà !`; codeValidation.style.display = 'block'; codeInput.classList.add('is-invalid'); codeInput.classList.remove('is-valid'); submitBtn.disabled = true; } else { codeValidation.innerHTML = `<i class="bi bi-check-circle-fill"></i> Code disponible`; codeValidation.style.display = 'block'; codeValidation.style.color = 'var(--accent-green)'; codeInput.classList.add('is-valid'); codeInput.classList.remove('is-invalid'); submitBtn.disabled = false; } }) .catch(error => { console.error('Validation error:', error); codeInput.classList.remove('is-valid', 'is-invalid'); submitBtn.disabled = false; }); }, 500); }); // Re-enable button on page load if valid if (!codeInput.classList.contains('is-invalid')) { submitBtn.disabled = false; } // Form submission safety check document.getElementById('maleForm').addEventListener('submit', function(e) { if (codeInput.classList.contains('is-invalid')) { e.preventDefault(); codeValidation.scrollIntoView({ behavior: 'smooth', block: 'center' }); } }); }); </script> @endpush

File: resources/views/males/edit.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Modifier Mâle - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-pencil-square"></i> Modifier le Mâle </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('males.index') }}">Mâles</a> <span>/</span> <span>Modification</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-info-circle"></i> Informations du Mâle </h3> <a href="{{ route('males.index') }}" class="btn-cuni sm secondary"> <i class="bi bi-arrow-left"></i> Retour </a> </div> <div class="card-body"> <form action="{{ route('males.update', $male->id) }}" method="POST"> @csrf @method('PUT') <div class="settings-grid"> <div class="form-group"> <label class="form-label">Code *</label> <input type="text" name="code" class="form-control" value="{{ old('code', $male->code) }}" required> </div> <div class="form-group"> <label class="form-label">Nom *</label> <input type="text" name="nom" class="form-control" value="{{ old('nom', $male->nom) }}" required> </div> <div class="form-group"> <label class="form-label">Race</label> <input type="text" name="race" class="form-control" value="{{ old('race', $male->race) }}"> </div> <div class="form-group"> <label class="form-label">Origine *</label> <select name="origine" class="form-select" required> <option value="Interne" {{ old('origine', $male->origine) == 'Interne' ? 'selected' : '' }}>Interne</option> <option value="Achat" {{ old('origine', $male->origine) == 'Achat' ? 'selected' : '' }}>Achat</option> </select> </div> <div class="form-group"> <label class="form-label">Date de naissance</label> <input type="date" name="date_naissance" class="form-control" value="{{ old('date_naissance', $male->date_naissance) }}"> </div> <div class="form-group"> <label class="form-label">État *</label> <select name="etat" class="form-select" required> <option value="Active" {{ old('etat', $male->etat) == 'Active' ? 'selected' : '' }}>Actif</option> <option value="Inactive" {{ old('etat', $male->etat) == 'Inactive' ? 'selected' : '' }}>Repos</option> <option value="Malade" {{ old('etat', $male->etat) == 'Malade' ? 'selected' : '' }}>Malade</option> </select> </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Enregistrer les modifications </button> </div> </form> </div> </div> @endsection

File: resources/views/males/index.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Mâles - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-arrow-up-right-square"></i> Gestion des Mâles </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Mâles</span> </div> </div> <a href="{{ route('males.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter un mâle </a> </div> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-list-ul"></i> Liste des Mâles </h3> </div> <div class="card-body"> <div class="table-responsive"> <table class="table table-hover align-middle mb-0"> <thead class="bg-light"> <tr> <th class="ps-4 text-uppercase text-muted fw-semibold small">Code</th> <th class="text-uppercase text-muted fw-semibold small">Nom</th> <th class="text-uppercase text-muted fw-semibold small">Race</th> <th class="text-uppercase text-muted fw-semibold small">Origine</th> <th class="text-uppercase text-muted fw-semibold small">Naissance</th> <th class="text-uppercase text-muted fw-semibold small">État</th> <th class="pe-4 text-end text-uppercase text-muted fw-semibold small">Actions</th> </tr> </thead> <tbody> @forelse($males as $m) <tr class="border-bottom border-light"> <td class="ps-4 fw-semibold text-dark">{{ $m->code }}</td> <td>{{ $m->nom }}</td> <td> <span class="badge" style="background: rgba(59, 130, 246, 0.1); color: #3B82F6;"> {{ $m->race ?? '-' }} </span> </td> <td class="text-muted">{{ $m->origine }}</td> <td class="text-muted">{{ date('d/m/Y', strtotime($m->date_naissance)) }}</td> <td> <form action="{{ route('males.toggleEtat', $m->id) }}" method="POST"> @csrf @method('PATCH') <button type="submit" class="badge border-0 status-{{ strtolower($m->etat) }}"> {{ $m->etat }} </button> </form> </td> <td class="pe-4"> <div class="action-buttons"> <a href="{{ route('males.edit', $m->id) }}" class="btn-cuni sm secondary" title="Modifier"> <i class="bi bi-pencil"></i> </a> <form action="{{ route('males.destroy', $m->id) }}" method="POST" style="display:inline;"> @csrf @method('DELETE') <button type="submit" class="btn-cuni sm danger" title="Supprimer" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce mâle ?')"> <i class="bi bi-trash"></i> </button> </form> </div> </td> </tr> @empty <tr> <td colspan="7"> <div class="table-empty-state"> <i class="bi bi-inbox"></i> <p>Aucun mâle enregistré pour le moment</p> <a href="{{ route('males.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter un mâle </a> </div> </td> </tr> @endforelse </tbody> </table> </div> @if ($males->hasPages()) <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--surface-border);"> <div class="text-muted" style="font-size: 13px;"> Affichage de <strong>{{ $males->firstItem() }}</strong> à <strong>{{ $males->lastItem() }}</strong> sur <strong>{{ $males->total() }}</strong> mâles </div> <nav> {{ $males->links('vendor.pagination.bootstrap-5-sm') }} </nav> </div> @endif </div> </div> @endsection

File: resources/views/mises_bas/create.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Nouvelle Mise Bas - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-plus-circle"></i> Nouvelle Mise Bas </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('mises-bas.index') }}">Mises Bas</a> <span>/</span> <span>Nouveau</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-egg"></i> Informations de la Mise Bas </h3> <a href="{{ route('mises-bas.index') }}" class="btn-cuni sm secondary"> <i class="bi bi-arrow-left"></i> Retour </a> </div> <div class="card-body"> <form action="{{ route('mises-bas.store') }}" method="POST"> @csrf <div class="settings-grid"> <!-- Section: Femelle --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-arrow-down-right-square"></i> Femelle </h4> <div class="form-group"> <label class="form-label">Femelle *</label> <select name="femelle_id" class="form-select" required> <option value="">-- Sélectionner une femelle --</option> @foreach($femelles as $femelle) <option value="{{ $femelle->id }}" {{ old('femelle_id') == $femelle->id ? 'selected' : '' }}> {{ $femelle->nom }} ({{ $femelle->code }}) @if($femelle->etat === 'Gestante') <span style="color: var(--accent-orange);">● Gestante</span> @endif </option> @endforeach </select> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Privilégiez les femelles en état "Gestante" </small> </div> </div> <!-- Section: Date --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-calendar"></i> Date </h4> <div class="form-group"> <label class="form-label">Date de mise bas *</label> <input type="date" name="date_mise_bas" class="form-control" value="{{ old('date_mise_bas', date('Y-m-d')) }}" required> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-clock"></i> Date réelle de la naissance </small> </div> </div> <!-- Section: Portée --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-collection"></i> Portée </h4> <div class="form-group"> <label class="form-label">Jeunes vivants *</label> <input type="number" name="nb_vivant" class="form-control" value="{{ old('nb_vivant', 1) }}" required min="1" max="20"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Minimum 1 lapereau vivant </small> </div> <div class="form-group"> <label class="form-label">Morts-nés</label> <input type="number" name="nb_mort_ne" class="form-control" value="{{ old('nb_mort_ne', 0) }}" min="0" max="20"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Optionnel - laissez 0 si aucun </small> </div> <div class="form-group"> <label class="form-label">Total de la portée</label> <input type="text" id="total_portee" class="form-control" readonly style="background: var(--surface-alt); font-weight: 600;"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-calculator"></i> Calculé automatiquement </small> </div> </div> <!-- Section: Sevrage --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-clock-history"></i> Sevrage </h4> <div class="form-group"> <label class="form-label">Date de sevrage (prévue)</label> <input type="date" name="date_sevrage" id="date_sevrage" class="form-control" value="{{ old('date_sevrage') }}"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Recommandé: 6 semaines après la naissance </small> </div> <div class="form-group"> <label class="form-label">Poids moyen au sevrage (kg)</label> <input type="number" step="0.01" name="poids_moyen_sevrage" class="form-control" value="{{ old('poids_moyen_sevrage') }}" min="0" max="5" placeholder="0.00"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Poids moyen par lapereau </small> </div> </div> </div> <!-- Action Buttons --> <div style="margin-top: 32px; display: flex; gap: 12px; padding-top: 24px; border-top: 1px solid var(--surface-border);"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Enregistrer la mise bas </button> <a href="{{ route('mises-bas.index') }}" class="btn-cuni secondary"> <i class="bi bi-x-circle"></i> Annuler </a> </div> </form> </div> </div> <script> document.addEventListener('DOMContentLoaded', function() { // Auto-calculate total portée const nbVivantInput = document.querySelector('input[name="nb_vivant"]'); const nbMortNeInput = document.querySelector('input[name="nb_mort_ne"]'); const totalPorteeInput = document.getElementById('total_portee'); function updateTotal() { const vivant = parseInt(nbVivantInput.value) || 0; const mortNe = parseInt(nbMortNeInput.value) || 0; totalPorteeInput.value = vivant + mortNe; } nbVivantInput.addEventListener('input', updateTotal); nbMortNeInput.addEventListener('input', updateTotal); updateTotal(); // Initial calculation // Auto-calculate sevrage date (6 weeks after birth) const dateMiseBasInput = document.querySelector('input[name="date_mise_bas"]'); const dateSevrageInput = document.getElementById('date_sevrage'); dateMiseBasInput.addEventListener('change', function() { if (this.value) { const birthDate = new Date(this.value); const sevrageDate = new Date(birthDate); sevrageDate.setDate(sevrageDate.getDate() + 42); // 6 weeks = 42 days dateSevrageInput.value = sevrageDate.toISOString().split('T')[0]; } }); // Trigger initial sevrage date calculation if birth date exists if (dateMiseBasInput.value) { dateMiseBasInput.dispatchEvent(new Event('change')); } }); </script> <style> .form-section { background: var(--surface-alt); border-radius: var(--radius-lg); padding: 20px; border: 1px solid var(--surface-border); } .section-subtitle { font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; } .section-subtitle i { color: var(--primary); } .form-group:last-child { margin-bottom: 0; } @media (max-width: 768px) { .settings-grid { grid-template-columns: 1fr; } .form-section { padding: 16px; } } </style> @endsection

File: resources/views/mises_bas/edit.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Modifier Mise Bas - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-pencil-square"></i> Modifier la Mise Bas </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('mises-bas.index') }}">Mises Bas</a> <span>/</span> <span>Modification</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-egg"></i> Informations de la Mise Bas </h3> <a href="{{ route('mises-bas.index') }}" class="btn-cuni sm secondary"> <i class="bi bi-arrow-left"></i> Retour </a> </div> <div class="card-body"> <form action="{{ route('mises-bas.update', $miseBas->id) }}" method="POST"> @csrf @method('PUT') <div class="settings-grid"> <div class="form-group"> <label class="form-label">Femelle *</label> <select name="femelle_id" class="form-select" required> @foreach($femelles as $femelle) <option value="{{ $femelle->id }}" {{ $miseBas->femelle_id == $femelle->id ? 'selected' : '' }}> {{ $femelle->nom }} ({{ $femelle->code }}) </option> @endforeach </select> </div> <div class="form-group"> <label class="form-label">Date de mise bas *</label> <input type="date" name="date_mise_bas" class="form-control" value="{{ old('date_mise_bas', $miseBas->date_mise_bas) }}" required> </div> <div class="form-group"> <label class="form-label">Jeunes vivants *</label> <input type="number" name="nb_vivant" class="form-control" value="{{ old('nb_vivant', $miseBas->nb_vivant) }}" required min="1"> </div> <div class="form-group"> <label class="form-label">Morts-nés</label> <input type="number" name="nb_mort_ne" class="form-control" value="{{ old('nb_mort_ne', $miseBas->nb_mort_ne) }}" min="0"> </div> <div class="form-group"> <label class="form-label">Date de sevrage</label> <input type="date" name="date_sevrage" class="form-control" value="{{ old('date_sevrage', $miseBas->date_sevrage) }}"> </div> <div class="form-group"> <label class="form-label">Poids moyen au sevrage (kg)</label> <input type="number" step="0.01" name="poids_moyen_sevrage" class="form-control" value="{{ old('poids_moyen_sevrage', $miseBas->poids_moyen_sevrage) }}"> </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Enregistrer les modifications </button> </div> </form> </div> </div> @endsection

File: resources/views/mises_bas/index.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Mises Bas - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-egg"></i> Gestion des Mises Bas </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Mises Bas</span> </div> </div> <a href="{{ route('mises-bas.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter une mise bas </a> </div> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-list-ul"></i> Liste des Mises Bas </h3> </div> <div class="card-body"> <div class="table-responsive"> <table class="table table-hover align-middle mb-0"> <thead class="bg-light"> <tr> <th class="ps-4 text-uppercase text-muted fw-semibold small">Femelle</th> <th class="text-uppercase text-muted fw-semibold small">Date Mise Bas</th> <th class="text-uppercase text-muted fw-semibold small">Jeunes Vivants</th> <th class="text-uppercase text-muted fw-semibold small">Morts-nés</th> <th class="text-uppercase text-muted fw-semibold small">Total</th> <th class="text-uppercase text-muted fw-semibold small">Sevrage</th> <th class="pe-4 text-end text-uppercase text-muted fw-semibold small">Actions</th> </tr> </thead> <tbody> @forelse($misesBas as $miseBas) <tr class="border-bottom border-light"> <td class="ps-4 fw-semibold text-dark"> {{ $miseBas->femelle->nom ?? 'N/A' }} <small class="text-muted">({{ $miseBas->femelle->code ?? '-' }})</small> </td> <td class="text-muted"> {{ date('d/m/Y', strtotime($miseBas->date_mise_bas)) }} </td> <td> <span class="badge" style="background: rgba(16, 185, 129, 0.1); color: #10B981;"> {{ $miseBas->nb_vivant }} </span> </td> <td class="text-muted"> {{ $miseBas->nb_mort_ne ?? 0 }} </td> <td class="fw-semibold"> {{ ($miseBas->nb_vivant ?? 0) + ($miseBas->nb_mort_ne ?? 0) }} </td> <td class="text-muted"> {{ $miseBas->date_sevrage ? date('d/m/Y', strtotime($miseBas->date_sevrage)) : '-' }} </td> <td class="pe-4"> <div class="action-buttons"> <a href="{{ route('mises-bas.edit', $miseBas->id) }}" class="btn-cuni sm secondary" title="Modifier"> <i class="bi bi-pencil"></i> </a> <form action="{{ route('mises-bas.destroy', $miseBas->id) }}" method="POST" style="display:inline;"> @csrf @method('DELETE') <button type="submit" class="btn-cuni sm danger" title="Supprimer" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette mise bas ?')"> <i class="bi bi-trash"></i> </button> </form> </div> </td> </tr> @empty <tr> <td colspan="7"> <div class="table-empty-state"> <i class="bi bi-inbox"></i> <p>Aucune mise bas enregistrée pour le moment</p> <a href="{{ route('mises-bas.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter une mise bas </a> </div> </td> </tr> @endforelse </tbody> </table> </div> @if($misesBas->hasPages()) <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--surface-border);"> <div class="text-muted" style="font-size: 13px;"> Affichage de <strong>{{ $misesBas->firstItem() }}</strong> à <strong>{{ $misesBas->lastItem() }}</strong> sur <strong>{{ $misesBas->total() }}</strong> mises bas </div> <nav> {{ $misesBas->links('vendor.pagination.bootstrap-5-sm') }} </nav> </div> @endif </div> </div> @endsection

File: resources/views/notifications/index.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Notifications - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-bell-fill"></i> Notifications </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Notifications</span> </div> </div> <div class="flex gap-3"> <form action="{{ route('notifications.read-all') }}" method="POST"> @csrf <button type="submit" class="btn-cuni secondary"> <i class="bi bi-check2-all"></i> Tout marquer comme lu </button> </form> </div> </div> @if($notifications->isEmpty()) <div class="cuni-card"> <div class="card-body text-center py-16"> <div class="text-6xl mb-4 opacity-20"> <i class="bi bi-bell-slash-fill"></i> </div> <h3 class="text-xl font-bold text-gray-700 mb-2">Aucune notification</h3> <p class="text-gray-500">Vous n'avez aucune notification pour le moment</p> </div> </div> @else <div class="grid grid-cols-1 lg:grid-cols-3 gap-6"> <!-- Stats Cards --> <div class="lg:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"> @php $stats = [ ['label' => 'Non lues', 'count' => $unreadCount, 'color' => 'red', 'icon' => 'bi-envelope'], ['label' => 'Succès', 'count' => $notifications->where('type', 'success')->count(), 'color' => 'green', 'icon' => 'bi-check-circle'], ['label' => 'Alertes', 'count' => $notifications->where('type', 'warning')->count(), 'color' => 'amber', 'icon' => 'bi-exclamation-triangle'], ['label' => 'Infos', 'count' => $notifications->where('type', 'info')->count(), 'color' => 'blue', 'icon' => 'bi-info-circle'], ]; @endphp @foreach($stats as $stat) <div class="cuni-card"> <div class="card-body p-4"> <div class="flex items-center justify-between"> <div> <p class="text-sm text-gray-500">{{ $stat['label'] }}</p> <p class="text-2xl font-bold mt-1 text-gray-800">{{ $stat['count'] }}</p> </div> <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background: rgba({{ $stat['color'] === 'red' ? '239, 68, 68' : ($stat['color'] === 'green' ? '16, 185, 129' : ($stat['color'] === 'amber' ? '245, 158, 11' : '59, 130, 246')) }}, 0.1)"> <i class="bi {{ $stat['icon'] }} text-{{ $stat['color'] }}-500 text-lg"></i> </div> </div> </div> </div> @endforeach </div> <!-- Notifications List --> <div class="lg:col-span-3"> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-list-ul"></i> Historique des notifications </h3> <span class="badge" style="background: rgba(239, 68, 68, 0.1); color: #EF4444;"> {{ $unreadCount }} non lues </span> </div> <div class="divide-y divide-gray-100"> @foreach($notifications as $notif) <div class="p-4 hover:bg-gray-50 transition-colors {{ $notif->is_read ? 'opacity-75' : 'bg-blue-50 border-l-4 border-blue-500' }}"> <div class="flex items-start gap-3"> <div class="mt-1 flex-shrink-0"> <div class="w-9 h-9 rounded-full flex items-center justify-center" style="background: rgba( {{ $notif->type === 'success' ? '16, 185, 129' : ($notif->type === 'warning' ? '245, 158, 11' : ($notif->type === 'error' ? '239, 68, 68' : '59, 130, 246')) }}, 0.1)"> <i class="bi {{ $notif->icon }} text-lg {{ $notif->type === 'success' ? 'text-green-500' : ($notif->type === 'warning' ? 'text-amber-500' : ($notif->type === 'error' ? 'text-red-500' : 'text-blue-500')) }}"></i> </div> </div> <div class="flex-1 min-w-0"> <div class="flex justify-between items-start"> <h4 class="font-bold text-gray-800">{{ $notif->title }}</h4> <span class="text-xs text-gray-500 whitespace-nowrap"> {{ $notif->created_at->diffForHumans() }} </span> </div> <p class="text-gray-600 mt-1 text-sm">{{ $notif->message }}</p> @if($notif->action_url) <div class="mt-2 flex items-center gap-2"> <a href="{{ $notif->action_url }}" class="text-xs font-medium text-blue-600 hover:text-blue-800 transition-colors flex items-center gap-1 group"> Voir les détails <i class="bi bi-arrow-right group-hover:translate-x-1 transition-transform"></i> </a> @if(!$notif->is_read) <span class="text-xs text-blue-500 font-medium">• Nouveau</span> @endif </div> @endif </div> <div class="flex flex-col items-end space-y-1"> @if(!$notif->is_read) <form action="{{ route('notifications.read', $notif->id) }}" method="POST"> @csrf <button type="submit" class="text-xs text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1"> <i class="bi bi-check-circle"></i> Marquer lu </button> </form> @endif <form action="{{ route('notifications.destroy', $notif->id) }}" method="POST" class="inline"> @csrf @method('DELETE') <button type="submit" class="text-gray-400 hover:text-red-500 transition-colors" onclick="return confirm('Supprimer cette notification ?')"> <i class="bi bi-trash text-sm"></i> </button> </form> </div> </div> </div> @endforeach </div> @if($notifications->hasPages()) <div class="px-4 py-3 border-t border-gray-200"> {{ $notifications->links('vendor.pagination.bootstrap-5-sm') }} </div> @endif </div> </div> </div> @endif @endsection @push('styles') <style> .cuni-card { transition: all 0.2s ease; } .cuni-card:hover { box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); } </style> @endpush

File: resources/views/profile/edit.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Profil - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-person-circle"></i> Mon Profil </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Profil</span> </div> </div> </div> <div class="tab-content show active" id="profile-tab"> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-person-circle"></i> Mon Profil Utilisateur </h3> </div> <div class="card-body"> <form action="{{ route('profile.update') }}" method="POST"> @csrf @method('PATCH') <div class="settings-grid"> <div class="form-group"> <label class="form-label">Nom complet *</label> <input type="text" name="name" class="form-control" value="{{ auth()->user()->name }}" required> </div> <div class="form-group"> <label class="form-label">Email *</label> <input type="email" name="email" class="form-control" value="{{ auth()->user()->email }}" required> </div> <div class="form-group"> <label class="form-label">Mot de passe actuel</label> <input type="password" name="current_password" class="form-control" placeholder="••••••••"> </div> <div class="form-group"> <label class="form-label">Nouveau mot de passe</label> <input type="password" name="new_password" class="form-control" placeholder="••••••••"> </div> <div class="form-group"> <label class="form-label">Confirmer mot de passe</label> <input type="password" name="new_password_confirmation" class="form-control" placeholder="••••••••"> </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-save"></i> Mettre à jour le profil </button> </div> </form> </div> </div> </div> <style> /* Form Enhancements */ .form-control:focus, .form-select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-subtle); } /* Checkbox Styling */ input[type="checkbox"] { accent-color: var(--primary); cursor: pointer; } #profile-tab { display: block !important; visibility: visible !important; opacity: 1 !important; } /* .cuni-card { border: 2px solid red; } */ @media (max-width: 768px) { .settings-grid { grid-template-columns: 1fr; } } </style> @endsection

File: resources/views/profile/partials/delete-user-form.blade.php
---
<section class="space-y-6"> <header> <h2 class="text-lg font-medium text-gray-900"> {{ __('Delete Account') }} </h2> <p class="mt-1 text-sm text-gray-600"> {{ __('Once your account is deleted, all of its resources and data will be permanently deleted. Before deleting your account, please download any data or information that you wish to retain.') }} </p> </header> <x-danger-button x-data="" x-on:click.prevent="$dispatch('open-modal', 'confirm-user-deletion')" >{{ __('Delete Account') }}</x-danger-button> <x-modal name="confirm-user-deletion" :show="$errors->userDeletion->isNotEmpty()" focusable> <form method="post" action="{{ route('profile.destroy') }}" class="p-6"> @csrf @method('delete') <h2 class="text-lg font-medium text-gray-900"> {{ __('Are you sure you want to delete your account?') }} </h2> <p class="mt-1 text-sm text-gray-600"> {{ __('Once your account is deleted, all of its resources and data will be permanently deleted. Please enter your password to confirm you would like to permanently delete your account.') }} </p> <div class="mt-6"> <x-input-label for="password" value="{{ __('Password') }}" class="sr-only" /> <x-text-input id="password" name="password" type="password" class="mt-1 block w-3/4" placeholder="{{ __('Password') }}" /> <x-input-error :messages="$errors->userDeletion->get('password')" class="mt-2" /> </div> <div class="mt-6 flex justify-end"> <x-secondary-button x-on:click="$dispatch('close')"> {{ __('Cancel') }} </x-secondary-button> <x-danger-button class="ms-3"> {{ __('Delete Account') }} </x-danger-button> </div> </form> </x-modal> </section>

File: resources/views/profile/partials/update-password-form.blade.php
---
<section> <header> <h2 class="text-lg font-medium text-gray-900"> {{ __('Update Password') }} </h2> <p class="mt-1 text-sm text-gray-600"> {{ __('Ensure your account is using a long, random password to stay secure.') }} </p> </header> <form method="post" action="{{ route('password.update') }}" class="mt-6 space-y-6"> @csrf @method('put') <div> <x-input-label for="update_password_current_password" :value="__('Current Password')" /> <x-text-input id="update_password_current_password" name="current_password" type="password" class="mt-1 block w-full" autocomplete="current-password" /> <x-input-error :messages="$errors->updatePassword->get('current_password')" class="mt-2" /> </div> <div> <x-input-label for="update_password_password" :value="__('New Password')" /> <x-text-input id="update_password_password" name="password" type="password" class="mt-1 block w-full" autocomplete="new-password" /> <x-input-error :messages="$errors->updatePassword->get('password')" class="mt-2" /> </div> <div> <x-input-label for="update_password_password_confirmation" :value="__('Confirm Password')" /> <x-text-input id="update_password_password_confirmation" name="password_confirmation" type="password" class="mt-1 block w-full" autocomplete="new-password" /> <x-input-error :messages="$errors->updatePassword->get('password_confirmation')" class="mt-2" /> </div> <div class="flex items-center gap-4"> <x-primary-button>{{ __('Save') }}</x-primary-button> @if (session('status') === 'password-updated') <p x-data="{ show: true }" x-show="show" x-transition x-init="setTimeout(() => show = false, 2000)" class="text-sm text-gray-600" >{{ __('Saved.') }}</p> @endif </div> </form> </section>

File: resources/views/profile/partials/update-profile-information-form.blade.php
---
<section> <header> <h2 class="text-lg font-medium text-gray-900"> {{ __('Profile Information') }} </h2> <p class="mt-1 text-sm text-gray-600"> {{ __("Update your account's profile information and email address.") }} </p> </header> <form id="send-verification" method="post" action="{{ route('verification.send') }}"> @csrf </form> <form method="post" action="{{ route('profile.update') }}" class="mt-6 space-y-6"> @csrf @method('patch') <div> <x-input-label for="name" :value="__('Name')" /> <x-text-input id="name" name="name" type="text" class="mt-1 block w-full" :value="old('name', $user->name)" required autofocus autocomplete="name" /> <x-input-error class="mt-2" :messages="$errors->get('name')" /> </div> <div> <x-input-label for="email" :value="__('Email')" /> <x-text-input id="email" name="email" type="email" class="mt-1 block w-full" :value="old('email', $user->email)" required autocomplete="username" /> <x-input-error class="mt-2" :messages="$errors->get('email')" /> @if ($user instanceof \Illuminate\Contracts\Auth\MustVerifyEmail && ! $user->hasVerifiedEmail()) <div> <p class="text-sm mt-2 text-gray-800"> {{ __('Your email address is unverified.') }} <button form="send-verification" class="underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"> {{ __('Click here to re-send the verification email.') }} </button> </p> @if (session('status') === 'verification-link-sent') <p class="mt-2 font-medium text-sm text-green-600"> {{ __('A new verification link has been sent to your email address.') }} </p> @endif </div> @endif </div> <div class="flex items-center gap-4"> <x-primary-button>{{ __('Save') }}</x-primary-button> @if (session('status') === 'profile-updated') <p x-data="{ show: true }" x-show="show" x-transition x-init="setTimeout(() => show = false, 2000)" class="text-sm text-gray-600" >{{ __('Saved.') }}</p> @endif </div> </form> </section>

File: resources/views/saillies/create.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Nouvelle Saillie - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-plus-circle"></i> Nouvelle Saillie </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('saillies.index') }}">Saillies</a> <span>/</span> <span>Nouveau</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-heart"></i> Informations de la Saillie </h3> </div> <div class="card-body"> <form action="{{ route('saillies.store') }}" method="POST"> @csrf <div class="settings-grid"> <div class="form-group"> <label class="form-label">Femelle *</label> <select name="femelle_id" class="form-select" required> <option value="">-- Sélectionner --</option> @foreach($femelles as $f) <option value="{{ $f->id }}">{{ $f->nom }} ({{ $f->code }})</option> @endforeach </select> </div> <div class="form-group"> <label class="form-label">Mâle *</label> <select name="male_id" class="form-select" required> <option value="">-- Sélectionner --</option> @foreach($males as $m) <option value="{{ $m->id }}">{{ $m->nom }} ({{ $m->code }})</option> @endforeach </select> </div> <div class="form-group"> <label class="form-label">Date de saillie *</label> <input type="date" name="date_saillie" class="form-control" required> </div> <div class="form-group"> <label class="form-label">Date de palpation</label> <input type="date" name="date_palpage" class="form-control"> </div> <div class="form-group"> <label class="form-label">Résultat de palpation</label> <select name="palpation_resultat" class="form-select"> <option value="">-- Non défini --</option> <option value="+">Positif (+)</option> <option value="-">Négatif (-)</option> </select> </div> </div> <div style="margin-top: 24px; display: flex; gap: 12px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Enregistrer </button> <a href="{{ route('saillies.index') }}" class="btn-cuni secondary"> <i class="bi bi-x-circle"></i> Annuler </a> </div> </form> </div> </div> @endsection

File: resources/views/saillies/edit.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Modifier Saillie - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-pencil-square"></i> Modifier la Saillie </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('saillies.index') }}">Saillies</a> <span>/</span> <span>Modification</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-heart"></i> Informations de la Saillie </h3> <a href="{{ route('saillies.index') }}" class="btn-cuni sm secondary"> <i class="bi bi-arrow-left"></i> Retour </a> </div> <div class="card-body"> <form action="{{ route('saillies.update', $saillie->id) }}" method="POST"> @csrf @method('PUT') <div class="settings-grid"> <div class="form-group"> <label class="form-label">Femelle *</label> <select name="femelle_id" class="form-select" required> @foreach($femelles as $f) <option value="{{ $f->id }}" {{ $saillie->femelle_id == $f->id ? 'selected' : '' }}> {{ $f->nom }} ({{ $f->code }}) </option> @endforeach </select> </div> <div class="form-group"> <label class="form-label">Mâle *</label> <select name="male_id" class="form-select" required> @foreach($males as $m) <option value="{{ $m->id }}" {{ $saillie->male_id == $m->id ? 'selected' : '' }}> {{ $m->nom }} ({{ $m->code }}) </option> @endforeach </select> </div> <div class="form-group"> <label class="form-label">Date de saillie *</label> <input type="date" name="date_saillie" class="form-control" value="{{ old('date_saillie', $saillie->date_saillie) }}" required> </div> <div class="form-group"> <label class="form-label">Date de palpation</label> <input type="date" name="date_palpage" class="form-control" value="{{ old('date_palpage', $saillie->date_palpage) }}"> </div> <div class="form-group"> <label class="form-label">Résultat de palpation</label> <select name="palpation_resultat" class="form-select"> <option value="">-- Non défini --</option> <option value="+" {{ $saillie->palpation_resultat == '+' ? 'selected' : '' }}>Positif (+)</option> <option value="-" {{ $saillie->palpation_resultat == '-' ? 'selected' : '' }}>Négatif (-)</option> </select> </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Enregistrer les modifications </button> </div> </form> </div> </div> @endsection

File: resources/views/saillies/index.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Saillies - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-heart"></i> Gestion des Saillies </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Saillies</span> </div> </div> <a href="{{ route('saillies.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Ajouter une saillie </a> </div> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-list-ul"></i> Liste des Saillies </h3> </div> <div class="card-body"> <div class="table-responsive"> <table class="table table-hover align-middle mb-0"> <thead class="bg-light"> <tr> <th class="ps-4 text-uppercase text-muted fw-semibold small">Femelle</th> <th class="text-uppercase text-muted fw-semibold small">Mâle</th> <th class="text-uppercase text-muted fw-semibold small">Date Saillie</th> <th class="text-uppercase text-muted fw-semibold small">Date Palpation</th> <th class="text-uppercase text-muted fw-semibold small">Résultat</th> <th class="pe-4 text-end text-uppercase text-muted fw-semibold small">Actions</th> </tr> </thead> <tbody> @forelse($saillies as $s) <tr class="border-bottom border-light"> <td class="ps-4 fw-semibold text-dark">{{ $s->femelle->nom ?? '-' }}</td> <td>{{ $s->male->nom ?? '-' }}</td> <td class="text-muted">{{ date('d/m/Y', strtotime($s->date_saillie)) }}</td> <td class="text-muted">{{ $s->date_palpage ? date('d/m/Y', strtotime($s->date_palpage)) : '-' }}</td> <td> @if($s->palpation_resultat === '+') <span class="badge" style="background: rgba(16, 185, 129, 0.1); color: #10B981;">Positif</span> @elseif($s->palpation_resultat === '-') <span class="badge" style="background: rgba(239, 68, 68, 0.1); color: #EF4444;">Négatif</span> @else <span class="badge" style="background: rgba(107, 114, 128, 0.1); color: #6B7280;">En attente</span> @endif </td> <td class="pe-4"> <div class="d-flex justify-content-end gap-2"> <a href="{{ route('saillies.edit', $s) }}" class="btn-cuni sm secondary" title="Modifier"> <i class="bi bi-pencil"></i> </a> <form action="{{ route('saillies.destroy', $s) }}" method="POST" style="display:inline;"> @csrf @method('DELETE') <button type="submit" class="btn-cuni sm danger" title="Supprimer" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette saillie ?')"> <i class="bi bi-trash"></i> </button> </form> </div> </td> </tr> @empty <tr> <td colspan="6" class="text-center text-muted py-4"> <i class="bi bi-inbox" style="font-size: 2rem;"></i> <p class="mt-2">Aucune saillie enregistrée</p> </td> </tr> @endforelse </tbody> </table> </div> @if($saillies->hasPages()) <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--surface-border);"> <div class="text-muted" style="font-size: 13px;"> Affichage de <strong>{{ $saillies->firstItem() }}</strong> à <strong>{{ $saillies->lastItem() }}</strong> sur <strong>{{ $saillies->total() }}</strong> saillies </div> <nav> {{ $saillies->links('vendor.pagination.bootstrap-5-sm') }} </nav> </div> @endif </div> </div> @endsection

File: resources/views/sales/create.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Nouvelle Vente - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-cart-plus-fill"></i> Nouvelle Vente </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('sales.index') }}">Ventes</a> <span>/</span> <span>Nouvelle</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-receipt"></i> Informations de la vente </h3> <a href="{{ route('sales.index') }}" class="btn-cuni sm secondary"> <i class="bi bi-arrow-left"></i> Retour </a> </div> <div class="card-body"> <form action="{{ route('sales.store') }}" method="POST" id="saleForm"> @csrf <div class="settings-grid"> <!-- Section: Produit --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-box-seam"></i> Produit vendu </h4> <div class="form-group"> <label class="form-label">Type *</label> <select name="type" class="form-select" required id="saleType"> <option value="lapereau" selected>Lapereau(x)</option> <option value="male">Mâle</option> <option value="female">Femelle</option> <option value="groupe">Groupe / Lot</option> </select> </div> <div class="form-group"> <label class="form-label">Catégorie / Âge</label> <input type="text" name="category" class="form-control" placeholder="Ex: 5-8 semaines, reproducteur"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Optionnel - précisez l'âge ou la catégorie </small> </div> <div class="form-group"> <label class="form-label">Quantité *</label> <input type="number" name="quantity" class="form-control" value="1" min="1" required> </div> <div class="form-group"> <label class="form-label">Prix unitaire (F) *</label> <div class="input-group"> <input type="number" step="0.01" name="unit_price" class="form-control" required min="0"> <span class="input-group-text">F</span> </div> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-currency-euro"></i> Prix par animal ou par lot </small> </div> <div class="form-group"> <label class="form-label">Montant total</label> <div class="input-group"> <input type="text" id="totalAmount" class="form-control" readonly style="background: var(--surface-alt); font-weight: 600;"> <span class="input-group-text">F</span> </div> </div> </div> <!-- Section: Acheteur --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-person"></i> Informations acheteur </h4> <div class="form-group"> <label class="form-label">Nom de l'acheteur *</label> <input type="text" name="buyer_name" class="form-control" value="{{ old('buyer_name') }}" required placeholder="Nom complet"> </div> <div class="form-group"> <label class="form-label">Contact</label> <input type="text" name="buyer_contact" class="form-control" value="{{ old('buyer_contact') }}" placeholder="Téléphone ou email"> </div> <div class="form-group"> <label class="form-label">Adresse</label> <textarea name="buyer_address" class="form-control" rows="2" placeholder="Adresse complète">{{ old('buyer_address') }}</textarea> </div> </div> <!-- Section: Paiement --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-credit-card"></i> Paiement </h4> <div class="form-group"> <label class="form-label">Date de vente *</label> <input type="date" name="date_sale" class="form-control" value="{{ old('date_sale', date('Y-m-d')) }}" required> </div> <div class="form-group"> <label class="form-label">Statut du paiement *</label> <select name="payment_status" class="form-select" required id="paymentStatus"> <option value="paid">Payé intégralement</option> <option value="partial" selected>Paiement partiel</option> <option value="pending">En attente</option> </select> </div> <div class="form-group" id="partialPaymentGroup"> <label class="form-label">Montant versé (F)</label> <div class="input-group"> <input type="number" step="0.01" name="amount_paid" class="form-control" value="0" min="0"> <span class="input-group-text">F</span> </div> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Laissez à 0 pour "En attente" </small> </div> </div> <!-- Section: Notes --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-sticky-note"></i> Notes </h4> <div class="form-group"> <label class="form-label">Remarques</label> <textarea name="notes" class="form-control" rows="3" placeholder="Informations complémentaires...">{{ old('notes') }}</textarea> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Détails sur la vente, conditions particulières, etc. </small> </div> </div> </div> <div style="margin-top: 32px; display: flex; gap: 12px; padding-top: 24px; border-top: 1px solid var(--surface-border);"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Enregistrer la vente </button> <a href="{{ route('sales.index') }}" class="btn-cuni secondary"> <i class="bi bi-x-circle"></i> Annuler </a> </div> </form> </div> </div> @push('scripts') <script> document.addEventListener('DOMContentLoaded', function() { const quantityInput = document.querySelector('input[name="quantity"]'); const priceInput = document.querySelector('input[name="unit_price"]'); const totalAmountDisplay = document.getElementById('totalAmount'); const paymentStatus = document.getElementById('paymentStatus'); const partialPaymentGroup = document.getElementById('partialPaymentGroup'); const amountPaidInput = document.querySelector('input[name="amount_paid"]'); // Toggle partial payment field paymentStatus.addEventListener('change', function() { if (this.value === 'partial') { partialPaymentGroup.style.display = 'block'; amountPaidInput.required = true; } else { partialPaymentGroup.style.display = 'none'; amountPaidInput.required = false; if (this.value === 'paid') { amountPaidInput.value = totalAmountDisplay.textContent.replace(' F', '').replace(/\s/g, ''); } else { amountPaidInput.value = '0'; } } }); // Initialize based on default selection if (paymentStatus.value === 'partial') { partialPaymentGroup.style.display = 'block'; } // Calculate total amount function calculateTotal() { const quantity = parseFloat(quantityInput.value) || 0; const price = parseFloat(priceInput.value) || 0; const total = quantity * price; totalAmountDisplay.value = total.toFixed(2).replace('.', ',') + ' F'; // Update amount paid if status is "paid" if (paymentStatus.value === 'paid') { amountPaidInput.value = total.toFixed(2); } } quantityInput.addEventListener('input', calculateTotal); priceInput.addEventListener('input', calculateTotal); // Initial calculation calculateTotal(); }); </script> @endpush <style> .form-section { background: var(--surface-alt); border-radius: var(--radius-lg); padding: 20px; border: 1px solid var(--surface-border); } .section-subtitle { font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; } .section-subtitle i { color: var(--primary); } .input-group { display: flex; gap: 0; } .input-group .form-control { border-radius: var(--radius) 0 0 var(--radius); border-right: none; } .input-group .input-group-text { background: var(--gray-100); border: 1px solid var(--gray-300); border-radius: 0 var(--radius) var(--radius) 0; padding: 0 12px; font-weight: 500; } #partialPaymentGroup { display: none; } </style> @endsection

File: resources/views/sales/edit.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Modifier Vente - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-pencil-square"></i> Modifier la Vente </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <a href="{{ route('sales.index') }}">Ventes</a> <span>/</span> <span>Modification</span> </div> </div> </div> @if ($errors->any()) <div class="alert-cuni error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul style="margin: 8px 0 0 20px; padding: 0;"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> </div> @endif <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-receipt"></i> Informations de la vente </h3> <a href="{{ route('sales.index') }}" class="btn-cuni sm secondary"> <i class="bi bi-arrow-left"></i> Retour </a> </div> <div class="card-body"> <form action="{{ route('sales.update', $sale->id) }}" method="POST" id="saleForm"> @csrf @method('PUT') <div class="settings-grid"> <!-- Section: Produit --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-box-seam"></i> Produit vendu </h4> <div class="form-group"> <label class="form-label">Type *</label> <select name="type" class="form-select" required id="saleType"> <option value="lapereau" {{ $sale->type === 'lapereau' ? 'selected' : '' }}>Lapereau(x)</option> <option value="male" {{ $sale->type === 'male' ? 'selected' : '' }}>Mâle</option> <option value="female" {{ $sale->type === 'female' ? 'selected' : '' }}>Femelle</option> <option value="groupe" {{ $sale->type === 'groupe' ? 'selected' : '' }}>Groupe / Lot</option> </select> </div> <div class="form-group"> <label class="form-label">Catégorie / Âge</label> <input type="text" name="category" class="form-control" value="{{ old('category', $sale->category) }}" placeholder="Ex: 5-8 semaines, reproducteur"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Optionnel - précisez l'âge ou la catégorie </small> </div> <div class="form-group"> <label class="form-label">Quantité *</label> <input type="number" name="quantity" class="form-control" value="{{ old('quantity', $sale->quantity) }}" min="1" required> </div> <div class="form-group"> <label class="form-label">Prix unitaire (F) *</label> <div class="input-group"> <input type="number" step="0.01" name="unit_price" class="form-control" value="{{ old('unit_price', $sale->unit_price) }}" required min="0"> <span class="input-group-text">F</span> </div> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-currency-euro"></i> Prix par animal ou par lot </small> </div> <div class="form-group"> <label class="form-label">Montant total</label> <div class="input-group"> <input type="text" id="totalAmount" class="form-control" readonly style="background: var(--surface-alt); font-weight: 600;" value="{{ number_format($sale->total_amount, 2, ',', ' ') }} F"> <span class="input-group-text">F</span> </div> </div> </div> <!-- Section: Acheteur --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-person"></i> Informations acheteur </h4> <div class="form-group"> <label class="form-label">Nom de l'acheteur *</label> <input type="text" name="buyer_name" class="form-control" value="{{ old('buyer_name', $sale->buyer_name) }}" required placeholder="Nom complet"> </div> <div class="form-group"> <label class="form-label">Contact</label> <input type="text" name="buyer_contact" class="form-control" value="{{ old('buyer_contact', $sale->buyer_contact) }}" placeholder="Téléphone ou email"> </div> <div class="form-group"> <label class="form-label">Adresse</label> <textarea name="buyer_address" class="form-control" rows="2" placeholder="Adresse complète">{{ old('buyer_address', $sale->buyer_address) }}</textarea> </div> </div> <!-- Section: Paiement --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-credit-card"></i> Paiement </h4> <div class="form-group"> <label class="form-label">Date de vente *</label> <input type="date" name="date_sale" class="form-control" value="{{ old('date_sale', $sale->date_sale->format('Y-m-d')) }}" required> </div> <div class="form-group"> <label class="form-label">Statut du paiement *</label> <select name="payment_status" class="form-select" required id="paymentStatus"> <option value="paid" {{ $sale->payment_status === 'paid' ? 'selected' : '' }}>Payé intégralement</option> <option value="partial" {{ $sale->payment_status === 'partial' ? 'selected' : '' }}>Paiement partiel</option> <option value="pending" {{ $sale->payment_status === 'pending' ? 'selected' : '' }}>En attente</option> </select> </div> <div class="form-group" id="partialPaymentGroup"> <label class="form-label">Montant versé (F)</label> <div class="input-group"> <input type="number" step="0.01" name="amount_paid" class="form-control" value="{{ old('amount_paid', $sale->amount_paid) }}" min="0"> <span class="input-group-text">F</span> </div> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Laissez à 0 pour "En attente" </small> </div> </div> <!-- Section: Notes --> <div class="form-section"> <h4 class="section-subtitle"> <i class="bi bi-sticky-note"></i> Notes </h4> <div class="form-group"> <label class="form-label">Remarques</label> <textarea name="notes" class="form-control" rows="3" placeholder="Informations complémentaires...">{{ old('notes', $sale->notes) }}</textarea> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Détails sur la vente, conditions particulières, etc. </small> </div> </div> </div> <div style="margin-top: 32px; display: flex; gap: 12px; padding-top: 24px; border-top: 1px solid var(--surface-border);"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-check-circle"></i> Mettre à jour la vente </button> <a href="{{ route('sales.index') }}" class="btn-cuni secondary"> <i class="bi bi-x-circle"></i> Annuler </a> </div> </form> </div> </div> @push('scripts') <script> document.addEventListener('DOMContentLoaded', function() { const quantityInput = document.querySelector('input[name="quantity"]'); const priceInput = document.querySelector('input[name="unit_price"]'); const totalAmountDisplay = document.getElementById('totalAmount'); const paymentStatus = document.getElementById('paymentStatus'); const partialPaymentGroup = document.getElementById('partialPaymentGroup'); const amountPaidInput = document.querySelector('input[name="amount_paid"]'); // Toggle partial payment field paymentStatus.addEventListener('change', function() { if (this.value === 'partial') { partialPaymentGroup.style.display = 'block'; amountPaidInput.required = true; } else { partialPaymentGroup.style.display = 'none'; amountPaidInput.required = false; if (this.value === 'paid') { amountPaidInput.value = totalAmountDisplay.textContent.replace(' F', '').replace(/\s/g, ''); } else { amountPaidInput.value = '0'; } } }); // Initialize based on current status if (paymentStatus.value === 'partial') { partialPaymentGroup.style.display = 'block'; } else { partialPaymentGroup.style.display = 'none'; } // Calculate total amount function calculateTotal() { const quantity = parseFloat(quantityInput.value) || 0; const price = parseFloat(priceInput.value) || 0; const total = quantity * price; totalAmountDisplay.value = total.toFixed(2).replace('.', ',') + ' F'; // Update amount paid if status is "paid" if (paymentStatus.value === 'paid') { amountPaidInput.value = total.toFixed(2); } } quantityInput.addEventListener('input', calculateTotal); priceInput.addEventListener('input', calculateTotal); }); </script> @endpush <style> .form-section { background: var(--surface-alt); border-radius: var(--radius-lg); padding: 20px; border: 1px solid var(--surface-border); } .section-subtitle { font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; } .section-subtitle i { color: var(--primary); } .input-group { display: flex; gap: 0; } .input-group .form-control { border-radius: var(--radius) 0 0 var(--radius); border-right: none; } .input-group .input-group-text { background: var(--gray-100); border: 1px solid var(--gray-300); border-radius: 0 var(--radius) var(--radius) 0; padding: 0 12px; font-weight: 500; } #partialPaymentGroup { display: none; } </style> @endsection

File: resources/views/sales/index.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Ventes - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-cart-check-fill"></i> Gestion des Ventes </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Ventes</span> </div> </div> <a href="{{ route('sales.create') }}" class="btn-cuni primary"> <i class="bi bi-plus-lg"></i> Nouvelle vente </a> </div> <!-- Stats Cards --> <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"> <div class="cuni-card"> <div class="card-body p-4"> <div class="flex items-center justify-between"> <div> <p class="text-sm text-gray-500">Total des ventes</p> <p class="text-2xl font-bold mt-1 text-gray-800">{{ $stats['total_sales'] }}</p> </div> <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background: rgba(59, 130, 246, 0.1)"> <i class="bi bi-cart text-blue-500 text-lg"></i> </div> </div> </div> </div> <div class="cuni-card"> <div class="card-body p-4"> <div class="flex items-center justify-between"> <div> <p class="text-sm text-gray-500">Chiffre d'affaires</p> <p class="text-2xl font-bold mt-1 text-gray-800">{{ number_format($stats['total_revenue'], 2, ',', ' ') }} FCFA</p> </div> <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background: rgba(16, 185, 129, 0.1)"> <i class="bi bi-currency-euro text-green-500 text-lg"></i> </div> </div> </div> </div> <div class="cuni-card"> <div class="card-body p-4"> <div class="flex items-center justify-between"> <div> <p class="text-sm text-gray-500">Ce mois-ci</p> <p class="text-2xl font-bold mt-1 text-gray-800">{{ number_format($stats['this_month'], 2, ',', ' ') }} FCFA</p> </div> <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background: rgba(139, 92, 246, 0.1)"> <i class="bi bi-graph-up text-purple-500 text-lg"></i> </div> </div> </div> </div> <div class="cuni-card"> <div class="card-body p-4"> <div class="flex items-center justify-between"> <div> <p class="text-sm text-gray-500">Paiements en attente</p> <p class="text-2xl font-bold mt-1 text-amber-600">{{ number_format($stats['pending_payments'], 2, ',', ' ') }} FCFA</p> </div> <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background: rgba(245, 158, 11, 0.1)"> <i class="bi bi-hourglass-split text-amber-500 text-lg"></i> </div> </div> </div> </div> </div> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-list-ul"></i> Historique des ventes </h3> </div> <div class="card-body"> <div class="table-responsive"> <table class="table table-hover align-middle mb-0"> <thead class="bg-light"> <tr> <th class="ps-4 text-uppercase text-muted fw-semibold small">Date</th> <th class="text-uppercase text-muted fw-semibold small">Article</th> <th class="text-uppercase text-muted fw-semibold small">Quantité</th> <th class="text-uppercase text-muted fw-semibold small">Acheteur</th> <th class="text-uppercase text-muted fw-semibold small">Montant</th> <th class="text-uppercase text-muted fw-semibold small">Statut</th> <th class="pe-4 text-end text-uppercase text-muted fw-semibold small">Actions</th> </tr> </thead> <tbody> @forelse($sales as $sale) <tr class="border-bottom border-light"> <td class="ps-4 fw-semibold">{{ $sale->date_sale->format('d/m/Y') }}</td> <td> <span class="badge" style="background: rgba(59, 130, 246, 0.1); color: #3B82F6;"> {{ ucfirst($sale->type) }}{{ $sale->category ? " ({$sale->category})" : '' }} </span> </td> <td class="fw-semibold">{{ $sale->quantity }}</td> <td>{{ $sale->buyer_name }}</td> <td class="fw-bold text-primary">{{ number_format($sale->total_amount, 2, ',', ' ') }} FCFA</td> <td> @if($sale->payment_status === 'paid') <span class="badge" style="background: rgba(16, 185, 129, 0.1); color: #10B981;">Payé</span> @elseif($sale->payment_status === 'partial') <span class="badge" style="background: rgba(245, 158, 11, 0.1); color: #F59E0B;">Partiel</span> @else <span class="badge" style="background: rgba(239, 68, 68, 0.1); color: #EF4444;">En attente</span> @endif </td> <td class="pe-4"> <div class="action-buttons"> <a href="{{ route('sales.show', $sale) }}" class="btn-cuni sm secondary" title="Détails"> <i class="bi bi-eye"></i> </a> <a href="{{ route('sales.edit', $sale) }}" class="btn-cuni sm secondary" title="Modifier"> <i class="bi bi-pencil"></i> </a> @if($sale->payment_status !== 'paid') <form action="{{ route('sales.mark-paid', $sale) }}" method="POST" style="display:inline;"> @csrf <button type="submit" class="btn-cuni sm primary" title="Marquer comme payé" onclick="return confirm('Marquer cette vente comme payée ?')"> <i class="bi bi-cash-coin"></i> </button> </form> @endif <form action="{{ route('sales.destroy', $sale) }}" method="POST" style="display:inline;"> @csrf @method('DELETE') <button type="submit" class="btn-cuni sm danger" title="Supprimer" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette vente ?')"> <i class="bi bi-trash"></i> </button> </form> </div> </td> </tr> @empty <tr> <td colspan="7"> <div class="table-empty-state"> <i class="bi bi-cart-x" style="font-size: 3rem; color: var(--text-tertiary);"></i> <p class="mt-3">Aucune vente enregistrée pour le moment</p> <a href="{{ route('sales.create') }}" class="btn-cuni primary mt-3"> <i class="bi bi-plus-lg"></i> Enregistrer une première vente </a> </div> </td> </tr> @endforelse </tbody> </table> </div> @if($sales->hasPages()) <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--surface-border);"> <div class="text-muted" style="font-size: 13px;"> Affichage de <strong>{{ $sales->firstItem() }}</strong> à <strong>{{ $sales->lastItem() }}</strong> sur <strong>{{ $sales->total() }}</strong> ventes </div> <nav>{{ $sales->links('vendor.pagination.bootstrap-5-sm') }}</nav> </div> @endif </div> </div> @endsection

File: resources/views/settings/index.blade.php
---
@extends('layouts.cuniapp') @section('title', 'Paramètres - CuniApp Élevage') @section('content') <div class="page-header"> <div> <h2 class="page-title"> <i class="bi bi-gear"></i> Paramètres de l'Application </h2> <div class="breadcrumb"> <a href="{{ route('dashboard') }}">Tableau de bord</a> <span>/</span> <span>Paramètres</span> </div> </div> </div> @if (session('success')) <div class="alert-cuni success"> <i class="bi bi-check-circle-fill"></i> <div>{{ session('success') }}</div> </div> @endif <!-- Tabs Navigation --> <div class="tabs-container"> <button class="tab-btn active" data-tab="general-tab"> <i class="bi bi-house"></i> Général </button> <button class="tab-btn" data-tab="breeding-tab"> <i class="bi bi-heart-pulse"></i> Élevage </button> <button class="tab-btn" data-tab="profile-tab"> <i class="bi bi-person"></i> Profil </button> <button class="tab-btn" data-tab="system-tab"> <i class="bi bi-hdd"></i> Système </button> </div> <!-- Tab Content: Général --> <div class="tab-content active" id="general-tab"> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-building"></i> Informations de la Ferme </h3> </div> <div class="card-body"> <form action="{{ route('settings.update') }}" method="POST"> @csrf <div class="settings-grid"> <div class="form-group"> <label class="form-label">Nom de la ferme *</label> <input type="text" name="farm_name" class="form-control" value="{{ \App\Models\Setting::get('farm_name', '') }}" placeholder="Ex: Ferme Lapin d'Or"> @error('farm_name') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Email</label> <input type="email" name="farm_email" class="form-control" value="{{ \App\Models\Setting::get('farm_email', '') }}" placeholder="contact@ferme.com"> @error('farm_email') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Téléphone</label> <input type="text" name="farm_phone" class="form-control" value="{{ \App\Models\Setting::get('farm_phone', '') }}" placeholder="+33 6 00 00 00 00"> @error('farm_phone') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Adresse</label> <input type="text" name="farm_address" class="form-control" value="{{ \App\Models\Setting::get('farm_address', '') }}" placeholder="Adresse complète"> @error('farm_address') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-save"></i> Enregistrer </button> </div> </form> </div> </div> </div> <!-- Tab Content: Élevage --> <div class="tab-content" id="breeding-tab"> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-egg"></i> Paramètres d'Élevage </h3> </div> <div class="card-body"> <form action="{{ route('settings.update') }}" method="POST"> @csrf <div class="settings-grid"> <div class="form-group"> <label class="form-label">Jours de gestation (lapine)</label> <input type="number" name="gestation_days" class="form-control" value="{{ \App\Models\Setting::get('gestation_days', 31) }}" min="28" max="35"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Moyenne: 31 jours </small> @error('gestation_days') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Semaines de sevrage</label> <input type="number" name="weaning_weeks" class="form-control" value="{{ \App\Models\Setting::get('weaning_weeks', 6) }}" min="4" max="8"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Recommandé: 6 semaines </small> @error('weaning_weeks') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Seuil d'alerte (%)</label> <input type="number" name="alert_threshold" class="form-control" value="{{ \App\Models\Setting::get('alert_threshold', 80) }}" min="1" max="100"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Pour les notifications </small> @error('alert_threshold') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-save"></i> Enregistrer </button> </div> </form> </div> </div> </div> <!-- Tab Content: Profil --> <div class="tab-content" id="profile-tab"> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-person-circle"></i> Mon Profil Utilisateur </h3> </div> <div class="card-body"> <form action="{{ route('settings.profile') }}" method="POST"> @csrf <div class="settings-grid"> <div class="form-group"> <label class="form-label">Nom complet *</label> <input type="text" name="name" class="form-control" value="{{ auth()->user()->name }}" required> @error('name') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Email *</label> <input type="email" name="email" class="form-control" value="{{ auth()->user()->email }}" required> @error('email') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Mot de passe actuel</label> <input type="password" name="current_password" class="form-control" placeholder="••••••••"> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Obligatoire pour changer le mot de passe </small> @error('current_password') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Nouveau mot de passe</label> <input type="password" name="new_password" class="form-control" placeholder="••••••••"> @error('new_password') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Confirmer mot de passe</label> <input type="password" name="new_password_confirmation" class="form-control" placeholder="••••••••"> @error('new_password_confirmation') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-save"></i> Mettre à jour le profil </button> </div> </form> </div> </div> </div> <!-- Tab Content: Système --> <div class="tab-content" id="system-tab"> <div class="cuni-card"> <div class="card-header-custom"> <h3 class="card-title"> <i class="bi bi-gear"></i> Préférences Système </h3> </div> <div class="card-body"> <form action="{{ route('settings.update') }}" method="POST"> @csrf <div class="settings-grid"> <!-- ✅ THEME DROPDOWN RESTORED --> <div class="form-group"> <label class="form-label">Thème</label> <select name="theme" class="form-select" onchange="document.body.classList.toggle('theme-dark', this.value === 'dark')"> <option value="light" {{ auth()->user()->theme === 'light' ? 'selected' : '' }}>Clair</option> <option value="dark" {{ auth()->user()->theme === 'dark' ? 'selected' : '' }}>Sombre</option> </select> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> Le thème s'appliquera après rechargement de la page </small> </div> <!-- ✅ LANGUAGE SELECTOR (FIXED & PERSISTENT) --> <div class="form-group"> <label class="form-label">Langue de l'interface</label> <select name="language" class="form-select"> <option value="fr" {{ auth()->user()->language === 'fr' ? 'selected' : '' }}> 🇫🇷 Français </option> <option value="en" {{ auth()->user()->language === 'en' ? 'selected' : '' }}> 🇬🇧 English </option> </select> <small style="color: var(--text-tertiary); font-size: 12px; margin-top: 6px; display: block;"> <i class="bi bi-info-circle"></i> La langue s'appliquera après rechargement de la page </small> </div> </div> <!-- Notification Preferences Section --> <div class="form-section" style="margin-top: 20px; border-top: 1px solid var(--surface-border); padding-top: 20px;"> <h4 class="section-subtitle"> <i class="bi bi-bell"></i> Préférences de Notifications </h4> <div class="form-group"> <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 12px; background: var(--surface-alt); border-radius: var(--radius); border: 1px solid var(--surface-border);"> <input type="checkbox" name="notifications_email" value="1" {{ auth()->user()->notifications_email ? 'checked' : '' }} style="width: 18px; height: 18px; accent-color: var(--primary);"> <div> <span class="form-label" style="margin: 0; font-weight: 600;">📧 Notifications par email</span> <p style="color: var(--text-secondary); font-size: 13px; margin-top: 4px;"> Recevez un email pour chaque activité importante (saillies, naissances, etc.) </p> </div> </label> </div> <div class="form-group"> <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 12px; background: var(--surface-alt); border-radius: var(--radius); border: 1px solid var(--surface-border);"> <input type="checkbox" name="notifications_dashboard" value="1" {{ auth()->user()->notifications_dashboard ? 'checked' : '' }} style="width: 18px; height: 18px; accent-color: var(--primary);"> <div> <span class="form-label" style="margin: 0; font-weight: 600;">🔔 Notifications tableau de bord</span> <p style="color: var(--text-secondary); font-size: 13px; margin-top: 4px;"> Affichez les notifications dans le widget du tableau de bord </p> </div> </label> </div> </div> <div style="margin-top: 24px;"> <button type="submit" class="btn-cuni primary"> <i class="bi bi-save"></i> Enregistrer les préférences </button> </div> </form> </div> </div> </div> <style> /* Enhanced Tab Styling */ .tabs-container { display: flex; gap: 4px; margin-bottom: 24px; border-bottom: 1px solid var(--surface-border); padding-bottom: 0; overflow-x: auto; background: var(--surface); border-radius: var(--radius-md) var(--radius-md) 0 0; padding: 8px 8px 0 8px; } .tab-btn { padding: 12px 20px; font-size: 14px; font-weight: 500; color: var(--text-secondary); background: transparent; border: none; border-bottom: 2px solid transparent; cursor: pointer; transition: all 0.2s ease; white-space: nowrap; border-radius: var(--radius) var(--radius) 0 0; display: flex; align-items: center; gap: 8px; } .tab-btn:hover { color: var(--text-primary); background: var(--gray-50); } .tab-btn.active { color: var(--primary); border-bottom-color: var(--primary); background: var(--primary-subtle); } .tab-btn i { font-size: 16px; } .tab-content { display: none; animation: fadeIn 0.3s ease; } .tab-content.active { display: block; } @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } } /* Form Enhancements */ .form-control:focus, .form-select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-subtle); } /* Checkbox Styling */ input[type="checkbox"] { accent-color: var(--primary); cursor: pointer; } /* Notification Section */ .form-section { background: var(--surface-alt); border-radius: var(--radius-lg); padding: 20px; border: 1px solid var(--surface-border); } .section-subtitle { font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; } .section-subtitle i { color: var(--primary); } /* Validation Messages */ .validation-message { display: flex; align-items: center; gap: 6px; font-size: 12px; margin-top: 6px; padding: 8px 12px; border-radius: var(--radius); animation: slideDown 0.3s ease; } @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } } .validation-message.error { background: rgba(239, 68, 68, 0.1); color: var(--accent-red); border: 1px solid rgba(239, 68, 68, 0.2); } .validation-message.success { background: rgba(16, 185, 129, 0.1); color: var(--accent-green); border: 1px solid rgba(16, 185, 129, 0.2); } .validation-message.warning { background: rgba(245, 158, 11, 0.1); color: var(--accent-orange); border: 1px solid rgba(245, 158, 11, 0.2); } /* Responsive */ @media (max-width: 768px) { .tabs-container { padding: 4px 4px 0 4px; } .tab-btn { padding: 10px 14px; font-size: 13px; } .settings-grid { grid-template-columns: 1fr; } } </style> <script> // Tab functionality document.querySelectorAll('.tab-btn').forEach(btn => { btn.addEventListener('click', function() { const tabId = this.getAttribute('data-tab'); // Remove active class from all tabs document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active')); document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active')); // Add active class this.classList.add('active'); document.getElementById(tabId).classList.add('active'); // Save to localStorage localStorage.setItem('cuniapp_active_tab', tabId); }); }); // Restore active tab on page load document.addEventListener('DOMContentLoaded', function() { const savedTab = localStorage.getItem('cuniapp_active_tab'); if (savedTab) { const tabBtn = document.querySelector(`.tab-btn[data-tab="${savedTab}"]`); if (tabBtn) tabBtn.click(); } // Animate cards in const cards = document.querySelectorAll('.cuni-card'); cards.forEach((card, index) => { card.style.opacity = '0'; card.style.transform = 'translateY(10px)'; setTimeout(() => { card.style.transition = 'all 0.4s ease'; card.style.opacity = '1'; card.style.transform = 'translateY(0)'; }, index * 50); }); }); </script> @endsection

File: resources/views/welcome.blade.php
---
<!DOCTYPE html> <html lang="fr"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>{{ config('app.name', 'CuniApp Élevage') }}</title> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet"> @vite(['resources/css/app.css', 'resources/js/app.js']) <style> :root { --primary: #2563EB; --primary-light: #3B82F6; --primary-dark: #1D4ED8; --primary-subtle: #EFF6FF; --accent-cyan: #06B6D4; --accent-purple: #8B5CF6; --accent-pink: #EC4899; --accent-green: #10B981; --accent-orange: #F59E0B; --accent-red: #EF4444; --white: #FFFFFF; --gray-50: #F9FAFB; --gray-100: #F3F4F6; --gray-200: #E5E7EB; --gray-300: #D1D5DB; --gray-400: #9CA3AF; --gray-500: #6B7280; --gray-600: #4B5563; --gray-700: #374151; --gray-800: #1F2937; --gray-900: #111827; --surface: #FFFFFF; --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05); --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1); --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); --radius: 8px; --radius-md: 12px; --radius-lg: 16px; --radius-xl: 20px; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: linear-gradient(135deg, #1e3a5f 0%, #2563EB 50%, #06B6D4 100%); min-height: 100vh; overflow-x: hidden; position: relative; } .bg-particle { position: absolute; border-radius: 50%; background: rgba(255, 255, 255, 0.1); animation: float 20s infinite ease-in-out; } .bg-particle:nth-child(1) { width: 300px; height: 300px; top: -100px; left: -100px; animation-delay: 0s; } .bg-particle:nth-child(2) { width: 200px; height: 200px; top: 50%; right: -50px; animation-delay: -5s; } .bg-particle:nth-child(3) { width: 150px; height: 150px; bottom: -50px; left: 30%; animation-delay: -10s; } .bg-particle:nth-child(4) { width: 250px; height: 250px; bottom: 20%; right: 20%; animation-delay: -15s; } @keyframes float { 0%, 100% { transform: translate(0, 0) rotate(0deg); opacity: 0.1; } 25% { transform: translate(30px, -30px) rotate(90deg); opacity: 0.15; } 50% { transform: translate(-20px, 20px) rotate(180deg); opacity: 0.1; } 75% { transform: translate(20px, 30px) rotate(270deg); opacity: 0.15; } } .welcome-container { position: relative; z-index: 10; min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 24px; } .welcome-content { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; max-width: 1200px; width: 100%; align-items: center; } .brand-section { color: var(--white); animation: slideInLeft 1s ease-out; } @keyframes slideInLeft { from { opacity: 0; transform: translateX(-50px); } to { opacity: 1; transform: translateX(0); } } .logo-container { width: 80px; height: 80px; background: linear-gradient(135deg, var(--primary) 0%, var(--accent-cyan) 100%); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; margin-bottom: 24px; box-shadow: var(--shadow-lg); animation: logoPulse 3s infinite ease-in-out; } @keyframes logoPulse { 0%, 100% { transform: scale(1); box-shadow: var(--shadow-lg); } 50% { transform: scale(1.05); box-shadow: 0 20px 40px -10px rgba(37, 99, 235, 0.4); } } .logo-container svg { width: 48px; height: 48px; } .brand-title { font-size: 48px; font-weight: 700; margin-bottom: 16px; letter-spacing: -0.02em; line-height: 1.2; } .brand-title span { background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-green) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; } .brand-tagline { font-size: 18px; color: rgba(255, 255, 255, 0.9); margin-bottom: 32px; font-weight: 400; line-height: 1.6; } .features-list { list-style: none; margin-bottom: 40px; } .features-list li { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; font-size: 16px; color: rgba(255, 255, 255, 0.9); animation: fadeInUp 0.6s ease-out backwards; } .features-list li:nth-child(1) { animation-delay: 0.2s; } .features-list li:nth-child(2) { animation-delay: 0.4s; } .features-list li:nth-child(3) { animation-delay: 0.6s; } .features-list li:nth-child(4) { animation-delay: 0.8s; } @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } } .features-list li i { width: 24px; height: 24px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; } .auth-section { animation: slideInRight 1s ease-out; } @keyframes slideInRight { from { opacity: 0; transform: translateX(50px); } to { opacity: 1; transform: translateX(0); } } .auth-container { background: var(--surface); border-radius: var(--radius-xl); box-shadow: var(--shadow-lg); overflow: hidden; transition: all 0.4s ease; } .auth-container:hover { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); transform: translateY(-5px); } .auth-tabs { display: flex; background: var(--gray-100); padding: 8px; } .auth-tab { flex: 1; padding: 14px 24px; text-align: center; font-size: 14px; font-weight: 600; color: var(--gray-500); background: transparent; border: none; cursor: pointer; border-radius: var(--radius-md); transition: all 0.3s ease; position: relative; } .auth-tab.active { background: var(--white); color: var(--primary); box-shadow: var(--shadow-sm); } .auth-tab:hover:not(.active) { color: var(--gray-700); background: rgba(255, 255, 255, 0.5); } .auth-forms { padding: 40px; } .auth-form { display: none; opacity: 0; transform: translateY(10px); transition: all 0.4s ease; } .auth-form.active { display: block; opacity: 1; transform: translateY(0); } .form-title { font-size: 24px; font-weight: 700; color: var(--gray-800); margin-bottom: 8px; text-align: center; } .form-subtitle { font-size: 14px; color: var(--gray-500); text-align: center; margin-bottom: 32px; } .form-group { margin-bottom: 20px; position: relative; } .form-label { display: block; font-size: 13px; font-weight: 500; color: var(--gray-700); margin-bottom: 8px; } .form-input-wrapper { position: relative; } .form-input-wrapper i { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); color: var(--gray-400); font-size: 16px; transition: color 0.3s ease; z-index: 2; } .form-input { width: 100%; padding: 12px 14px 12px 44px; font-size: 14px; border: 2px solid var(--gray-200); border-radius: var(--radius); background: var(--white); color: var(--gray-800); transition: all 0.3s ease; font-family: inherit; } .form-input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px var(--primary-subtle); } .form-input:focus + i, .form-input-wrapper:focus-within i { color: var(--primary); } .form-input::placeholder { color: var(--gray-400); } .form-input.error { border-color: var(--accent-red); } .form-input.success { border-color: var(--accent-green); } .validation-message { display: flex; align-items: center; gap: 6px; font-size: 12px; margin-top: 6px; padding: 8px 12px; border-radius: var(--radius); animation: slideDown 0.3s ease; } @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } } .validation-message.error { background: rgba(239, 68, 68, 0.1); color: var(--accent-red); border: 1px solid rgba(239, 68, 68, 0.2); } .validation-message.success { background: rgba(16, 185, 129, 0.1); color: var(--accent-green); border: 1px solid rgba(16, 185, 129, 0.2); } .validation-message.warning { background: rgba(245, 158, 11, 0.1); color: var(--accent-orange); border: 1px solid rgba(245, 158, 11, 0.2); } .validation-message i { font-size: 14px; flex-shrink: 0; } .password-strength-container { margin-top: 8px; } .password-strength-bar { height: 6px; background: var(--gray-200); border-radius: 3px; overflow: hidden; margin-bottom: 8px; } .password-strength-fill { height: 100%; border-radius: 3px; transition: all 0.3s ease; width: 0%; } .password-strength-fill.weak { width: 25%; background: var(--accent-red); } .password-strength-fill.fair { width: 50%; background: var(--accent-orange); } .password-strength-fill.good { width: 75%; background: var(--accent-cyan); } .password-strength-fill.strong { width: 100%; background: var(--accent-green); } .password-strength-text { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; } .password-strength-text.weak { color: var(--accent-red); } .password-strength-text.fair { color: var(--accent-orange); } .password-strength-text.good { color: var(--accent-cyan); } .password-strength-text.strong { color: var(--accent-green); } .password-requirements { margin-top: 12px; padding: 12px; background: var(--gray-50); border-radius: var(--radius); font-size: 12px; } .password-requirements-title { font-weight: 600; color: var(--gray-700); margin-bottom: 8px; display: flex; align-items: center; gap: 6px; } .password-requirement { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; color: var(--gray-600); transition: all 0.3s ease; } .password-requirement:last-child { margin-bottom: 0; } .password-requirement.met { color: var(--accent-green); } .password-requirement i { font-size: 14px; width: 16px; } .password-requirement.met i { color: var(--accent-green); } .password-requirement:not(.met) i { color: var(--gray-400); } .form-options { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; font-size: 13px; } .remember-me { display: flex; align-items: center; gap: 8px; color: var(--gray-600); cursor: pointer; } .remember-me input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--primary); cursor: pointer; } .forgot-password { color: var(--primary); text-decoration: none; font-weight: 500; transition: color 0.3s ease; } .forgot-password:hover { color: var(--primary-dark); text-decoration: underline; } .btn-submit { width: 100%; padding: 14px 24px; font-size: 14px; font-weight: 600; color: var(--white); background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); border: none; border-radius: var(--radius); cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: var(--shadow-md); } .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 10px 20px -5px rgba(37, 99, 235, 0.4); } .btn-submit:active { transform: translateY(0); } .btn-submit i { transition: transform 0.3s ease; } .btn-submit:hover i { transform: translateX(4px); } .divider { display: flex; align-items: center; margin: 24px 0; color: var(--gray-400); font-size: 13px; } .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: var(--gray-200); } .divider span { padding: 0 16px; } .social-login { display: grid; grid-template-columns: 1fr; gap: 12px; } .btn-social { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px; font-size: 13px; font-weight: 500; border: 2px solid var(--gray-200); border-radius: var(--radius); background: var(--white); color: var(--gray-700); cursor: pointer; transition: all 0.3s ease; } .btn-social:hover { border-color: var(--gray-300); background: var(--gray-50); transform: translateY(-2px); } .btn-social i { font-size: 16px; } .btn-social.google i { color: #DB4437; } .network-status { display: flex; align-items: center; gap: 8px; padding: 10px 14px; border-radius: var(--radius); margin-bottom: 20px; font-size: 13px; font-weight: 500; } .network-status.offline { background: rgba(239, 68, 68, 0.1); color: var(--accent-red); border: 1px solid rgba(239, 68, 68, 0.2); } .network-status i { font-size: 16px; } .alert-box { padding: 14px 18px; border-radius: var(--radius); margin-bottom: 20px; display: flex; align-items: flex-start; gap: 12px; font-size: 14px; animation: slideDown 0.3s ease; } .alert-box i { font-size: 18px; flex-shrink: 0; margin-top: 2px; } .alert-box.success { background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); color: var(--accent-green); } .alert-box.error { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2); color: var(--accent-red); } .alert-box.warning { background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2); color: var(--accent-orange); } .alert-box.info { background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2); color: var(--primary); } .validation-summary-list { list-style: none; padding-left: 0; margin: 8px 0 0 20px; } .validation-summary-list li { display: flex; align-items: flex-start; gap: 8px; margin-bottom: 8px; font-size: 13px; color: var(--gray-700); } .validation-summary-list li:last-child { margin-bottom: 0; } .validation-summary-list li i { color: var(--accent-red); font-size: 14px; margin-top: 2px; flex-shrink: 0; } .char-counter { font-size: 11px; color: var(--gray-500); text-align: right; margin-top: 4px; } .char-counter.exceeded { color: var(--accent-red); font-weight: 600; } @media (max-width: 968px) { .welcome-content { grid-template-columns: 1fr; gap: 40px; text-align: center; } .brand-section { order: 2; } .auth-section { order: 1; } .features-list li { justify-content: center; } .brand-title { font-size: 36px; } } @media (max-width: 480px) { .auth-forms { padding: 24px; } .brand-title { font-size: 28px; } .brand-tagline { font-size: 16px; } } .btn-submit.loading { pointer-events: none; opacity: 0.8; } .btn-submit.loading i { animation: spin 1s linear infinite; } @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } } /* ==================== VERIFICATION MODAL ==================== */ .verification-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px); display: none; align-items: center; justify-content: center; z-index: 1000; animation: fadeIn 0.3s ease; } .verification-overlay.active { display: flex; } .verification-modal { background: var(--surface); border-radius: var(--radius-xl); box-shadow: var(--shadow-lg); max-width: 450px; width: 90%; animation: slideUp 0.3s ease; overflow: hidden; } .verification-header { padding: 24px; border-bottom: 1px solid var(--gray-200); display: flex; align-items: center; justify-content: space-between; } .verification-header h3 { font-size: 18px; font-weight: 700; color: var(--gray-800); display: flex; align-items: center; gap: 10px; } .verification-header h3 i { color: var(--primary); } .modal-close { width: 32px; height: 32px; border: none; background: var(--gray-100); border-radius: var(--radius); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; color: var(--gray-600); } .modal-close:hover { background: var(--gray-200); color: var(--gray-800); } .verification-body { padding: 24px; } .verification-message { text-align: center; color: var(--gray-600); margin-bottom: 24px; line-height: 1.6; } .verification-message strong { color: var(--primary); } .verification-code-inputs { display: flex; gap: 12px; justify-content: center; margin: 24px 0; } .verification-code-input { width: 50px; height: 60px; font-size: 24px; font-weight: 700; text-align: center; border: 2px solid var(--gray-300); border-radius: var(--radius-md); transition: all 0.2s ease; } .verification-code-input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px var(--primary-subtle); } .verification-code-input.filled { border-color: var(--primary); background: var(--primary-subtle); } .verification-info { text-align: center; color: var(--gray-600); font-size: 13px; margin-top: 16px; } .verification-info a { color: var(--primary); text-decoration: none; font-weight: 600; } .verification-info a:hover { text-decoration: underline; } .resend-timer { text-align: center; color: var(--gray-500); font-size: 12px; margin-top: 12px; } .resend-timer.disabled { color: var(--gray-400); } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } } </style> </head> <body> <!-- Background Particles --> <div class="bg-particle"></div> <div class="bg-particle"></div> <div class="bg-particle"></div> <div class="bg-particle"></div> <div class="welcome-container"> <div class="welcome-content"> <!-- Left Side - Branding --> <div class="brand-section"> <div class="logo-container"> <svg viewBox="0 0 40 40" fill="none"> <path d="M20 5L35 15V25L20 35L5 25V15L20 5Z" fill="white"/> <path d="M20 12L28 17V23L20 28L12 23V17L20 12Z" fill="rgba(255,255,255,0.8)"/> </svg> </div> <h1 class="brand-title">CuniApp <span>Élevage</span></h1> <p class="brand-tagline">Gestion intelligente de votre cheptel lapin. Suivez vos reproductions, naissances et performances en toute simplicité.</p> <ul class="features-list"> <li> <i><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></i> <span>Suivi complet des mâles et femelles</span> </li> <li> <i><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></i> <span>Gestion des saillies et mises bas</span> </li> <li> <i><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></i> <span>Tableau de bord analytique</span> </li> <li> <i><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></i> <span>Alertes et notifications intelligentes</span> </li> </ul> </div> <!-- Right Side - Auth Forms --> <div class="auth-section"> <div class="auth-container"> <div class="auth-tabs"> <button type="button" class="auth-tab active" data-tab="login" id="tab-login"> <i class="bi bi-box-arrow-in-right"></i> Connexion </button> <button type="button" class="auth-tab" data-tab="register" id="tab-register"> <i class="bi bi-person-plus"></i> Inscription </button> </div> <div class="auth-forms"> <!-- Network Status --> <div class="network-status offline" id="networkStatus" style="display: none;"> <i class="bi bi-wifi-off"></i> <span>Aucune connexion réseau</span> </div> <!-- Success Message (After Verification) --> @if(session('success')) <div class="alert-box success"> <i class="bi bi-check-circle-fill"></i> <div>{{ session('success') }}</div> </div> @endif <!-- Login Form --> <form method="POST" action="{{ route('login') }}" class="auth-form active" id="form-login"> @csrf @if($errors->has('email') || $errors->has('password')) <div class="alert-box error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de connexion</strong> <ul class="validation-summary-list"> @foreach($errors->all() as $error) <li> <i class="bi bi-x-circle-fill"></i> <span> @if($error === 'auth.failed' || str_contains($error, 'auth.failed')) Ces identifiants ne correspondent pas à nos enregistrements. Veuillez vérifier votre email et mot de passe. @elseif(str_contains($error, 'throttle')) Trop de tentatives de connexion. Veuillez réessayer plus tard. @elseif(str_contains($error, 'validation.')) {{ str_replace('validation.', '', $error) }} @else {{ $error }} @endif </span> </li> @endforeach </ul> </div> </div> @endif <h2 class="form-title">Bon retour !</h2> <p class="form-subtitle">Connectez-vous à votre compte</p> <div class="form-group"> <label class="form-label">Adresse email</label> <div class="form-input-wrapper"> <input type="email" name="email" class="form-input @error('email') error @enderror" placeholder="votre@email.com" required autofocus value="{{ old('email') }}" id="loginEmail"> <i class="bi bi-envelope"></i> </div> @error('email') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span> @if(str_contains($message, 'validation.')) {{ str_replace('validation.', '', $message) }} @else {{ $message }} @endif </span> </div> @enderror <div class="validation-message" id="loginEmailValidation" style="display: none;"></div> </div> <div class="form-group"> <label class="form-label">Mot de passe</label> <div class="form-input-wrapper"> <input type="password" name="password" class="form-input @error('password') error @enderror" placeholder="••••••••" required id="loginPassword"> <i class="bi bi-lock"></i> </div> @error('password') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <div class="form-options"> <label class="remember-me"> <input type="checkbox" name="remember"> <span>Se souvenir de moi</span> </label> @if (Route::has('password.request')) <a class="forgot-password" href="{{ route('password.request') }}">Mot de passe oublié ?</a> @endif </div> <button type="submit" class="btn-submit"> <span>Se connecter</span> <i class="bi bi-arrow-right"></i> </button> <div class="divider"><span>ou continuer avec</span></div> <div class="social-login"> <button type="button" class="btn-social google"> <i class="bi bi-google"></i> <span>Google</span> </button> </div> </form> <!-- Register Form --> <form method="POST" action="{{ route('register') }}" class="auth-form" id="form-register"> @csrf @if($errors->has('name') || $errors->has('email') || $errors->has('password') || $errors->has('password_confirmation')) <div class="alert-box error"> <i class="bi bi-exclamation-triangle-fill"></i> <div> <strong>Erreurs de validation</strong> <ul class="validation-summary-list"> @foreach($errors->all() as $error) <li> <i class="bi bi-x-circle-fill"></i> <span> @if(str_contains($error, 'validation.unique')) Cette adresse email est déjà utilisée. Veuillez en choisir une autre. @elseif(str_contains($error, 'validation.email')) Format d'email invalide. @elseif(str_contains($error, 'validation.min')) Le champ est trop court. @elseif(str_contains($error, 'validation.required')) Ce champ est obligatoire. @elseif(str_contains($error, 'validation.confirmed')) Les mots de passe ne correspondent pas. @elseif(str_contains($error, 'validation.')) {{ str_replace('validation.', '', $error) }} @else {{ $error }} @endif </span> </li> @endforeach </ul> </div> </div> @endif <h2 class="form-title">Créer un compte</h2> <p class="form-subtitle">Rejoignez CuniApp dès aujourd'hui</p> <div class="form-group"> <label class="form-label">Nom complet</label> <div class="form-input-wrapper"> <input type="text" name="name" class="form-input @error('name') error @enderror" placeholder="Jean Dupont" required autofocus value="{{ old('name') }}" id="registerName" minlength="2" maxlength="50"> <i class="bi bi-person"></i> </div> <div class="char-counter" id="nameCharCounter">0/50</div> @error('name') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span> @if(str_contains($message, 'validation.')) {{ str_replace('validation.', '', $message) }} @else {{ $message }} @endif </span> </div> @enderror <div class="validation-message" id="nameValidation" style="display: none;"></div> </div> <div class="form-group"> <label class="form-label">Adresse email</label> <div class="form-input-wrapper"> <input type="email" name="email" class="form-input @error('email') error @enderror" placeholder="votre@email.com" required value="{{ old('email') }}" id="registerEmail" autocomplete="off"> <i class="bi bi-envelope"></i> </div> @error('email') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span> @if(str_contains($message, 'validation.unique')) Cette adresse email est déjà utilisée. Veuillez en choisir une autre. @elseif(str_contains($message, 'validation.email')) Format d'email invalide. @elseif(str_contains($message, 'validation.')) {{ str_replace('validation.', '', $message) }} @else {{ $message }} @endif </span> </div> @enderror <div class="validation-message" id="emailValidation" style="display: none;"></div> </div> <div class="form-group"> <label class="form-label">Mot de passe</label> <div class="form-input-wrapper"> <input type="password" name="password" class="form-input @error('password') error @enderror" placeholder="••••••••" required id="registerPassword" minlength="8" autocomplete="new-password"> <i class="bi bi-lock"></i> </div> <div class="password-strength-container"> <div class="password-strength-bar"> <div class="password-strength-fill" id="passwordStrengthFill"></div> </div> <div class="password-strength-text" id="passwordStrengthText">Faible</div> </div> <div class="password-requirements"> <div class="password-requirements-title"> <i class="bi bi-shield-check"></i> <span>Le mot de passe doit contenir :</span> </div> <div class="password-requirement" id="req-length"> <i class="bi bi-circle"></i> <span>Au moins 8 caractères</span> </div> <div class="password-requirement" id="req-uppercase"> <i class="bi bi-circle"></i> <span>Une majuscule</span> </div> <div class="password-requirement" id="req-lowercase"> <i class="bi bi-circle"></i> <span>Une minuscule</span> </div> <div class="password-requirement" id="req-number"> <i class="bi bi-circle"></i> <span>Un chiffre</span> </div> <div class="password-requirement" id="req-special"> <i class="bi bi-circle"></i> <span>Un caractère spécial (!@#$%^&*)</span> </div> </div> @error('password') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span> @if(str_contains($message, 'validation.')) {{ str_replace('validation.', '', $message) }} @else {{ $message }} @endif </span> </div> @enderror </div> <div class="form-group"> <label class="form-label">Confirmer le mot de passe</label> <div class="form-input-wrapper"> <input type="password" name="password_confirmation" class="form-input @error('password_confirmation') error @enderror" placeholder="••••••••" required id="passwordConfirmation"> <i class="bi bi-lock-fill"></i> </div> <div class="validation-message" id="passwordMatchValidation" style="display: none;"></div> @error('password_confirmation') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span> @if(str_contains($message, 'validation.')) {{ str_replace('validation.', '', $message) }} @else {{ $message }} @endif </span> </div> @enderror </div> <div class="form-group"> <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;"> <input type="checkbox" name="terms" required style="width: 16px; height: 16px; accent-color: var(--primary); margin-top: 2px;"> <span style="font-size: 13px; color: var(--gray-600);"> J'accepte les <a href="#" style="color: var(--primary);">Conditions d'utilisation</a> et la <a href="#" style="color: var(--primary);">Politique de confidentialité</a> </span> </label> @error('terms') <div class="validation-message error"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $message }}</span> </div> @enderror </div> <button type="submit" class="btn-submit"> <span>Créer mon compte</span> <i class="bi bi-arrow-right"></i> </button> <div class="divider"><span>ou s'inscrire avec</span></div> <div class="social-login"> <button type="button" class="btn-social google"> <i class="bi bi-google"></i> <span>Google</span> </button> </div> </form> </div> </div> </div> </div> </div> <!-- ==================== VERIFICATION MODAL ==================== --> @if(session('verification_pending')) <div class="verification-overlay active" id="verificationOverlay"> <div class="verification-modal"> <div class="verification-header"> <h3> <i class="bi bi-shield-check"></i> Vérification Email </h3> <button type="button" class="modal-close" onclick="closeVerificationModal()"> <i class="bi bi-x-lg"></i> </button> </div> <div class="verification-body"> <p class="verification-message"> Un code de vérification a été envoyé à<br> <strong id="verificationEmailDisplay">{{ session('verification_email') }}</strong> </p> <form id="verificationForm" method="POST" action="{{ route('verification.code.verify') }}"> @csrf <input type="hidden" name="email" value="{{ session('verification_email') }}"> <div class="verification-code-inputs"> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="0" required> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="1" required> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="2" required> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="3" required> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="4" required> <input type="text" class="verification-code-input" maxlength="1" pattern="[0-9]" inputmode="numeric" data-index="5" required> </div> <input type="hidden" name="code" id="verificationCodeInput"> <button type="submit" class="btn-submit"> <span>Vérifier</span> <i class="bi bi-check-circle"></i> </button> </form> <div class="verification-info"> <p>Vous n'avez pas reçu le code ? <a href="#" id="resendCode" onclick="resendVerificationCode(event)">Renvoyer</a></p> </div> <div class="resend-timer disabled" id="resendTimer"> Renvoyer dans <span id="timerCount">60</span>s </div> @if($errors->has('code')) <div class="alert-box error" style="margin-top: 16px;"> <i class="bi bi-exclamation-circle-fill"></i> <span>{{ $errors->first('code') }}</span> </div> @endif </div> </div> </div> @endif <script> document.addEventListener('DOMContentLoaded', function() { console.log('🚀 Welcome page loaded successfully'); // Network Status Check function updateNetworkStatus() { const networkStatus = document.getElementById('networkStatus'); if (navigator.onLine) { networkStatus.style.display = 'none'; } else { networkStatus.style.display = 'flex'; networkStatus.className = 'network-status offline'; networkStatus.innerHTML = '<i class="bi bi-wifi-off"></i><span>Aucune connexion réseau</span>'; } } window.addEventListener('online', updateNetworkStatus); window.addEventListener('offline', updateNetworkStatus); updateNetworkStatus(); // Tab Switching Function function switchTab(tabName) { const tabs = document.querySelectorAll('.auth-tab'); const forms = document.querySelectorAll('.auth-form'); tabs.forEach(tab => tab.classList.remove('active')); forms.forEach(form => form.classList.remove('active')); const selectedTab = document.querySelector(`.auth-tab[data-tab="${tabName}"]`); if (selectedTab) selectedTab.classList.add('active'); const selectedForm = document.querySelector(`#form-${tabName}`); if (selectedForm) selectedForm.classList.add('active'); clearAllValidations(); sessionStorage.setItem('cuniapp_current_tab', tabName); } function clearAllValidations() { document.querySelectorAll('.validation-message').forEach(msg => { msg.style.display = 'none'; msg.className = 'validation-message'; }); document.querySelectorAll('.form-input').forEach(input => { input.classList.remove('error', 'success'); }); } const tabs = document.querySelectorAll('.auth-tab'); tabs.forEach(tab => { tab.addEventListener('click', function(e) { e.preventDefault(); switchTab(this.getAttribute('data-tab')); }); }); @if ($errors->has('email') || $errors->has('password')) switchTab('login'); @elseif ($errors->has('name') || $errors->has('password_confirmation')) switchTab('register'); @else const savedTab = sessionStorage.getItem('cuniapp_current_tab'); if (savedTab) { switchTab(savedTab); } @endif // Password Strength Checker const registerPassword = document.getElementById('registerPassword'); const passwordStrengthFill = document.getElementById('passwordStrengthFill'); const passwordStrengthText = document.getElementById('passwordStrengthText'); const passwordConfirmation = document.getElementById('passwordConfirmation'); const passwordMatchValidation = document.getElementById('passwordMatchValidation'); if (registerPassword) { registerPassword.addEventListener('input', function() { checkPasswordStrength(this.value); checkPasswordMatch(); }); } if (passwordConfirmation) { passwordConfirmation.addEventListener('input', checkPasswordMatch); } function checkPasswordStrength(password) { const requirements = { length: password.length >= 8, uppercase: /[A-Z]/.test(password), lowercase: /[a-z]/.test(password), number: /[0-9]/.test(password), special: /[!@#$%^&*(),.?":{}|<>]/.test(password) }; updateRequirement('req-length', requirements.length); updateRequirement('req-uppercase', requirements.uppercase); updateRequirement('req-lowercase', requirements.lowercase); updateRequirement('req-number', requirements.number); updateRequirement('req-special', requirements.special); const strength = Object.values(requirements).filter(Boolean).length; passwordStrengthFill.className = 'password-strength-fill'; passwordStrengthText.className = 'password-strength-text'; if (strength <= 2) { passwordStrengthFill.classList.add('weak'); passwordStrengthText.classList.add('weak'); passwordStrengthText.textContent = 'Faible'; } else if (strength === 3) { passwordStrengthFill.classList.add('fair'); passwordStrengthText.classList.add('fair'); passwordStrengthText.textContent = 'Moyen'; } else if (strength === 4) { passwordStrengthFill.classList.add('good'); passwordStrengthText.classList.add('good'); passwordStrengthText.textContent = 'Bon'; } else { passwordStrengthFill.classList.add('strong'); passwordStrengthText.classList.add('strong'); passwordStrengthText.textContent = 'Excellent'; } } function updateRequirement(id, met) { const element = document.getElementById(id); if (element) { element.classList.toggle('met', met); element.querySelector('i').className = met ? 'bi bi-check-circle-fill' : 'bi bi-circle'; } } function checkPasswordMatch() { if (!passwordConfirmation || !registerPassword) return; const password = registerPassword.value; const confirmation = passwordConfirmation.value; if (confirmation.length === 0) { passwordMatchValidation.style.display = 'none'; return; } if (password === confirmation) { passwordMatchValidation.className = 'validation-message success'; passwordMatchValidation.innerHTML = '<i class="bi bi-check-circle-fill"></i><span>Les mots de passe correspondent</span>'; passwordMatchValidation.style.display = 'flex'; passwordConfirmation.classList.remove('error'); passwordConfirmation.classList.add('success'); } else { passwordMatchValidation.className = 'validation-message error'; passwordMatchValidation.innerHTML = '<i class="bi bi-x-circle-fill"></i><span>Les mots de passe ne correspondent pas</span>'; passwordMatchValidation.style.display = 'flex'; passwordConfirmation.classList.remove('success'); passwordConfirmation.classList.add('error'); } } // Name Character Counter const registerName = document.getElementById('registerName'); const nameCharCounter = document.getElementById('nameCharCounter'); const nameValidation = document.getElementById('nameValidation'); if (registerName && nameCharCounter) { registerName.addEventListener('input', function() { const length = this.value.length; nameCharCounter.textContent = `${length}/50`; if (length > 50) { nameCharCounter.classList.add('exceeded'); nameValidation.className = 'validation-message error'; nameValidation.innerHTML = '<i class="bi bi-x-circle-fill"></i><span>Le nom est trop long (max 50 caractères)</span>'; nameValidation.style.display = 'flex'; this.classList.add('error'); } else if (length > 0 && length < 2) { nameValidation.className = 'validation-message warning'; nameValidation.innerHTML = '<i class="bi bi-exclamation-circle-fill"></i><span>Le nom est trop court (min 2 caractères)</span>'; nameValidation.style.display = 'flex'; this.classList.add('error'); } else if (length >= 2) { nameCharCounter.classList.remove('exceeded'); nameValidation.style.display = 'none'; this.classList.remove('error'); this.classList.add('success'); } else { nameCharCounter.classList.remove('exceeded'); nameValidation.style.display = 'none'; this.classList.remove('error', 'success'); } }); } // Email Validation const loginEmail = document.getElementById('loginEmail'); const registerEmail = document.getElementById('registerEmail'); const loginEmailValidation = document.getElementById('loginEmailValidation'); const emailValidation = document.getElementById('emailValidation'); function validateEmail(input, validationElement) { if (!input || !validationElement) return; input.addEventListener('blur', function() { const email = this.value; const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; if (email.length === 0) { validationElement.style.display = 'none'; return; } if (!emailRegex.test(email)) { validationElement.className = 'validation-message error'; validationElement.innerHTML = '<i class="bi bi-x-circle-fill"></i><span>Format d\'email invalide</span>'; validationElement.style.display = 'flex'; this.classList.add('error'); this.classList.remove('success'); } else { validationElement.style.display = 'none'; this.classList.remove('error'); this.classList.add('success'); } }); } validateEmail(loginEmail, loginEmailValidation); validateEmail(registerEmail, emailValidation); // Form Loading State document.querySelectorAll('form').forEach(form => { form.addEventListener('submit', function() { const submitBtn = this.querySelector('.btn-submit'); if (submitBtn) { submitBtn.classList.add('loading'); submitBtn.querySelector('span').textContent = 'Chargement...'; submitBtn.querySelector('i').className = 'bi bi-hourglass-split'; } }); }); // ==================== VERIFICATION MODAL FUNCTIONS ==================== let resendTimerInterval; function closeVerificationModal() { document.getElementById('verificationOverlay').classList.remove('active'); } // Verification Code Input Handling document.querySelectorAll('.verification-code-input').forEach((input, index, inputs) => { input.addEventListener('input', function() { if (this.value.length === 1) { this.classList.add('filled'); if (index < inputs.length - 1) { inputs[index + 1].focus(); } } updateVerificationCode(); }); input.addEventListener('keydown', function(e) { if (e.key === 'Backspace' && this.value === '' && index > 0) { inputs[index - 1].focus(); inputs[index - 1].value = ''; inputs[index - 1].classList.remove('filled'); updateVerificationCode(); } }); }); function updateVerificationCode() { let code = ''; document.querySelectorAll('.verification-code-input').forEach(input => { code += input.value; }); document.getElementById('verificationCodeInput').value = code; // Auto-submit when all 6 digits entered if (code.length === 6) { // Optional: auto-submit // document.getElementById('verificationForm').submit(); } } // Resend Timer function startResendTimer() { const timerElement = document.getElementById('resendTimer'); const timerCount = document.getElementById('timerCount'); const resendLink = document.getElementById('resendCode'); let seconds = 60; timerElement.classList.remove('disabled'); resendLink.style.pointerEvents = 'none'; resendLink.style.opacity = '0.5'; clearInterval(resendTimerInterval); resendTimerInterval = setInterval(() => { seconds--; timerCount.textContent = seconds; if (seconds <= 0) { clearInterval(resendTimerInterval); timerElement.classList.add('disabled'); resendLink.style.pointerEvents = 'auto'; resendLink.style.opacity = '1'; } }, 1000); } function resendVerificationCode(e) { e.preventDefault(); const email = document.getElementById('verificationEmailDisplay').textContent; fetch('{{ route('verification.code.resend') }}', { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-CSRF-TOKEN': '{{ csrf_token() }}' }, body: JSON.stringify({ email: email }) }) .then(response => response.json()) .then(data => { if (data.success) { ('Un nouveau code a été envoyé à votre adresse email.'); startResendTimer(); } else { alert('Une erreur est survenue. Veuillez réessayer.'); } }) .catch(error => { alert('Une erreur est survenue. Veuillez réessayer.'); }); } // Close modal on Escape key document.addEventListener('keydown', function(e) { if (e.key === 'Escape') { closeVerificationModal(); } }); // Start timer on load if verification is pending @if(session('verification_pending')) startResendTimer(); // Focus first input setTimeout(() => { document.querySelector('.verification-code-input')?.focus(); }, 300); @endif }); </script> </body> </html>

Processed 49 files from resources/

═══════════════════════════════════════════════════
File Contents:
═══════════════════════════════════════════════════

File: app/Http/Controllers/Auth/AuthenticatedSessionController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use App\Http\Requests\Auth\LoginRequest; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; use Illuminate\Support\Facades\Auth; use Illuminate\View\View; class AuthenticatedSessionController extends Controller { /** * Display the welcome page */ public function create(): View { return view('welcome'); } /** * Handle authentication */ public function store(LoginRequest $request): RedirectResponse { $request->authenticate(); $request->session()->regenerate(); return redirect()->intended(route('dashboard')); } /** * Logout */ // app/Http/Controllers/Auth/AuthenticatedSessionController.php public function destroy(Request $request): RedirectResponse { Auth::guard('web')->logout(); $request->session()->invalidate(); $request->session()->regenerateToken(); return redirect()->route('welcome'); // Always go back to welcome page } }

File: app/Http/Controllers/Auth/ConfirmablePasswordController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; use Illuminate\Support\Facades\Auth; use Illuminate\Validation\ValidationException; use Illuminate\View\View; class ConfirmablePasswordController extends Controller { /** * Show the confirm password view. */ public function show(): View { return view('auth.confirm-password'); } /** * Confirm the user's password. */ public function store(Request $request): RedirectResponse { if (! Auth::guard('web')->validate([ 'email' => $request->user()->email, 'password' => $request->password, ])) { throw ValidationException::withMessages([ 'password' => __('auth.password'), ]); } $request->session()->put('auth.password_confirmed_at', time()); return redirect()->intended(route('dashboard', absolute: false)); } }

File: app/Http/Controllers/Auth/EmailVerificationCodeController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use App\Models\User; use Illuminate\Http\Request; use Illuminate\Support\Facades\Cache; use Illuminate\Support\Facades\Mail; use Illuminate\Support\Facades\Auth; use Illuminate\Auth\Events\Verified; class EmailVerificationCodeController extends Controller { /** * Send verification code to email (AJAX) */ public function sendCode(Request $request) { $request->validate([ 'email' => ['required', 'email', 'exists:users,email'], ]); $email = $request->email; $code = sprintf('%06d', mt_rand(0, 999999)); // Store code in cache for 10 minutes Cache::put("verification_code_{$email}", $code, 600); // Send email with HTML template Mail::send('emails.verification-code', [ 'code' => $code, 'email' => $email, ], function ($message) use ($email) { $message->to($email) ->subject('🔐 Code de vérification - CuniApp Élevage') ->from(config('mail.from.address'), config('mail.from.name')); }); return response()->json(['success' => true, 'message' => 'Code envoyé']); } /** * Verify the code (POST from modal) */ public function verify(Request $request) { $request->validate([ 'email' => ['required', 'email'], 'code' => ['required', 'string', 'size:6'], ]); $email = $request->email; $code = $request->code; $storedCode = Cache::get("verification_code_{$email}"); if (!$storedCode || $storedCode !== $code) { return redirect()->route('welcome') ->with('verification_pending', true) ->with('verification_email', $email) ->withErrors(['code' => 'Code incorrect ou expiré. Veuillez demander un nouveau code.']); } $user = User::where('email', $email)->first(); if (!$user) { return redirect()->route('welcome') ->withErrors(['email' => 'Utilisateur non trouvé.']); } // ✅ ONLY mark as verified - DO NOT LOG IN $user->email_verified_at = now(); $user->save(); Cache::forget("verification_code_{$email}"); event(new Verified($user)); // ✅ CLEAR verification session flags session()->forget(['verification_pending', 'verification_email']); // ✅ Redirect to welcome page WITHOUT logging in return redirect()->route('welcome') ->with('success', '✅ Email vérifié avec succès ! Vous pouvez maintenant vous connecter.'); } /** * Resend verification code (AJAX) */ public function resend(Request $request) { $request->validate([ 'email' => ['required', 'email'], ]); $email = $request->email; $code = sprintf('%06d', mt_rand(0, 999999)); Cache::put("verification_code_{$email}", $code, 600); Mail::send('emails.verification-code', [ 'code' => $code, 'email' => $email, ], function ($message) use ($email) { $message->to($email) ->subject('🔐 Nouveau code - CuniApp Élevage') ->from(config('mail.from.address'), config('mail.from.name')); }); return response()->json(['success' => true, 'message' => 'Nouveau code envoyé']); } }

File: app/Http/Controllers/Auth/EmailVerificationNotificationController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; class EmailVerificationNotificationController extends Controller { /** * Send a new email verification notification. */ public function store(Request $request): RedirectResponse { if ($request->user()->hasVerifiedEmail()) { return redirect()->intended(route('dashboard', absolute: false)); } $request->user()->sendEmailVerificationNotification(); return back()->with('status', 'verification-link-sent'); } }

File: app/Http/Controllers/Auth/EmailVerificationPromptController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; use Illuminate\View\View; class EmailVerificationPromptController extends Controller { /** * Display the email verification prompt. */ public function __invoke(Request $request): RedirectResponse|View { return $request->user()->hasVerifiedEmail() ? redirect()->intended(route('dashboard', absolute: false)) : view('auth.verify-email'); } }

File: app/Http/Controllers/Auth/NewPasswordController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use App\Models\User; use Illuminate\Auth\Events\PasswordReset; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; use Illuminate\Support\Facades\Hash; use Illuminate\Support\Facades\Password; use Illuminate\Support\Str; use Illuminate\Validation\Rules; use Illuminate\View\View; class NewPasswordController extends Controller { /** * Display the password reset view. */ public function create(Request $request): View { return view('auth.reset-password', ['request' => $request]); } /** * Handle an incoming new password request. * * @throws \Illuminate\Validation\ValidationException */ public function store(Request $request): RedirectResponse { $request->validate([ 'token' => ['required'], 'email' => ['required', 'email'], 'password' => ['required', 'confirmed', Rules\Password::defaults()], ]); // Here we will attempt to reset the user's password. If it is successful we // will update the password on an actual user model and persist it to the // database. Otherwise we will parse the error and return the response. $status = Password::reset( $request->only('email', 'password', 'password_confirmation', 'token'), function (User $user) use ($request) { $user->forceFill([ 'password' => $request->password, 'remember_token' => Str::random(60), ])->save(); event(new PasswordReset($user)); } ); // If the password was successfully reset, we will redirect the user back to // the application's home authenticated view. If there is an error we can // redirect them back to where they came from with their error message. return $status == Password::PASSWORD_RESET ? redirect()->route('login')->with('status', __($status)) : back()->withInput($request->only('email')) ->withErrors(['email' => __($status)]); } }

File: app/Http/Controllers/Auth/PasswordController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; use Illuminate\Support\Facades\Hash; use Illuminate\Validation\Rules\Password; class PasswordController extends Controller { /** * Update the user's password. */ public function update(Request $request): RedirectResponse { $validated = $request->validateWithBag('updatePassword', [ 'current_password' => ['required', 'current_password'], 'password' => ['required', Password::defaults(), 'confirmed'], ]); $request->user()->update([ 'password' => Hash::make($validated['password']), ]); return back()->with('status', 'password-updated'); } }

File: app/Http/Controllers/Auth/PasswordResetLinkController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; use Illuminate\Support\Facades\Password; use Illuminate\View\View; class PasswordResetLinkController extends Controller { /** * Display the password reset link request view. */ public function create(): View { return view('auth.forgot-password'); } /** * Handle an incoming password reset link request. * * @throws \Illuminate\Validation\ValidationException */ public function store(Request $request): RedirectResponse { $request->validate([ 'email' => ['required', 'email'], ]); // We will send the password reset link to this user. Once we have attempted // to send the link, we will examine the response then see the message we // need to show to the user. Finally, we'll send out a proper response. $status = Password::sendResetLink( $request->only('email') ); return $status == Password::RESET_LINK_SENT ? back()->with('status', __($status)) : back()->withInput($request->only('email')) ->withErrors(['email' => __($status)]); } }

File: app/Http/Controllers/Auth/RegisteredUserController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use App\Models\User; use Illuminate\Auth\Events\Registered; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; use Illuminate\Support\Facades\Auth; use Illuminate\Support\Facades\Hash; use Illuminate\Support\Facades\Cache; use Illuminate\Support\Facades\Mail; use Illuminate\Validation\Rules; use Illuminate\View\View; class RegisteredUserController extends Controller { /** * Display registration (redirects to welcome page) */ public function create(): View { return view('welcome'); } /** * Handle registration */ public function store(Request $request): RedirectResponse { $request->validate([ 'name' => ['required', 'string', 'max:255'], 'email' => ['required', 'string', 'lowercase', 'email', 'max:255', 'unique:' . User::class], 'password' => ['required', 'confirmed', Rules\Password::defaults()], 'terms' => ['accepted'], ]); $user = User::create([ 'name' => $request->name, 'email' => $request->email, 'password' => Hash::make($request->password), 'email_verified_at' => null, // ✅ MUST be null ]); // Generate verification code $code = sprintf('%06d', mt_rand(0, 999999)); Cache::put("verification_code_{$user->email}", $code, 600); // Send email Mail::send('emails.verification-code', [ 'code' => $code, 'email' => $user->email, ], function ($message) use ($user) { $message->to($user->email) ->subject('🔐 Code de vérification - CuniApp Élevage') ->from(config('mail.from.address'), config('mail.from.name')); }); // ✅ CRITICAL: Log out ANY existing session Auth::logout(); $request->session()->flush(); $request->session()->regenerate(); // Store verification state session([ 'verification_pending' => true, 'verification_email' => $user->email, ]); return redirect()->route('welcome') ->with('success', 'Inscription réussie ! Vérifiez votre email pour activer votre compte.') ->with('verification_pending', true) ->with('verification_email', $user->email); } }

File: app/Http/Controllers/Auth/VerifyEmailController.php
---
<?php namespace App\Http\Controllers\Auth; use App\Http\Controllers\Controller; use Illuminate\Auth\Events\Verified; use Illuminate\Foundation\Auth\EmailVerificationRequest; use Illuminate\Http\RedirectResponse; class VerifyEmailController extends Controller { /** * Mark the authenticated user's email address as verified. */ public function __invoke(EmailVerificationRequest $request): RedirectResponse { if ($request->user()->hasVerifiedEmail()) { return redirect()->intended(route('dashboard', absolute: false).'?verified=1'); } if ($request->user()->markEmailAsVerified()) { event(new Verified($request->user())); } return redirect()->intended(route('dashboard', absolute: false).'?verified=1'); } }

File: app/Http/Controllers/Controller.php
---
<?php namespace App\Http\Controllers; abstract class Controller { // }

File: app/Http/Controllers/DashboardController.php
---
<?php namespace App\Http\Controllers; use Illuminate\Http\Request; use App\Models\Male; use App\Models\Femelle; use App\Models\Saillie; use App\Models\MiseBas; use App\Models\Sale; // ✅ IMPORT OBLIGATOIRE POUR LES VENTES use Carbon\Carbon; class DashboardController extends Controller { public function index() { // Période actuelle : cette semaine $startOfWeek = Carbon::now()->startOfWeek(); $endOfWeek = Carbon::now()->endOfWeek(); // Période précédente : semaine dernière $startLastWeek = Carbon::now()->subWeek()->startOfWeek(); $endLastWeek = Carbon::now()->subWeek()->endOfWeek(); // Comptage actuel $nbMales = Male::count(); $nbFemelles = Femelle::count(); $nbSaillies = Saillie::count(); $nbMisesBas = MiseBas::count(); // ✅ CALCUL DU CHIFFRE D'AFFAIRES (avec protection si table absente) try { $totalRevenue = Sale::sum('total_amount'); } catch (\Exception $e) { $totalRevenue = 0; // Valeur par défaut si table non migrée } // Comptage période précédente $oldMales = Male::whereBetween('created_at', [$startLastWeek, $endLastWeek])->count(); $oldFemelles = Femelle::whereBetween('created_at', [$startLastWeek, $endLastWeek])->count(); $oldSaillies = Saillie::whereBetween('created_at', [$startLastWeek, $endLastWeek])->count(); $oldMisesBas = MiseBas::whereBetween('created_at', [$startLastWeek, $endLastWeek])->count(); // Pourcentages d'évolution $malePercent = $oldMales > 0 ? (($nbMales - $oldMales) / $oldMales) * 100 : 0; $femalePercent = $oldFemelles > 0 ? (($nbFemelles - $oldFemelles) / $oldFemelles) * 100 : 0; $sailliePercent = $oldSaillies > 0 ? (($nbSaillies - $oldSaillies) / $oldSaillies) * 100 : 0; $miseBasPercent = $oldMisesBas > 0 ? (($nbMisesBas - $oldMisesBas) / $oldMisesBas) * 100 : 0; // Liste des mâles récents $males = Male::orderBy('created_at', 'desc')->paginate(10); // Liste des femelles récentes $femelles = Femelle::orderBy('created_at', 'desc')->paginate(10); return view('dashboard', compact( 'nbMales', 'nbFemelles', 'nbSaillies', 'nbMisesBas', 'malePercent', 'femalePercent', 'sailliePercent', 'miseBasPercent', 'males', 'femelles', 'totalRevenue' // ✅ VARIABLE PASSÉE À LA VUE )); } }

File: app/Http/Controllers/FemelleController.php
---
<?php namespace App\Http\Controllers; use App\Models\Femelle; use Illuminate\Http\Request; use App\Traits\Notifiable; class FemelleController extends Controller { use Notifiable; /** * Display a listing of the resource. */ public function index() { $femelles = Femelle::latest()->paginate(10); return view('femelles.index', compact('femelles')); } /** * Show the form for creating a new resource. */ public function create() { $lastCode = Femelle::where('code', 'LIKE', 'FEM-%') ->orderBy('code', 'desc') ->value('code'); $nextNumber = $lastCode ? intval(substr($lastCode, 4)) + 1 : 1; $suggestedCode = 'FEM-' . str_pad($nextNumber, 4, '0', STR_PAD_LEFT); return view('femelles.create', compact('suggestedCode')); } /** * Store a newly created resource in storage. */ public function store(Request $request) { $request->validate([ 'code' => 'required|unique:femelles,code', 'nom' => 'required|string', 'race' => 'nullable|string', 'origine' => 'required|in:Interne,Achat', 'date_naissance' => 'nullable|date', 'etat' => 'required|in:Active,Gestante,Allaitante,Vide', ]); $femelle = Femelle::create($request->all()); // Create notification $this->notifyUser([ 'type' => 'success', 'title' => 'Nouvelle Femelle Enregistrée', 'message' => "Femelle '{$femelle->nom}' ({$femelle->code}) ajoutée à l'élevage.", 'action_url' => route('femelles.show', $femelle), ]); // Flash toast session()->flash('toast', [ 'type' => 'success', 'title' => 'Succès !', 'message' => "Femelle '{$femelle->nom}' enregistrée avec succès.", 'action_url' => route('femelles.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('femelles.index') ->with('success', 'Lapin femelle ajouté avec succès !'); } /** * Display the specified resource. */ public function show($id) { $femelle = Femelle::findOrFail($id); return view('femelles.show', compact('femelle')); } /** * Show the form for editing the specified resource. */ public function edit($id) { $femelle = Femelle::findOrFail($id); return view('femelles.edit', compact('femelle')); } /** * Update the specified resource in storage. */ public function update(Request $request, $id) { $femelle = Femelle::findOrFail($id); $request->validate([ 'code' => 'required|unique:femelles,code,' . $femelle->id, 'nom' => 'required|string', 'race' => 'nullable|string', 'origine' => 'required|in:Interne,Achat', 'date_naissance' => 'nullable|date', 'etat' => 'required|in:Active,Gestante,Allaitante,Vide', ]); $oldNom = $femelle->nom; $femelle->update($request->all()); // Create notification $this->notifyUser([ 'type' => 'info', 'title' => 'Femelle Modifiée', 'message' => "Informations de la femelle '{$femelle->nom}' mises à jour.", 'action_url' => route('femelles.show', $femelle), ]); // Flash toast session()->flash('toast', [ 'type' => 'info', 'title' => 'Mise à jour !', 'message' => "Femelle '{$femelle->nom}' modifiée avec succès.", 'action_url' => route('femelles.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('femelles.index') ->with('success', 'Lapin femelle modifié avec succès !'); } /** * Remove the specified resource from storage. */ public function destroy($id) { $femelle = Femelle::findOrFail($id); $femelleName = $femelle->nom; $femelle->delete(); // Create notification $this->notifyUser([ 'type' => 'warning', 'title' => 'Femelle Supprimée', 'message' => "La femelle '{$femelleName}' a été supprimée de l'élevage.", 'action_url' => route('femelles.index'), ]); // Flash toast session()->flash('toast', [ 'type' => 'warning', 'title' => 'Supprimée !', 'message' => "Femelle '{$femelleName}' supprimée avec succès.", 'duration' => 5000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('femelles.index') ->with('success', 'Lapin femelle supprimé avec succès !'); } /** * Toggle femelle state */ public function toggleEtat(Femelle $femelle) { $etats = ['Active', 'Gestante', 'Allaitante', 'Vide']; $currentIndex = array_search($femelle->etat, $etats); $nextIndex = ($currentIndex + 1) % count($etats); $oldEtat = $femelle->etat; $newEtat = $etats[$nextIndex]; $femelle->etat = $newEtat; $femelle->save(); // Create notification $this->notifyUser([ 'type' => 'info', 'title' => 'État de la Femelle Mis à Jour', 'message' => "État de '{$femelle->nom}' : {$oldEtat} → {$newEtat}", 'action_url' => route('femelles.show', $femelle), ]); // Flash toast session()->flash('toast', [ 'type' => 'info', 'title' => 'État mis à jour !', 'message' => "État de '{$femelle->nom}' : {$newEtat}", 'action_url' => route('femelles.index'), 'duration' => 4000, 'timestamp' => now()->toIso8601String() ]); return redirect()->back() ->with('success', 'État mis à jour avec succès !'); } public function checkCode(Request $request) { $exists = Femelle::where('code', $request->code)->exists(); return response()->json(['available' => !$exists]); } }

File: app/Http/Controllers/LapinController.php
---
<?php namespace App\Http\Controllers; use Illuminate\Http\Request; use App\Models\Male; use App\Models\Femelle; use App\Traits\Notifiable; class LapinController extends Controller { use Notifiable; /** * Display a listing of the resource. */ public function index() { $femelles = Femelle::latest()->paginate(10, ['*'], 'femelles_page'); $males = Male::latest()->paginate(10, ['*'], 'males_page'); return view('lapins.index', compact('femelles', 'males')); } /** * Show the form for creating a new resource. */ public function create() { return view('lapins.create'); } /** * Store a newly created resource in storage. */ public function store(Request $request) { $request->validate([ 'type' => 'required|in:male,femelle', // ✅ Already correct 'nom' => 'required|string|max:255', 'race' => 'required|string|max:255', 'origine' => 'required|string|max:255', 'date_naissance' => 'required|date', 'etat' => 'required|in:active,inactive', // ✅ This is correct (form sends English) ]); // Generate unique code $code = ($request->type === 'male' ? 'MAL-' : 'FEM-') . str_pad(rand(1, 9999), 4, '0', STR_PAD_LEFT); if ($request->type === 'male') { $male = Male::create([ 'code' => $code, 'nom' => $request->nom, 'race' => $request->race, 'origine' => $request->origine, 'date_naissance' => $request->date_naissance, 'etat' => $request->etat === 'active' ? 'Active' : 'Inactive', // ✅ Converts to French ]); // Create notification $this->notifyUser([ 'type' => 'success', 'title' => 'Nouveau Lapin Enregistré', 'message' => "Mâle '{$male->nom}' ({$male->code}) ajouté à l'élevage.", 'action_url' => route('males.show', $male), ]); // Flash toast session()->flash('toast', [ 'type' => 'success', 'title' => 'Succès !', 'message' => "Mâle '{$male->nom}' créé avec succès.", 'action_url' => route('males.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('males.index') ->with('success', 'Mâle créé avec succès.'); } else { // ✅ FIXED: For females, default to 'Active' (not 'active') $femelle = Femelle::create([ 'code' => $code, 'nom' => $request->nom, 'race' => $request->race, 'origine' => $request->origine, 'date_naissance' => $request->date_naissance, 'etat' => 'Active', // ✅ Femelles always start as 'Active' (French) ]); // Create notification $this->notifyUser([ 'type' => 'success', 'title' => 'Nouvelle Lapine Enregistrée', 'message' => "Femelle '{$femelle->nom}' ({$femelle->code}) ajoutée à l'élevage.", 'action_url' => route('femelles.show', $femelle), ]); // Flash toast session()->flash('toast', [ 'type' => 'success', 'title' => 'Succès !', 'message' => "Femelle '{$femelle->nom}' créée avec succès.", 'action_url' => route('femelles.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('femelles.index') ->with('success', 'Femelle créée avec succès.'); } } }

File: app/Http/Controllers/MaleController.php
---
<?php namespace App\Http\Controllers; use Illuminate\Http\Request; use App\Models\Male; use App\Traits\Notifiable; class MaleController extends Controller { use Notifiable; /** * Display a listing of the resource. */ public function index() { $males = Male::latest()->paginate(10); return view('males.index', compact('males')); } /** * Store a newly created resource in storage. */ public function create() { // Generate next available unique code $lastCode = Male::where('code', 'LIKE', 'MAL-%') ->orderBy('code', 'desc') ->value('code'); $nextNumber = $lastCode ? intval(substr($lastCode, 4)) + 1 : 1; $suggestedCode = 'MAL-' . str_pad($nextNumber, 4, '0', STR_PAD_LEFT); return view('males.create', compact('suggestedCode')); } // In store method - validation already handles uniqueness! // No changes needed to validation rules /** * Display the specified resource. */ public function show($id) { $male = Male::findOrFail($id); return view('males.show', compact('male')); } /** * Show the form for editing the specified resource. */ public function edit($id) { $male = Male::findOrFail($id); return view('males.edit', compact('male')); } /** * Update the specified resource in storage. */ public function update(Request $request, $id) { $male = Male::findOrFail($id); $request->validate([ 'code' => 'required|unique:males,code,' . $male->id, 'nom' => 'required|string|max:255', 'race' => 'nullable|string|max:255', 'origine' => 'required|in:Interne,Achat', 'date_naissance' => 'required|date', 'etat' => 'required|in:Active,Inactive,Malade', ]); $oldNom = $male->nom; $male->update($request->all()); // Create notification $this->notifyUser([ 'type' => 'info', 'title' => 'Mâle Modifié', 'message' => "Informations du mâle '{$male->nom}' mises à jour.", 'action_url' => route('males.show', $male), ]); // Flash toast session()->flash('toast', [ 'type' => 'info', 'title' => 'Mise à jour !', 'message' => "Mâle '{$male->nom}' modifié avec succès.", 'action_url' => route('males.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('males.index') ->with('success', 'Mâle modifié avec succès.'); } /** * Remove the specified resource from storage. */ public function destroy($id) { $male = Male::findOrFail($id); $maleName = $male->nom; $male->delete(); // Create notification $this->notifyUser([ 'type' => 'warning', 'title' => 'Mâle Supprimé', 'message' => "Le mâle '{$maleName}' a été supprimé de l'élevage.", 'action_url' => route('males.index'), ]); // Flash toast session()->flash('toast', [ 'type' => 'warning', 'title' => 'Supprimé !', 'message' => "Mâle '{$maleName}' supprimé avec succès.", 'duration' => 5000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('males.index') ->with('success', 'Mâle supprimé avec succès.'); } /** * Toggle male state */ public function toggleEtat(Male $male) { $etats = ['Active', 'Inactive', 'Malade']; $currentIndex = array_search($male->etat, $etats); $nextIndex = ($currentIndex + 1) % count($etats); $oldEtat = $male->etat; $newEtat = $etats[$nextIndex]; $male->etat = $newEtat; $male->save(); // Create notification $this->notifyUser([ 'type' => 'info', 'title' => 'État du Mâle Mis à Jour', 'message' => "État de '{$male->nom}' : {$oldEtat} → {$newEtat}", 'action_url' => route('males.show', $male), ]); // Flash toast session()->flash('toast', [ 'type' => 'info', 'title' => 'État mis à jour !', 'message' => "État de '{$male->nom}' : {$newEtat}", 'action_url' => route('males.index'), 'duration' => 4000, 'timestamp' => now()->toIso8601String() ]); return redirect()->back() ->with('success', 'État mis à jour avec succès !'); } public function checkCode(Request $request) { $exists = Male::where('code', $request->code)->exists(); return response()->json(['available' => !$exists]); } }

File: app/Http/Controllers/MiseBasController.php
---
<?php namespace App\Http\Controllers; use App\Models\MiseBas; use App\Models\Femelle; use Illuminate\Http\Request; use App\Traits\Notifiable; class MiseBasController extends Controller { use Notifiable; /** * Display a listing of the resource. */ public function index() { $misesBas = MiseBas::with('femelle')->latest()->paginate(10); return view('mises_bas.index', compact('misesBas')); } /** * Show the form for creating a new resource. */ public function create() { $femelles = Femelle::all(); return view('mises_bas.create', compact('femelles')); } /** * Store a newly created resource in storage. */ public function store(Request $request) { $request->validate([ 'femelle_id' => 'required|exists:femelles,id', 'date_mise_bas' => 'required|date', 'nb_vivant' => 'required|integer|min:1', 'nb_mort_ne' => 'nullable|integer|min:0', 'date_sevrage' => 'nullable|date', 'poids_moyen_sevrage' => 'nullable|numeric', ]); $miseBas = MiseBas::create([ 'femelle_id' => $request->femelle_id, 'date_mise_bas' => $request->date_mise_bas, 'nb_vivant' => $request->nb_vivant, 'nb_mort_ne' => $request->nb_mort_ne ?? 0, 'date_sevrage' => $request->date_sevrage, 'poids_moyen_sevrage' => $request->poids_moyen_sevrage, ]); $femelle = Femelle::find($request->femelle_id); $total = $request->nb_vivant + ($request->nb_mort_ne ?? 0); // Create notification $this->notifyUser([ 'type' => 'success', 'title' => 'Nouvelle Mise Bas Enregistrée', 'message' => "Mise bas de {$femelle->nom} : {$total} lapereaux ({$request->nb_vivant} vivants)", 'action_url' => route('mises-bas.show', $miseBas), ]); // Flash toast session()->flash('toast', [ 'type' => 'success', 'title' => 'Mise bas enregistrée !', 'message' => "{$total} lapereaux nés de {$femelle->nom}", 'action_url' => route('mises-bas.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('mises-bas.index') ->with('success', 'Mise bas enregistrée avec succès.'); } /** * Display the specified resource. */ public function show($id) { $miseBas = MiseBas::with('femelle')->findOrFail($id); return view('mises_bas.show', compact('miseBas')); } /** * Show the form for editing the specified resource. */ public function edit($id) { $miseBas = MiseBas::findOrFail($id); $femelles = Femelle::all(); return view('mises_bas.edit', compact('miseBas', 'femelles')); } /** * Update the specified resource in storage. */ public function update(Request $request, $id) { $miseBas = MiseBas::findOrFail($id); $request->validate([ 'femelle_id' => 'required|exists:femelles,id', 'date_mise_bas' => 'required|date', 'nb_vivant' => 'required|integer|min:1', 'nb_mort_ne' => 'nullable|integer|min:0', 'date_sevrage' => 'nullable|date', 'poids_moyen_sevrage' => 'nullable|numeric', ]); $oldTotal = $miseBas->nb_vivant + $miseBas->nb_mort_ne; $newTotal = $request->nb_vivant + ($request->nb_mort_ne ?? 0); $miseBas->update([ 'femelle_id' => $request->femelle_id, 'date_mise_bas' => $request->date_mise_bas, 'nb_vivant' => $request->nb_vivant, 'nb_mort_ne' => $request->nb_mort_ne ?? 0, 'date_sevrage' => $request->date_sevrage, 'poids_moyen_sevrage' => $request->poids_moyen_sevrage, ]); $femelle = Femelle::find($request->femelle_id); // Create notification $this->notifyUser([ 'type' => 'info', 'title' => 'Mise Bas Modifiée', 'message' => "Mise bas de {$femelle->nom} mise à jour : {$newTotal} lapereaux", 'action_url' => route('mises-bas.show', $miseBas), ]); // Flash toast session()->flash('toast', [ 'type' => 'info', 'title' => 'Mise à jour !', 'message' => "Mise bas de {$femelle->nom} modifiée avec succès.", 'action_url' => route('mises-bas.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('mises-bas.index') ->with('success', 'Mise bas mise à jour avec succès.'); } /** * Remove the specified resource from storage. */ public function destroy($id) { $miseBas = MiseBas::with('femelle')->findOrFail($id); $femelleName = $miseBas->femelle->nom; $total = $miseBas->nb_vivant + $miseBas->nb_mort_ne; $miseBas->delete(); // Create notification $this->notifyUser([ 'type' => 'warning', 'title' => 'Mise Bas Supprimée', 'message' => "Mise bas de {$femelleName} ({$total} lapereaux) supprimée.", 'action_url' => route('mises-bas.index'), ]); // Flash toast session()->flash('toast', [ 'type' => 'warning', 'title' => 'Supprimée !', 'message' => "Mise bas de {$femelleName} supprimée avec succès.", 'duration' => 5000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('mises-bas.index') ->with('success', 'Mise bas supprimée avec succès.'); } }

File: app/Http/Controllers/NotificationController.php
---
<?php namespace App\Http\Controllers; use App\Models\Notification; use Illuminate\Http\Request; use Illuminate\Support\Facades\Auth; class NotificationController extends Controller { use \App\Traits\Notifiable; public function index() { $notifications = Notification::where('user_id', Auth::id()) ->orderBy('created_at', 'desc') ->paginate(25); $unreadCount = Notification::where('user_id', Auth::id()) ->where('is_read', false) ->count(); return view('notifications.index', compact('notifications', 'unreadCount')); } public function markAsRead(string $id) { $notification = Notification::where('user_id', Auth::id()) ->findOrFail($id); $notification->markAsRead(); if ($notification->action_url && request()->wantsJson()) { return response()->json([ 'redirect' => $notification->action_url ]); } return back()->with('success', 'Notification marquée comme lue'); } public function markAllAsRead() { Notification::where('user_id', Auth::id()) ->where('is_read', false) ->update([ 'is_read' => true, 'read_at' => now() ]); return back()->with('success', 'Toutes les notifications ont été marquées comme lues'); } public function destroy(string $id) { $notification = Notification::where('user_id', Auth::id()) ->findOrFail($id); $notification->delete(); return back()->with('success', 'Notification supprimée'); } }

File: app/Http/Controllers/ProfileController.php
---
<?php namespace App\Http\Controllers; use App\Http\Requests\ProfileUpdateRequest; use Illuminate\Http\RedirectResponse; use Illuminate\Http\Request; use Illuminate\Support\Facades\Auth; use Illuminate\Support\Facades\Redirect; use Illuminate\View\View; use App\Models\User; use Illuminate\Support\Facades\Hash; class ProfileController extends Controller { /** * Display the user's profile form. */ public function edit(Request $request): View { return view('profile.edit', [ 'user' => $request->user(), ]); } /** * Update the user's profile information. */ public function update(ProfileUpdateRequest $request): RedirectResponse { // $request->user()->fill($request->validated()); // if ($request->user()->isDirty('email')) { // $request->user()->email_verified_at = null; // } // $request->user()->save(); $user = User::find(Auth::id()); $validated = $request->validate([ 'name' => 'required|string|max:255', 'email' => 'required|email|max:255|unique:users,email,' . $user->id, 'current_password' => 'nullable|required_with:new_password', 'new_password' => 'nullable|min:8|confirmed', ]); $user->name = $request->name; $user->email = $request->email; if ($request->filled('new_password')) { if (!Hash::check($request->current_password, $user->password)) { return back()->withErrors(['current_password' => 'Le mot de passe actuel est incorrect.']); } $user->password = Hash::make($request->new_password); } $user->save(); return Redirect::route('profile.edit')->with('status', 'profile-updated'); } /** * Delete the user's account. */ public function destroy(Request $request): RedirectResponse { $request->validateWithBag('userDeletion', [ 'password' => ['required', 'current_password'], ]); $user = $request->user(); Auth::logout(); $user->delete(); $request->session()->invalidate(); $request->session()->regenerateToken(); return Redirect::to('/'); } }

File: app/Http/Controllers/SaillieController.php
---
<?php namespace App\Http\Controllers; use App\Models\Saillie; use App\Models\Femelle; use App\Models\Male; use Illuminate\Http\Request; use Carbon\Carbon; use App\Traits\Notifiable; class SaillieController extends Controller { use Notifiable; /** * Display a listing of the resource. */ public function index() { $saillies = Saillie::with(['femelle', 'male'])->latest()->paginate(10); return view('saillies.index', compact('saillies')); } /** * Show the form for creating a new resource. */ public function create() { $femelles = Femelle::all(); $males = Male::all(); return view('saillies.create', compact('femelles', 'males')); } /** * Store a newly created resource in storage. */ public function store(Request $request) { $request->validate([ 'femelle_id' => 'required|exists:femelles,id', 'male_id' => 'required|exists:males,id', 'date_saillie' => 'required|date', 'date_palpage' => 'nullable|date', 'palpation_resultat' => 'nullable|in:+,-', ]); $saillie = new Saillie(); $saillie->femelle_id = $request->femelle_id; $saillie->male_id = $request->male_id; $saillie->date_saillie = $request->date_saillie; $saillie->date_palpage = $request->date_palpage; $saillie->palpation_resultat = $request->palpation_resultat; $saillie->date_mise_bas_theorique = Carbon::parse($request->date_saillie)->addDays(31); $saillie->save(); // Get femelle and male names for notification $femelle = Femelle::find($request->femelle_id); $male = Male::find($request->male_id); // Create notification $this->notifyUser([ 'type' => 'success', 'title' => 'Nouvelle Saillie Enregistrée', 'message' => "Saillie entre {$femelle->nom} et {$male->nom} planifiée pour le " . Carbon::parse($request->date_saillie)->format('d/m/Y'), 'action_url' => route('saillies.show', $saillie), ]); // Flash toast for real-time display session()->flash('toast', [ 'type' => 'success', 'title' => 'Succès !', 'message' => "Saillie entre {$femelle->nom} et {$male->nom} enregistrée avec succès.", 'action_url' => route('saillies.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('saillies.index') ->with('success', 'Saillie enregistrée avec succès ✅'); } /** * Display the specified resource. */ public function show(Saillie $saillie) { $saillie->load(['femelle', 'male']); return view('saillies.show', compact('saillie')); } /** * Show the form for editing the specified resource. */ public function edit(Saillie $saillie) { $femelles = Femelle::all(); $males = Male::all(); return view('saillies.edit', compact('saillie', 'femelles', 'males')); } /** * Update the specified resource in storage. */ public function update(Request $request, Saillie $saillie) { $request->validate([ 'femelle_id' => 'required|exists:femelles,id', 'male_id' => 'required|exists:males,id', 'date_saillie' => 'required|date', 'date_palpage' => 'nullable|date', 'palpation_resultat' => 'nullable|in:+,-', ]); $oldFemelle = Femelle::find($saillie->femelle_id); $oldMale = Male::find($saillie->male_id); $saillie->update([ 'femelle_id' => $request->femelle_id, 'male_id' => $request->male_id, 'date_saillie' => $request->date_saillie, 'date_palpage' => $request->date_palpage, 'palpation_resultat' => $request->palpation_resultat, 'date_mise_bas_theorique' => Carbon::parse($request->date_saillie)->addDays(31), ]); $newFemelle = Femelle::find($request->femelle_id); $newMale = Male::find($request->male_id); // Create notification $this->notifyUser([ 'type' => 'info', 'title' => 'Saillie Modifiée', 'message' => "Saillie mise à jour : {$newFemelle->nom} × {$newMale->nom} (date: " . Carbon::parse($request->date_saillie)->format('d/m/Y') . ")", 'action_url' => route('saillies.show', $saillie), ]); // Flash toast session()->flash('toast', [ 'type' => 'info', 'title' => 'Mise à jour !', 'message' => "Saillie entre {$newFemelle->nom} et {$newMale->nom} modifiée avec succès.", 'action_url' => route('saillies.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('saillies.index') ->with('success', 'Saillie mise à jour avec succès ✅'); } /** * Remove the specified resource from storage. */ public function destroy(Saillie $saillie) { $femelle = Femelle::find($saillie->femelle_id); $male = Male::find($saillie->male_id); $saillie->delete(); // Create notification $this->notifyUser([ 'type' => 'warning', 'title' => 'Saillie Supprimée', 'message' => "Saillie entre {$femelle->nom} et {$male->nom} a été supprimée du système.", 'action_url' => route('saillies.index'), ]); // Flash toast session()->flash('toast', [ 'type' => 'warning', 'title' => 'Supprimé !', 'message' => "Saillie entre {$femelle->nom} et {$male->nom} supprimée avec succès.", 'duration' => 5000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('saillies.index') ->with('success', 'Saillie supprimée avec succès ✅'); } /** * Update palpation result */ public function updatePalpation(Request $request, Saillie $saillie) { $request->validate([ 'palpation_resultat' => 'required|in:+,-', 'date_palpage' => 'required|date', ]); $oldResult = $saillie->palpation_resultat; $saillie->palpation_resultat = $request->palpation_resultat; $saillie->date_palpage = $request->date_palpage; $saillie->save(); $femelle = Femelle::find($saillie->femelle_id); $male = Male::find($saillie->male_id); $resultText = $request->palpation_resultat === '+' ? 'Positif (Gestante)' : 'Négatif'; $type = $request->palpation_resultat === '+' ? 'success' : 'warning'; // Create notification $this->notifyUser([ 'type' => $type, 'title' => 'Palpation Réalisée', 'message' => "Palpation de {$femelle->nom} × {$male->nom} : {$resultText}", 'action_url' => route('saillies.show', $saillie), ]); // Flash toast session()->flash('toast', [ 'type' => $type, 'title' => 'Palpation enregistrée !', 'message' => "Résultat : {$resultText}", 'action_url' => route('saillies.show', $saillie), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('saillies.show', $saillie) ->with('success', 'Palpation enregistrée avec succès ✅'); } }

File: app/Http/Controllers/SaleController.php
---
<?php namespace App\Http\Controllers; use App\Models\Sale; use Illuminate\Http\Request; use App\Traits\Notifiable; use Illuminate\Support\Facades\Auth; use Carbon\Carbon; class SaleController extends Controller { use Notifiable; /** * Display a listing of sales */ public function index() { $sales = Sale::with('user') ->latest() ->paginate(15); $stats = [ 'total_sales' => Sale::count(), 'total_revenue' => Sale::sum('total_amount'), 'pending_payments' => Sale::where('payment_status', 'pending')->sum('total_amount'), 'this_month' => Sale::whereMonth('date_sale', now()->month) ->whereYear('date_sale', now()->year) ->sum('total_amount') ]; return view('sales.index', compact('sales', 'stats')); } /** * Show form for creating new sale */ public function create() { return view('sales.create'); } /** * Store a newly created sale */ public function store(Request $request) { $validated = $request->validate([ 'date_sale' => 'required|date', 'quantity' => 'required|integer|min:1', 'type' => 'required|in:male,female,lapereau,groupe', 'category' => 'nullable|string', 'unit_price' => 'required|numeric|min:0', 'buyer_name' => 'required|string|max:255', 'buyer_contact' => 'nullable|string|max:100', 'buyer_address' => 'nullable|string', 'notes' => 'nullable|string', 'payment_status' => 'required|in:paid,pending,partial', 'amount_paid' => 'nullable|numeric|min:0' ]); // Calculate total amount $validated['total_amount'] = $validated['quantity'] * $validated['unit_price']; $validated['user_id'] = Auth::id(); // Set amount_paid based on payment status if ($validated['payment_status'] === 'paid') { $validated['amount_paid'] = $validated['total_amount']; } elseif ($validated['payment_status'] === 'partial') { $validated['amount_paid'] = $validated['amount_paid'] ?? 0; } else { $validated['amount_paid'] = 0; } $sale = Sale::create($validated); // ✅ NOTIFICATION 1: New Sale Created $typeLabel = $this->getTypeLabel($sale->type); $statusLabels = [ 'paid' => '✅ Payée', 'pending' => '⏳ En attente', 'partial' => '💵 Paiement partiel' ]; $this->notifyUser([ 'type' => $sale->payment_status === 'paid' ? 'success' : ($sale->payment_status === 'partial' ? 'info' : 'warning'), 'title' => '💰 Nouvelle Vente Enregistrée', 'message' => "Vente #{$sale->id}: {$sale->quantity} {$typeLabel} à {$sale->buyer_name} pour " . number_format($sale->total_amount, 2, ',', ' ') . " FCFA - {$statusLabels[$sale->payment_status]}", 'action_url' => route('sales.show', $sale) ]); // Flash toast session()->flash('toast', [ 'type' => 'success', 'title' => 'Vente enregistrée !', 'message' => "{$sale->quantity} {$typeLabel} vendu(s) à {$sale->buyer_name}", 'action_url' => route('sales.index'), 'duration' => 6000, 'timestamp' => now()->toIso8601String() ]); return redirect()->route('sales.index') ->with('success', 'Vente enregistrée avec succès !'); } /** * Display the specified sale */ public function show(Sale $sale) { // ✅ NOTIFICATION 2: Sale Viewed (Optional - for audit trail) // Uncomment if you want to track views: /* $this->notifyUser([ 'type' => 'info', 'title' => '👁️ Vente Consultée', 'message' => "Vente #{$sale->id} consultée par " . Auth::user()->name, 'action_url' => route('sales.show', $sale) ]); */ return view('sales.show', compact('sale')); } /** * Show form for editing sale */ public function edit(Sale $sale) { return view('sales.edit', compact('sale')); } /** * Update the specified sale */ public function update(Request $request, Sale $sale) { $validated = $request->validate([ 'date_sale' => 'required|date', 'quantity' => 'required|integer|min:1', 'type' => 'required|in:male,female,lapereau,groupe', 'category' => 'nullable|string', 'unit_price' => 'required|numeric|min:0', 'buyer_name' => 'required|string|max:255', 'buyer_contact' => 'nullable|string|max:100', 'buyer_address' => 'nullable|string', 'notes' => 'nullable|string', 'payment_status' => 'required|in:paid,pending,partial', 'amount_paid' => 'nullable|numeric|min:0' ]); $oldTotal = $sale->total_amount; $validated['total_amount'] = $validated['quantity'] * $validated['unit_price']; // Track payment status change $statusChanged = ($sale->payment_status !== $validated['payment_status']); $oldStatus = $sale->payment_status; $newStatus = $validated['payment_status']; if ($validated['payment_status'] === 'paid') { $validated['amount_paid'] = $validated['total_amount']; } elseif ($validated['payment_status'] === 'partial') { $validated['amount_paid'] = $validated['amount_paid'] ?? $sale->amount_paid; } else { $validated['amount_paid'] = 0; } $sale->update($validated); // ✅ NOTIFICATION 3: Sale Updated $typeLabel = $this->getTypeLabel($sale->type); $this->notifyUser([ 'type' => 'info', 'title' => '✏️ Vente Modifiée', 'message' => "Vente #{$sale->id} mise à jour: {$sale->quantity} {$typeLabel} - " . number_format($sale->total_amount, 2, ',', ' ') . " FCFA", 'action_url' => route('sales.show', $sale) ]); // ✅ NOTIFICATION 4: Payment Status Changed if ($statusChanged) { $statusLabels = [ 'paid' => '✅ Payé', 'pending' => '⏳ En attente', 'partial' => '💵 Paiement partiel' ]; $this->notifyUser([ 'type' => $newStatus === 'paid' ? 'success' : ($newStatus === 'partial' ? 'info' : 'warning'), 'title' => '💳 Statut de Paiement Mis à Jour', 'message' => "Vente #{$sale->id}: {$statusLabels[$oldStatus]} → {$statusLabels[$newStatus]}", 'action_url' => route('sales.show', $sale) ]); } return redirect()->route('sales.index') ->with('success', 'Vente mise à jour avec succès !'); } /** * Remove the specified sale */ public function destroy(Sale $sale) { $typeLabel = $this->getTypeLabel($sale->type); $saleInfo = "{$sale->quantity} {$typeLabel} à {$sale->buyer_name} pour " . number_format($sale->total_amount, 2, ',', ' ') . " FCFA"; $sale->delete(); // ✅ NOTIFICATION 5: Sale Deleted $this->notifyUser([ 'type' => 'warning', 'title' => '🗑️ Vente Supprimée', 'message' => "Vente #{$sale->id} supprimée: {$saleInfo}", 'action_url' => route('sales.index') ]); return redirect()->route('sales.index') ->with('success', 'Vente supprimée avec succès !'); } /** * Mark sale as paid */ public function markAsPaid(Sale $sale) { if ($sale->payment_status === 'paid') { return back()->with('warning', 'Cette vente est déjà payée !'); } $oldStatus = $sale->payment_status; $sale->update([ 'payment_status' => 'paid', 'amount_paid' => $sale->total_amount ]); // ✅ NOTIFICATION 6: Payment Received $this->notifyUser([ 'type' => 'success', 'title' => '✅ Paiement Reçu', 'message' => "Paiement complet reçu pour la vente #{$sale->id} (" . number_format($sale->total_amount, 2, ',', ' ') . " FCFA) - {$sale->buyer_name}", 'action_url' => route('sales.show', $sale) ]); // Flash toast session()->flash('toast', [ 'type' => 'success', 'title' => 'Paiement reçu !', 'message' => "Vente #{$sale->id} marquée comme payée", 'action_url' => route('sales.index'), 'duration' => 5000, 'timestamp' => now()->toIso8601String() ]); return back()->with('success', 'Paiement marqué comme reçu !'); } /** * ✅ NEW: Record Partial Payment */ public function recordPartialPayment(Request $request, Sale $sale) { $request->validate([ 'amount_paid' => 'required|numeric|min:0|max:' . $sale->total_amount ]); $oldAmount = $sale->amount_paid; $newAmount = $request->amount_paid; $remaining = $sale->total_amount - $newAmount; $sale->update([ 'payment_status' => $remaining > 0 ? 'partial' : 'paid', 'amount_paid' => $newAmount ]); // ✅ NOTIFICATION 7: Partial Payment Received $this->notifyUser([ 'type' => $remaining > 0 ? 'info' : 'success', 'title' => $remaining > 0 ? '💵 Paiement Partiel Reçu' : '✅ Paiement Final Reçu', 'message' => "Vente #{$sale->id}: +" . number_format($newAmount - $oldAmount, 2, ',', ' ') . " FCFA reçus. " . ($remaining > 0 ? "Solde restant: " . number_format($remaining, 2, ',', ' ') . " FCFA" : "Solde soldé !"), 'action_url' => route('sales.show', $sale) ]); return back()->with('success', 'Paiement enregistré avec succès !'); } /** * ✅ NEW: Change Payment Status */ public function changePaymentStatus(Request $request, Sale $sale) { $request->validate([ 'payment_status' => 'required|in:paid,pending,partial' ]); $oldStatus = $sale->payment_status; $newStatus = $request->payment_status; $sale->update([ 'payment_status' => $newStatus, 'amount_paid' => $newStatus === 'paid' ? $sale->total_amount : ($newStatus === 'pending' ? 0 : $sale->amount_paid) ]); $statusLabels = [ 'paid' => '✅ Payé', 'pending' => '⏳ En attente', 'partial' => '💵 Paiement partiel' ]; // ✅ NOTIFICATION 8: Payment Status Changed $this->notifyUser([ 'type' => $newStatus === 'paid' ? 'success' : ($newStatus === 'partial' ? 'info' : 'warning'), 'title' => '💳 Statut de Paiement Modifié', 'message' => "Vente #{$sale->id}: {$statusLabels[$oldStatus]} → {$statusLabels[$newStatus]}", 'action_url' => route('sales.show', $sale) ]); return back()->with('success', 'Statut de paiement mis à jour !'); } /** * ✅ NEW: Export Sales Data */ public function export() { $sales = Sale::with('user')->get(); // ✅ NOTIFICATION 9: Export Generated $this->notifyUser([ 'type' => 'info', 'title' => '📊 Export de Données', 'message' => "Export des ventes généré: {$sales->count()} ventes exportées", 'action_url' => route('sales.index') ]); $filename = 'ventes_cuniapp_' . date('Y-m-d_His') . '.json'; $json = json_encode($sales, JSON_PRETTY_PRINT); return response($json, 200) ->header('Content-Type', 'application/json') ->header('Content-Disposition', 'attachment; filename="' . $filename . '"'); } /** * ✅ NEW: Bulk Delete Sales */ public function bulkDelete(Request $request) { $request->validate([ 'ids' => 'required|array', 'ids.*' => 'exists:sales,id' ]); $count = count($request->ids); Sale::whereIn('id', $request->ids)->delete(); // ✅ NOTIFICATION 10: Bulk Delete $this->notifyUser([ 'type' => 'warning', 'title' => '🗑️ Suppression Multiple', 'message' => "{$count} vente(s) supprimée(s) en masse", 'action_url' => route('sales.index') ]); return back()->with('success', "{$count} vente(s) supprimée(s) avec succès !"); } /** * Helper: Get type label */ private function getTypeLabel(string $type): string { return match($type) { 'male' => 'mâle(s)', 'female' => 'femelle(s)', 'lapereau' => 'lapereau(x)', 'groupe' => 'groupe(s)', default => 'article(s)' }; } }

File: app/Http/Controllers/SettingsController.php
---
<?php namespace App\Http\Controllers; use App\Models\Setting; use App\Models\User; use Illuminate\Http\Request; use Illuminate\Support\Facades\Auth; use Illuminate\Support\Facades\Hash; use App\Traits\Notifiable; class SettingsController extends Controller { use Notifiable; public function index() { $settings = Setting::all()->groupBy('group'); $user = User::find(Auth::id()); return view('settings.index', compact('settings', 'user')); } public function update(Request $request) { $validated = $request->validate([ 'farm_name' => 'nullable|string|max:255', 'farm_address' => 'nullable|string|max:500', 'farm_phone' => 'nullable|string|max:20', 'farm_email' => 'nullable|email|max:255', 'gestation_days' => 'nullable|integer|min:28|max:35', 'weaning_weeks' => 'nullable|integer|min:4|max:8', 'alert_threshold' => 'nullable|integer|min:1|max:100', 'theme' => 'nullable|in:dark,light', // ✅ VALIDATE 'language' => 'nullable|in:fr,en', // ✅ VALIDATE 'notifications_email' => 'nullable|boolean', 'notifications_dashboard' => 'nullable|boolean', ]); // ✅ SAVE THEME/LANGUAGE TO USER (NOT GLOBAL SETTINGS!) $user = Auth::user(); if ($request->has('theme')) { $user->theme = $request->theme; } if ($request->has('language')) { // Fixed to properly save language $user->language = $request->language ?? 'fr'; } // Save notification preferences if ($request->has('notifications_email')) { $user->notifications_email = $request->boolean('notifications_email'); } if ($request->has('notifications_dashboard')) { $user->notifications_dashboard = $request->boolean('notifications_dashboard'); } $user->save(); // ✅ ALL USER PREFERENCES SAVED HERE // Save OTHER settings to global settings table (farm info, breeding params) Setting::set('farm_name', $request->farm_name, 'string', 'general', 'Nom de la ferme'); Setting::set('farm_address', $request->farm_address, 'string', 'general', 'Adresse'); Setting::set('farm_phone', $request->farm_phone, 'string', 'general', 'Téléphone'); Setting::set('farm_email', $request->farm_email, 'string', 'general', 'Email'); Setting::set('gestation_days', $request->gestation_days ?? 31, 'number', 'breeding', 'Jours de gestation'); Setting::set('weaning_weeks', $request->weaning_weeks ?? 6, 'number', 'breeding', 'Semaines de sevrage'); Setting::set('alert_threshold', $request->alert_threshold ?? 80, 'number', 'breeding', 'Seuil d\'alerte (%)'); return redirect()->route('settings.index') ->with('success', 'Paramètres enregistrés avec succès !'); } public function updateProfile(Request $request) { $user = User::find(Auth::id()); $validated = $request->validate([ 'name' => 'required|string|max:255', 'email' => 'required|email|max:255|unique:users,email,' . $user->id, 'current_password' => 'nullable|required_with:new_password', 'new_password' => 'nullable|min:8|confirmed', ]); $user->name = $request->name; $user->email = $request->email; // Handle password change if ($request->filled('new_password')) { if (!Hash::check($request->current_password, $user->password)) { return back()->withErrors(['current_password' => 'Le mot de passe actuel est incorrect.']); } $user->password = Hash::make($request->new_password); } $user->save(); // Create notification for profile update $this->notifyUser([ 'type' => 'info', 'title' => 'Profil mis à jour', 'message' => 'Vos informations personnelles ont été mises à jour', 'action_url' => route('settings.index') ]); return redirect()->route('settings.index') ->with('success', 'Profil mis à jour avec succès !'); } public function exportData() { // Fonctionnalité d'export des données $data = [ 'femelles' => \App\Models\Femelle::all(), 'males' => \App\Models\Male::all(), 'saillies' => \App\Models\Saillie::all(), 'mises_bas' => \App\Models\MiseBas::all(), ]; $filename = 'cuniapp_export_' . date('Y-m-d') . '.json'; $json = json_encode($data, JSON_PRETTY_PRINT); return response($json, 200) ->header('Content-Type', 'application/json') ->header('Content-Disposition', 'attachment; filename="' . $filename . '"'); } public function clearCache() { \Illuminate\Support\Facades\Artisan::call('cache:clear'); \Illuminate\Support\Facades\Artisan::call('config:clear'); \Illuminate\Support\Facades\Artisan::call('view:clear'); return redirect()->route('settings.index') ->with('success', 'Cache vidé avec succès !'); } }

File: app/Http/Middleware/SetLocale.php
---
<?php namespace App\Http\Middleware; use Closure; use Illuminate\Http\Request; use Illuminate\Support\Facades\App; use Illuminate\Support\Facades\Auth; use Symfony\Component\HttpFoundation\Response; class SetLocale { /** * Handle an incoming request and set application locale based on user preference */ public function handle(Request $request, Closure $next): Response { // Fixed to properly handle language setting if (Auth::check() && in_array(Auth::user()->language, ['fr', 'en'])) { App::setLocale(Auth::user()->language); view()->share('currentLocale', Auth::user()->language); // Also set HTML lang attribute for proper accessibility $request->headers->set('Accept-Language', Auth::user()->language); } else { $default = config('app.locale', 'fr'); App::setLocale($default); view()->share('currentLocale', $default); } return $next($request); } }

File: app/Http/Requests/Auth/LoginRequest.php
---
<?php namespace App\Http\Requests\Auth; use Illuminate\Auth\Events\Lockout; use Illuminate\Foundation\Http\FormRequest; use Illuminate\Support\Facades\Auth; use Illuminate\Support\Facades\RateLimiter; use Illuminate\Support\Str; use Illuminate\Validation\ValidationException; class LoginRequest extends FormRequest { public function authorize(): bool { return true; } public function rules(): array { return [ 'email' => ['required', 'string', 'email'], 'password' => ['required', 'string'], ]; } public function authenticate(): void { $this->ensureIsNotRateLimited(); $credentials = $this->only('email', 'password'); // Attempt login first if (! Auth::attempt($credentials, $this->boolean('remember'))) { RateLimiter::hit($this->throttleKey()); throw ValidationException::withMessages([ 'email' => __('Ces identifiants ne correspondent pas à nos enregistrements. Veuillez vérifier votre email et mot de passe.'), ]); } // ✅ CRITICAL: Block unverified users from logging in $user = Auth::user(); if ($user && ! $user->hasVerifiedEmail()) { Auth::logout(); // Immediately log out unverified user RateLimiter::hit($this->throttleKey()); throw ValidationException::withMessages([ 'email' => __('🔒 Votre email n\'est pas vérifié. Consultez votre boîte mail pour activer votre compte.'), ]); } RateLimiter::clear($this->throttleKey()); } public function ensureIsNotRateLimited(): void { if (! RateLimiter::tooManyAttempts($this->throttleKey(), 5)) { return; } event(new Lockout($this)); $seconds = RateLimiter::availableIn($this->throttleKey()); // 🔧 FIXED: User-friendly rate limit message throw ValidationException::withMessages([ 'email' => __('Trop de tentatives de connexion. Veuillez réessayer dans :seconds secondes.', [ 'seconds' => $seconds ]), ]); } public function throttleKey(): string { return Str::transliterate(Str::lower($this->string('email')) . '|' . $this->ip()); } }

File: app/Http/Requests/ProfileUpdateRequest.php
---
<?php namespace App\Http\Requests; use App\Models\User; use Illuminate\Foundation\Http\FormRequest; use Illuminate\Validation\Rule; class ProfileUpdateRequest extends FormRequest { /** * Get the validation rules that apply to the request. * * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array<mixed>|string> */ public function rules(): array { return [ 'name' => ['required', 'string', 'max:255'], 'email' => [ 'required', 'string', 'lowercase', 'email', 'max:255', Rule::unique(User::class)->ignore($this->user()->id), ], ]; } }

File: app/Mail/ActivityNotificationMail.php
---
<?php namespace App\Mail; use App\Models\Notification; use Illuminate\Bus\Queueable; use Illuminate\Mail\Mailable; use Illuminate\Queue\SerializesModels; class ActivityNotificationMail extends Mailable { use Queueable, SerializesModels; public Notification $notification; public function __construct(Notification $notification) { $this->notification = $notification; } public function build(): Mailable { $colors = [ 'success' => '#10b981', 'warning' => '#f59e0b', 'error' => '#ef4444', 'info' => '#3b82f6' ]; $color = $colors[$this->notification->type] ?? $colors['info']; return $this->subject("🔔 Notification CuniApp: {$this->notification->title}") ->view('emails.notification', [ 'notification' => $this->notification, 'color' => $color ]); } }

File: app/Models/Femelle.php
---
<?php namespace App\Models; use Illuminate\Database\Eloquent\Factories\HasFactory; use Illuminate\Database\Eloquent\Model; class Femelle extends Model { use HasFactory; protected $table = 'femelles'; protected $fillable = [ 'code', 'nom', 'race', 'origine', 'date_naissance', 'etat' ]; public function saillies() { return $this->hasMany(Saillie::class); } }

File: app/Models/Lapereau.php
---
<?php namespace App\Models; use Illuminate\Database\Eloquent\Factories\HasFactory; use Illuminate\Database\Eloquent\Model; class Lapereau extends Model { use HasFactory; protected $fillable = [ 'mise_bas_id', 'age_semaines', 'categorie', 'alimentation_jour', 'alimentation_semaine' ]; public function miseBas() { return $this->belongsTo(MiseBas::class); } }

File: app/Models/Male.php
---
<?php namespace App\Models; use Illuminate\Database\Eloquent\Model; class Male extends Model { protected $table = 'males'; // nom de la table protected $fillable = ['code', 'nom', 'race', 'origine', 'date_naissance', 'etat']; }

File: app/Models/MiseBas.php
---
<?php namespace App\Models; use Illuminate\Database\Eloquent\Factories\HasFactory; use Illuminate\Database\Eloquent\Model; class MiseBas extends Model { use HasFactory; // Nom de la table protected $table = 'mises_bas'; protected $fillable = [ 'saillie_id', 'date_mise_bas', 'nb_vivant', 'nb_mort_ne', 'nb_retire', 'nb_adopte', 'date_sevrage', 'poids_moyen_sevrage' ]; /** * Relation : une mise bas appartient à une saillie */ public function saillie() { return $this->belongsTo(Saillie::class); } /** * Relation : une mise bas a plusieurs lapereaux */ public function lapereaux() { return $this->hasMany(Lapereau::class); } /** * Relation directe : une mise bas est liée à une femelle (via la saillie) */ public function femelle() { return $this->hasOneThrough( Femelle::class, // Modèle cible Saillie::class, // Modèle intermédiaire 'id', // Clé primaire sur saillies 'id', // Clé primaire sur femelles 'saillie_id', // Clé étrangère sur mises_bas 'femelle_id' // Clé étrangère sur saillies ); } }

File: app/Models/Notification.php
---
<?php namespace App\Models; use Illuminate\Database\Eloquent\Model; use Illuminate\Database\Eloquent\Relations\BelongsTo; class Notification extends Model { protected $fillable = [ 'user_id', 'type', 'title', 'message', 'action_url', 'icon', 'is_read', 'emailed', 'read_at' ]; protected $casts = [ 'is_read' => 'boolean', 'emailed' => 'boolean', 'read_at' => 'datetime', 'created_at' => 'datetime', ]; public function user(): BelongsTo { return $this->belongsTo(User::class); } public function markAsRead(): void { $this->update([ 'is_read' => true, 'read_at' => now() ]); } }

File: app/Models/Saillie.php
---
<?php namespace App\Models; use Illuminate\Database\Eloquent\Factories\HasFactory; use Illuminate\Database\Eloquent\Model; class Saillie extends Model { use HasFactory; protected $fillable = [ 'femelle_id', 'male_id', 'date_saillie', 'date_palpage', 'palpation_resultat', 'date_mise_bas_theorique' ]; public function femelle() { return $this->belongsTo(Femelle::class); } public function male() { return $this->belongsTo(Male::class); } public function misesBas() { return $this->hasMany(MiseBas::class); } }

File: app/Models/Sale.php
---
<?php namespace App\Models; use Illuminate\Database\Eloquent\Model; use Illuminate\Database\Eloquent\Relations\BelongsTo; class Sale extends Model { protected $fillable = [ 'date_sale', 'quantity', 'type', 'category', 'unit_price', 'buyer_name', 'buyer_contact', 'buyer_address', 'notes', 'payment_status', 'amount_paid', 'user_id' ]; protected $casts = [ 'date_sale' => 'date', 'unit_price' => 'decimal:2', 'amount_paid' => 'decimal:2', 'created_at' => 'datetime', ]; public function user(): BelongsTo { return $this->belongsTo(User::class); } // Accessor for remaining balance public function getBalanceAttribute(): float { return $this->total_amount - $this->amount_paid; } // Scope for paid sales public function scopePaid($query) { return $query->where('payment_status', 'paid'); } // Scope for pending payments public function scopePending($query) { return $query->where('payment_status', 'pending'); } }

File: app/Models/Setting.php
---
<?php namespace App\Models; use Illuminate\Database\Eloquent\Factories\HasFactory; use Illuminate\Database\Eloquent\Model; class Setting extends Model { use HasFactory; protected $table = 'settings'; protected $fillable = [ 'key', 'value', 'type', 'group', 'label', 'description', ]; protected $casts = [ 'value' => 'string', ]; public static function get($key, $default = null) { $setting = self::where('key', $key)->first(); return $setting ? $setting->value : $default; } public static function set($key, $value, $type = 'string', $group = 'general', $label = null) { $setting = self::firstOrCreate(['key' => $key]); $setting->update([ 'value' => $value, 'type' => $type, 'group' => $group, 'label' => $label ?? $key, ]); return $setting; } }

File: app/Models/User.php
---
<?php namespace App\Models; use Illuminate\Contracts\Auth\MustVerifyEmail; use Illuminate\Database\Eloquent\Factories\HasFactory; use Illuminate\Foundation\Auth\User as Authenticatable; use Illuminate\Notifications\Notifiable; class User extends Authenticatable { use HasFactory, Notifiable; protected $fillable = [ 'name', 'email', 'password', 'email_verified_at', 'notifications_email', 'notifications_dashboard', 'theme', // ✅ ADD THIS 'language', // ✅ ADD THIS ]; protected $hidden = [ 'password', 'remember_token', ]; protected function casts(): array { return [ 'email_verified_at' => 'datetime', 'password' => 'hashed', ]; } }

File: app/Providers/AppServiceProvider.php
---
<?php namespace App\Providers; use Illuminate\Support\ServiceProvider; class AppServiceProvider extends ServiceProvider { /** * Register any application services. */ public function register(): void { // } /** * Bootstrap any application services. */ public function boot(): void { // } }

File: app/Traits/Notifiable.php
---
<?php namespace App\Traits; use App\Models\Notification; use Illuminate\Support\Facades\Mail; use App\Mail\ActivityNotificationMail; use App\Models\Setting; use Illuminate\Support\Facades\Log; trait Notifiable { public function notifyUser(array $data): Notification { $notification = Notification::create([ 'user_id' => $data['user_id'] ?? auth()->id(), 'type' => $data['type'] ?? 'info', 'title' => $data['title'], 'message' => $data['message'], 'action_url' => $data['action_url'] ?? null, 'icon' => $this->getIconForType($data['type'] ?? 'info'), ]); // ✅ CRITICAL FIX: Check USER'S preference (not global setting) $user = $notification->user; if ($user && $user->notifications_email && !$notification->emailed) { try { Mail::to($user->email)->send(new ActivityNotificationMail($notification)); $notification->update(['emailed' => true]); } catch (\Exception $e) { Log::error('Email notification failed: ' . $e->getMessage()); } } return $notification; } private function getIconForType(string $type): string { return match ($type) { 'success' => 'bi-check-circle-fill', 'warning' => 'bi-exclamation-triangle-fill', 'error' => 'bi-x-circle-fill', 'info' => 'bi-info-circle-fill', default => 'bi-bell-fill' }; } }

File: app/View/Components/AppLayout.php
---
<?php namespace App\View\Components; use Illuminate\View\Component; use Illuminate\View\View; class AppLayout extends Component { /** * Get the view / contents that represents the component. */ public function render(): View { return view('layouts.app'); } }

File: app/View/Components/GuestLayout.php
---
<?php namespace App\View\Components; use Illuminate\View\Component; use Illuminate\View\View; class GuestLayout extends Component { /** * Get the view / contents that represents the component. */ public function render(): View { return view('layouts.guest'); } }

File: app/View/Components/NewEntryButton.php
---
<?php namespace App\View\Components; use Closure; use Illuminate\Contracts\View\View; use Illuminate\View\Component; class NewEntryButton extends Component { /** * Create a new component instance. */ public function __construct() { // } /** * Get the view / contents that represent the component. */ public function render(): View|Closure|string { return view('components.new-entry-button'); } }

Processed 39 files from app/

═══════════════════════════════════════════════════
File Contents:
═══════════════════════════════════════════════════

File: database/migrations/0001_01_01_000000_create_users_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up(): void { Schema::create('users', function (Blueprint $table) { $table->id(); $table->string('name'); $table->string('email')->unique(); $table->timestamp('email_verified_at')->nullable(); $table->string('password'); $table->rememberToken(); $table->timestamps(); }); Schema::create('password_reset_tokens', function (Blueprint $table) { $table->string('email')->primary(); $table->string('token'); $table->timestamp('created_at')->nullable(); }); Schema::create('sessions', function (Blueprint $table) { $table->string('id')->primary(); $table->foreignId('user_id')->nullable()->index(); $table->string('ip_address', 45)->nullable(); $table->text('user_agent')->nullable(); $table->longText('payload'); $table->integer('last_activity')->index(); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('users'); Schema::dropIfExists('password_reset_tokens'); Schema::dropIfExists('sessions'); } };

File: database/migrations/0001_01_01_000001_create_cache_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up(): void { Schema::create('cache', function (Blueprint $table) { $table->string('key')->primary(); $table->mediumText('value'); $table->integer('expiration'); }); Schema::create('cache_locks', function (Blueprint $table) { $table->string('key')->primary(); $table->string('owner'); $table->integer('expiration'); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('cache'); Schema::dropIfExists('cache_locks'); } };

File: database/migrations/0001_01_01_000002_create_jobs_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up(): void { Schema::create('jobs', function (Blueprint $table) { $table->id(); $table->string('queue')->index(); $table->longText('payload'); $table->unsignedTinyInteger('attempts'); $table->unsignedInteger('reserved_at')->nullable(); $table->unsignedInteger('available_at'); $table->unsignedInteger('created_at'); }); Schema::create('job_batches', function (Blueprint $table) { $table->string('id')->primary(); $table->string('name'); $table->integer('total_jobs'); $table->integer('pending_jobs'); $table->integer('failed_jobs'); $table->longText('failed_job_ids'); $table->mediumText('options')->nullable(); $table->integer('cancelled_at')->nullable(); $table->integer('created_at'); $table->integer('finished_at')->nullable(); }); Schema::create('failed_jobs', function (Blueprint $table) { $table->id(); $table->string('uuid')->unique(); $table->text('connection'); $table->text('queue'); $table->longText('payload'); $table->longText('exception'); $table->timestamp('failed_at')->useCurrent(); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('jobs'); Schema::dropIfExists('job_batches'); Schema::dropIfExists('failed_jobs'); } };

File: database/migrations/2025_08_14_091443_create_femelles_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up(): void { Schema::create('femelles', function (Blueprint $table) { $table->id(); $table->string('code')->unique(); $table->string('nom'); $table->string('race')->nullable(); $table->enum('origine', ['Achat', 'Interne'])->default('Interne'); $table->date('date_naissance')->nullable(); $table->timestamps(); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('femelles'); } };

File: database/migrations/2025_08_14_094400_create_males_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up() { Schema::create('males', function (Blueprint $table) { $table->id(); $table->string('code', 20)->unique(); $table->string('nom', 100); $table->string('race', 100)->nullable(); $table->enum('origine', ['Achat','Interne'])->default('Interne'); $table->date('date_naissance')->nullable(); $table->timestamps(); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('males'); } };

File: database/migrations/2025_08_14_094418_create_saillies_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up() { Schema::create('saillies', function (Blueprint $table) { $table->id(); $table->foreignId('femelle_id')->constrained('femelles')->onDelete('cascade'); $table->foreignId('male_id')->constrained('males')->onDelete('cascade'); $table->date('date_saillie'); $table->date('date_palpage')->nullable(); $table->enum('palpation_resultat', ['+','-'])->nullable(); $table->date('date_mise_bas_theorique')->nullable(); // <- colonne manquante $table->timestamps(); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('saillies'); } };

File: database/migrations/2025_08_14_094423_create_mises_bas_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up() { Schema::create('mises_bas', function (Blueprint $table) { $table->id(); $table->foreignId('saillie_id')->constrained('saillies')->onDelete('cascade'); $table->date('date_mise_bas'); // <- obligatoire $table->integer('nb_vivant')->default(0); $table->integer('nb_mort_ne')->default(0); $table->integer('nb_retire')->default(0); $table->integer('nb_adopte')->default(0); $table->date('date_sevrage')->nullable(); $table->decimal('poids_moyen_sevrage', 5, 2)->nullable(); $table->timestamps(); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('mises_bas'); } };

File: database/migrations/2025_08_14_094431_create_lapereaux_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up() { Schema::create('lapereaux', function (Blueprint $table) { $table->id(); $table->foreignId('mise_bas_id')->constrained('mises_bas')->onDelete('cascade'); $table->integer('age_semaines')->nullable(); $table->enum('categorie', ['<5 semaines','5-8 semaines','8-12 semaines','+12 semaines'])->nullable(); $table->decimal('alimentation_jour', 6, 2)->default(0.00); $table->decimal('alimentation_semaine', 6, 2)->default(0.00); $table->timestamps(); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('lapereaux'); } };

File: database/migrations/2025_08_14_094627_add_etat_to_femelles_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up() { Schema::table('femelles', function (Blueprint $table) { $table->enum('etat', ['Active','Gestante','Allaitante','Vide'])->default('Active')->after('origine'); }); } public function down() { Schema::table('femelles', function (Blueprint $table) { $table->dropColumn('etat'); }); } };

File: database/migrations/2025_08_14_230835_add_etat_to_males_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { public function up(): void { Schema::table('males', function (Blueprint $table) { $table->string('etat')->default('Active'); // valeurs possibles : Active, Gestante, Allaitante, Vide }); } public function down(): void { Schema::table('males', function (Blueprint $table) { $table->dropColumn('etat'); }); } };

File: database/migrations/2026_02_23_113933_create_settings_table.php
---
// database/migrations/2025_01_15_000000_create_settings_table.php <?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { public function up(): void { Schema::create('settings', function (Blueprint $table) { $table->id(); $table->string('key')->unique(); $table->text('value')->nullable(); $table->string('type')->default('string'); // string, boolean, number, json $table->string('group')->default('general'); // general, breeding, notifications, user $table->string('label')->nullable(); $table->text('description')->nullable(); $table->timestamps(); }); } public function down(): void { Schema::dropIfExists('settings'); } };

File: database/migrations/2026_02_23_160818_add_femelle_id_to_mises_bas_table.php
---
<?php // database/migrations/2026_02_23_000000_add_femelle_id_to_mises_bas_table.php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { public function up(): void { Schema::table('mises_bas', function (Blueprint $table) { // Add femelle_id column $table->foreignId('femelle_id')->nullable()->after('saillie_id')->constrained('femelles')->onDelete('cascade'); // Make saillie_id nullable (since we're using femelle_id directly now) $table->foreignId('saillie_id')->nullable()->change(); }); } public function down(): void { Schema::table('mises_bas', function (Blueprint $table) { $table->dropForeign(['femelle_id']); $table->dropColumn('femelle_id'); $table->foreignId('saillie_id')->nullable(false)->change(); }); } };

File: database/migrations/2026_02_23_161043_update_etat_enum_in_males_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { public function up(): void { Schema::table('males', function (Blueprint $table) { $table->enum('etat', ['Active', 'Inactive', 'Malade'])->default('Active')->change(); }); } public function down(): void { Schema::table('males', function (Blueprint $table) { $table->string('etat')->default('Active')->change(); }); } };

File: database/migrations/2026_02_24_104319_add_email_verifed_at_to_user_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { public function up(): void { Schema::table('users', function (Blueprint $table) { if (!Schema::hasColumn('users', 'email_verified_at')) { $table->timestamp('email_verified_at')->nullable()->after('email'); } }); } public function down(): void { Schema::table('users', function (Blueprint $table) { $table->dropColumn('email_verified_at'); }); } };

File: database/migrations/2026_02_25_100841_create_notifications_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { public function up(): void { Schema::create('notifications', function (Blueprint $table) { $table->id(); $table->foreignId('user_id')->constrained()->onDelete('cascade'); $table->string('type'); // success, warning, info, error $table->string('title'); $table->text('message'); $table->string('action_url')->nullable(); $table->string('icon')->default('bi-bell'); $table->boolean('is_read')->default(false); $table->boolean('emailed')->default(false); $table->timestamp('read_at')->nullable(); $table->timestamps(); }); } public function down(): void { Schema::dropIfExists('notifications'); } };

File: database/migrations/2026_02_25_111220_add_notification_preferences_to_users_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { /** * Run the migrations. */ public function up(): void { Schema::table('users', function (Blueprint $table) { $table->boolean('notifications_email')->default(true)->after('email_verified_at'); $table->boolean('notifications_dashboard')->default(true)->after('notifications_email'); }); } public function down(): void { Schema::table('users', function (Blueprint $table) { $table->dropColumn(['notifications_email', 'notifications_dashboard']); }); } };

File: database/migrations/2026_02_25_152347_create_sales_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { public function up(): void { Schema::create('sales', function (Blueprint $table) { $table->id(); $table->date('date_sale')->default(now()); $table->integer('quantity')->default(1); $table->enum('type', ['male', 'female', 'lapereau', 'groupe'])->default('lapereau'); $table->string('category')->nullable(); // e.g., "5-8 semaines", "reproducteur" $table->decimal('unit_price', 10, 2); $table->decimal('total_amount', 10, 2)->storedAs('quantity * unit_price'); $table->string('buyer_name'); $table->string('buyer_contact')->nullable(); $table->string('buyer_address')->nullable(); $table->text('notes')->nullable(); $table->enum('payment_status', ['paid', 'pending', 'partial'])->default('pending'); $table->decimal('amount_paid', 10, 2)->default(0); $table->foreignId('user_id')->constrained()->onDelete('cascade'); $table->timestamps(); }); } public function down(): void { Schema::dropIfExists('sales'); } };

File: database/migrations/2026_02_25_161402_add_theme_and_language_to_users_table.php
---
<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; return new class extends Migration { public function up(): void { Schema::table('users', function (Blueprint $table) { // Add AFTER notification preferences columns $table->string('theme')->default('dark')->after('notifications_dashboard'); $table->string('language')->default('fr')->after('theme'); }); } public function down(): void { Schema::table('users', function (Blueprint $table) { $table->dropColumn(['theme', 'language']); }); } };

Processed 18 files from database/migrations/
Info: Processing single file: .env
File: .env
---
# Application Configuration APP_NAME="CuniApp Élevage" APP_ENV=local APP_KEY=base64:ZJC3s7JYBleUw85qz1xZMAixmflmMlesMK8Aiu6xLpA= APP_DEBUG=true APP_URL=http://localhost:8000 APP_LOCALE=fr APP_FALLBACK_LOCALE=fr APP_FAKER_LOCALE=fr_FR # Database Configuration DB_CONNECTION=mysql DB_HOST=127.0.0.1 DB_PORT=3306 DB_DATABASE=cuniapp DB_USERNAME=cuniapp_user DB_PASSWORD=Secret123! # Mail Config MAIL_MAILER=smtp MAIL_HOST=smtp.gmail.com MAIL_PORT=587 MAIL_USERNAME=cuniiapp@gmail.com MAIL_PASSWORD=akuigixzqijbozdr MAIL_ENCRYPTION=tls MAIL_FROM_ADDRESS=cuniiapp@gmail.com MAIL_FROM_NAME="CuniApp Élevage" # Cache Configuration CACHE_DRIVER=database CACHE_STORE=database CACHE_PREFIX= # Session Configuration SESSION_DRIVER=file SESSION_LIFETIME=120 SESSION_ENCRYPT=false SESSION_PATH=/ SESSION_DOMAIN= # Queue Configuration QUEUE_CONNECTION=database # Filesystem Configuration FILESYSTEM_DISK=local # Logging Configuration LOG_CHANNEL=stack LOG_STACK=single LOG_DEPRECATIONS_CHANNEL=null LOG_LEVEL=debug # AWS Configuration (Optional) AWS_ACCESS_KEY_ID= AWS_SECRET_ACCESS_KEY= AWS_DEFAULT_REGION=us-east-1 AWS_BUCKET= AWS_USE_PATH_STYLE_ENDPOINT=false # Hashing Configuration HASHING_DRIVER=bcrypt # Broadcasting Configuration BROADCAST_DRIVER=log VITE_PUSHER_APP_KEY= VITE_PUSHER_HOST= VITE_PUSHER_PORT=443 VITE_PUSHER_SCHEME=https VITE_PUSHER_APP_CLUSTER=mt1 # Pusher Configuration PUSHER_APP_ID= PUSHER_APP_KEY= PUSHER_APP_SECRET= PUSHER_APP_CLUSTER=mt1 PUSHER_HOST= PUSHER_PORT=443 PUSHER_SCHEME=https # Vite Configuration VITE_APP_NAME="${APP_NAME}"
